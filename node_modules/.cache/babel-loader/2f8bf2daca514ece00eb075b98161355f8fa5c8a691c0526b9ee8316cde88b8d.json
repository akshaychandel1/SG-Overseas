{"ast":null,"code":"var _jsxFileName = \"/Users/akshaychandel/Desktop/Grocerryadminfrontend-main/src/pages/PriceList.jsx\",\n  _s = $RefreshSig$();\n// import React, { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n\n// const API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n//   const [search, setSearch] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     subcategory: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     profitLoss: \"\",\n//     gstPercent: \"\",\n//     hsnCode: \"\",\n//     taxType: \"cgst_sgst\",\n//     validTill: \"\",\n//     file: null,\n//     status: \"inactive\",\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [showForm, setShowForm] = useState(false);\n//   const [showModal, setShowModal] = useState(false);\n//   const [activeMenu, setActiveMenu] = useState(null);\n\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n\n//   const [filterCategory, setFilterCategory] = useState(\"\");\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n//   const [filterSubs, setFilterSubs] = useState([]);\n\n//   const [quickBasePrices, setQuickBasePrices] = useState({});\n//   const [quickProfitLoss, setQuickProfitLoss] = useState({});\n\n//   const [sortOrder, setSortOrder] = useState(\"\");\n//   const [showCategoryModal, setShowCategoryModal] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [categoryLoading, setCategoryLoading] = useState(false);\n//   const [alertBox, setAlertBox] = useState({\n//     show: false,\n//     message: \"\",\n//     type: \"success\",\n//   });\n\n//   useEffect(() => {\n//     if (alertBox.show) {\n//       const timer = setTimeout(() => {\n//         setAlertBox((prev) => ({ ...prev, show: false }));\n//       }, 2500);\n//       return () => clearTimeout(timer);\n//     }\n//   }, [alertBox.show]);\n\n//   useEffect(() => {\n//     fetchCategories();\n//   }, []);\n\n//   useEffect(() => {\n//     if (categories.length > 0) fetchItems();\n//   }, [categories]);\n\n//   useEffect(() => {\n//     if (!filterCategory) {\n//       setFilterSubs([]);\n//       setFilterSubcategory(\"\");\n//       return;\n//     }\n//     const cat = categories.find((c) => c._id === filterCategory);\n//     setFilterSubs(cat?.subcategories || []);\n//     setFilterSubcategory(\"\");\n//   }, [filterCategory, categories]);\n\n//   useEffect(() => {\n//     if (!form.category) {\n//       setSubcategories([]);\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//       return;\n//     }\n//     const cat = categories.find((c) => c._id === form.category);\n//     setSubcategories(cat?.subcategories || []);\n//   }, [form.category, categories]);\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data?.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error\", err);\n//       showAlert(\"Could not fetch categories\", \"error\");\n//     }\n//   };\n\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL);\n//       if (res.data?.success) {\n//         const raw = res.data.data || [];\n//         const flat = [];\n//         raw.forEach((cat) => {\n//           cat.subcategories.forEach((sub) => {\n//             sub.products.forEach((p) => {\n//               flat.push({\n//                 ...p,\n//                 category: {\n//                   _id: cat.id,\n//                   name: cat.name,\n//                   image: cat.image,\n//                 },\n//                 subcategory: {\n//                   _id: sub.id,\n//                   name: sub.name,\n//                   image: sub.image,\n//                 },\n//               });\n//             });\n//           });\n//         });\n//         flat.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n//         setItems(flat);\n//       }\n//     } catch (err) {\n//       console.error(\"Fetch items error\", err);\n//       showAlert(\"Could not fetch items\", \"error\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files?.length) {\n//       setForm((p) => ({ ...p, file: files[0] }));\n//     } else {\n//       setForm((p) => ({ ...p, [name]: value }));\n//     }\n//   };\n\n//   const showAlert = (message, type = \"success\") => {\n//     setAlertBox({ show: true, message, type });\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     const nameExists = items.some(\n//       (p) =>\n//         p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\n//         p._id !== editId\n//     );\n\n//     if (nameExists) {\n//       showAlert(\"❌ Product name already exists!\", \"error\");\n//       setLoading(false);\n//       return;\n//     }\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         showAlert(\"Name, category & base price are required\", \"error\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       fd.append(\"name\", form.name.trim());\n//       fd.append(\"category\", form.category);\n//       if (form.subcategory) {\n//         const sub = subcategories.find((s) => s._id === form.subcategory);\n//         if (sub) {\n//           fd.append(\n//             \"subcategory\",\n//             JSON.stringify({\n//               id: sub._id,\n//               name: sub.name,\n//               image: sub.image || \"\",\n//             })\n//           );\n//         }\n//       } else {\n//         fd.append(\"subcategory\", JSON.stringify(null));\n//       }\n\n//       fd.append(\"basePrice\", form.basePrice);\n//       fd.append(\"profitLoss\", form.profitLoss || 0);\n//       fd.append(\"gstPercent\", form.gstPercent || 0);\n//       fd.append(\"hsnCode\", form.hsnCode || \"\");\n//       fd.append(\"taxType\", form.taxType);\n//       if (form.description) fd.append(\"description\", form.description);\n//       if (form.validTill) fd.append(\"validTill\", form.validTill);\n//       fd.append(\"status\", form.status);\n//       if (form.file) fd.append(\"file\", form.file);\n\n//       if (editId) {\n//         await axios.put(`${API_URL}/${editId}`, fd);\n//         showAlert(\"✅ Product updated successfully\", \"success\");\n//       } else {\n//         await axios.post(API_URL, fd);\n//         showAlert(\"✅ Product added successfully\", \"success\");\n//       }\n\n//       await fetchItems();\n//       resetForm();\n//     } catch (err) {\n//       console.error(\"Save error\", err);\n//       if (err.response?.data?.message === \"Product name already exists\") {\n//         showAlert(\"❌ Product name already exists!\", \"error\");\n//       } else {\n//         showAlert(\"❌ Save failed!\", \"error\");\n//       }\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const resetForm = () => {\n//     setForm({\n//       name: \"\",\n//       category: \"\",\n//       subcategory: \"\",\n//       description: \"\",\n//       basePrice: \"\",\n//       profitLoss: \"\",\n//       validTill: \"\",\n//       file: null,\n//       status: \"inactive\",\n//     });\n//     setEditId(null);\n//     setShowModal(false);\n//     setShowForm(false);\n//   };\n\n//   const handleAddCategory = async () => {\n//     if (!newCategoryName.trim()) {\n//       showAlert(\"Category name is required\", \"error\");\n//       return;\n//     }\n\n//     try {\n//       setCategoryLoading(true);\n//       const res = await axios.post(CATEGORY_URL, {\n//         name: newCategoryName.trim(),\n//       });\n\n//       if (res.data?.success) {\n//         showAlert(\"✅ Category added successfully\", \"success\");\n//         setNewCategoryName(\"\");\n//         setShowCategoryModal(false);\n//         await fetchCategories();\n//       } else {\n//         showAlert(\"❌ Category add failed\", \"error\");\n//       }\n//     } catch (err) {\n//       console.error(\"Add category error\", err);\n//       showAlert(\"❌ Error while adding category\", \"error\");\n//     } finally {\n//       setCategoryLoading(false);\n//     }\n//   };\n\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice || \"\",\n//       profitLoss: item.profitLoss || 0,\n//       gstPercent: item.gstPercent || \"\",\n//       hsnCode: item.hsnCode || \"\",\n//       taxType: item.taxType || \"cgst_sgst\",\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//       status: item.status || \"inactive\",\n//     });\n\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n//     setEditId(item._id);\n//     setShowModal(true);\n//     setActiveMenu(null);\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete this item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       setItems((prev) => prev.filter((x) => x._id !== id));\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\n//       setActiveMenu(null);\n//       showAlert(\"✅ Product deleted successfully\", \"success\");\n//     } catch (err) {\n//       console.error(\"Delete error\", err);\n//       showAlert(\"❌ Delete failed\", \"error\");\n//     }\n//   };\n\n//   const handleStatusToggle = async (item) => {\n//     try {\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       setItems((prev) =>\n//         prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\n//       );\n//       showAlert(`✅ Status updated to ${newStatus}`, \"success\");\n//     } catch (err) {\n//       console.error(\"Status toggle error\", err);\n//       showAlert(\"❌ Status update failed\", \"error\");\n//     }\n//   };\n\n//   const updateLocalItemField = (id, key, value) => {\n//     setItems((prev) =>\n//       prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\n//     );\n//   };\n\n//   const handleBulkSave = async () => {\n//     if (!selectedItems.length) {\n//       showAlert(\"No items selected\", \"warning\");\n//       return;\n//     }\n\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         basePrice: Number(x.basePrice),\n//         profitLoss: Number(x.profitLoss),\n//         gstPercent: Number(x.gstPercent || 0),\n//         hsnCode: x.hsnCode || \"\",\n//         taxType: x.taxType || \"cgst_sgst\",\n//         status: x.status,\n//       }));\n\n//     try {\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       showAlert(\"✅ Bulk save successful\", \"success\");\n//       setBulkMode(false);\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk save error\", err);\n//       showAlert(\"❌ Bulk save failed\", \"error\");\n//     }\n//   };\n\n//   const handleBulkDelete = async () => {\n//     if (!selectedItems.length) {\n//       showAlert(\"No items selected\", \"warning\");\n//       return;\n//     }\n//     if (!window.confirm(\"Delete selected items?\")) return;\n\n//     try {\n//       await Promise.all(\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\n//       );\n//       setSelectedItems([]);\n//       fetchItems();\n//       setBulkMode(false);\n//       showAlert(\"✅ Bulk delete successful\", \"success\");\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       showAlert(\"❌ Bulk delete failed\", \"error\");\n//     }\n//   };\n\n//   const updateBasePrice = async (item) => {\n//     const newBase = Number(quickBasePrices[item._id] ?? item.basePrice);\n//     if (isNaN(newBase)) {\n//       showAlert(\"Invalid Base Price\", \"error\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       const fd = new FormData();\n//       fd.append(\"name\", item.name);\n//       fd.append(\"category\", item.category?._id);\n//       if (item.subcategory) {\n//         fd.append(\"subcategory\", JSON.stringify(item.subcategory));\n//       }\n//       fd.append(\"description\", item.description || \"\");\n//       fd.append(\"basePrice\", newBase);\n//       fd.append(\"profitLoss\", item.profitLoss);\n//       fd.append(\"status\", item.status);\n\n//       const res = await axios.put(`${API_URL}/${item._id}`, fd);\n//       if (res.data.success) {\n//         await fetchItems();\n//         setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\n//         showAlert(\"✅ Base price updated\", \"success\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       showAlert(\"❌ Update failed\", \"error\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const updateProfitLoss = async (item) => {\n//     const diff = Number(quickProfitLoss[item._id] ?? 0);\n//     if (isNaN(diff)) {\n//       showAlert(\"Invalid Profit/Loss\", \"error\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, {\n//         diff,\n//       });\n//       if (res.data.success) {\n//         await fetchItems();\n//         setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\n//         showAlert(\"✅ Profit/Loss updated\", \"success\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       showAlert(\"❌ Update failed\", \"error\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const filteredItems = items.filter((item) => {\n//     const t = search.toLowerCase();\n//     const matchText =\n//       (item.name || \"\").toLowerCase().includes(t) ||\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\n\n//     const matchCategory =\n//       !filterCategory || item.category?._id === filterCategory;\n//     const matchSub =\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\n\n//     return matchText && matchCategory && matchSub;\n//   });\n\n//   let sortedItems = [...filteredItems];\n//   if (sortOrder === \"low\") {\n//     sortedItems.sort(\n//       (a, b) => (Number(a.salePrice) || 0) - (Number(b.salePrice) || 0)\n//     );\n//   } else if (sortOrder === \"high\") {\n//     sortedItems.sort(\n//       (a, b) => (Number(b.salePrice) || 0) - (Number(a.salePrice) || 0)\n//     );\n//   }\n\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = sortedItems.slice(\n//     indexOfLast - itemsPerPage,\n//     indexOfLast\n//   );\n//   const totalPages = Math.max(1, Math.ceil(sortedItems.length / itemsPerPage));\n\n//   return (\n//     <div className=\"dashboard-container\">\n//       {/* Header */}\n//       <div className=\"dashboard-header\">\n//         <div className=\"header-content\">\n//           <h1 className=\"header-title\">Product Management</h1>\n//           <p className=\"header-subtitle\">\n//             Manage your products, categories, and inventory\n//           </p>\n//         </div>\n//         <div className=\"header-actions\">\n//           <button\n//             className=\"btn btn-primary\"\n//             onClick={() => {\n//               setShowForm(!showForm);\n//               setEditId(null);\n//             }}\n//           >\n//             <i className=\"icon-plus\"></i>\n//             {showForm ? \"Close Form\" : \"Add Product\"}\n//           </button>\n//         </div>\n//       </div>\n\n//       {/* Stats Cards */}\n//       <div className=\"stats-grid\">\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-blue\">\n//             <i className=\"icon-package\"></i>\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">{items.length}</h3>\n//             <p className=\"stat-label\">Total Products</p>\n//           </div>\n//         </div>\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-green\">\n//             <i className=\"icon-check-circle\"></i>\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">\n//               {items.filter((x) => x.status === \"active\").length}\n//             </h3>\n//             <p className=\"stat-label\">Active Products</p>\n//           </div>\n//         </div>\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-orange\">\n//             <i className=\"icon-tag\"></i>\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">{categories.length}</h3>\n//             <p className=\"stat-label\">Categories</p>\n//           </div>\n//         </div>\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-purple\">\n//             <i className=\"icon-filter\"></i>\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">{filteredItems.length}</h3>\n//             <p className=\"stat-label\">Filtered Items</p>\n//           </div>\n//         </div>\n//       </div>\n\n//       {/* Search and Filters */}\n//       <div className=\"search-filters-card\">\n//         <div className=\"search-section\">\n//           <div className=\"search-box\">\n//             <i className=\"icon-search\"></i>\n//             <input\n//               type=\"text\"\n//               placeholder=\"Search products, categories...\"\n//               value={search}\n//               onChange={(e) => {\n//                 setSearch(e.target.value);\n//                 setCurrentPage(1);\n//               }}\n//               className=\"search-input\"\n//             />\n//           </div>\n//           <div className=\"filters-row\">\n//             <div className=\"filter-group\">\n//               <label>Category</label>\n//               <select\n//                 value={filterCategory}\n//                 onChange={(e) => setFilterCategory(e.target.value)}\n//                 className=\"filter-select\"\n//               >\n//                 <option value=\"\">All Categories</option>\n//                 {categories.map((c) => (\n//                   <option key={c._id} value={c._id}>\n//                     {c.name}\n//                   </option>\n//                 ))}\n//               </select>\n//             </div>\n//             <div className=\"filter-group\">\n//               <label>Subcategory</label>\n//               <select\n//                 value={filterSubcategory}\n//                 onChange={(e) => setFilterSubcategory(e.target.value)}\n//                 disabled={!filterSubs.length}\n//                 className=\"filter-select\"\n//               >\n//                 <option value=\"\">All Subcategories</option>\n//                 {filterSubs.map((s) => (\n//                   <option key={s._id} value={s._id}>\n//                     {s.name}\n//                   </option>\n//                 ))}\n//               </select>\n//             </div>\n//             <div className=\"filter-group\">\n//               <label>Sort By</label>\n//               <select\n//                 value={sortOrder}\n//                 onChange={(e) => setSortOrder(e.target.value)}\n//                 className=\"filter-select\"\n//               >\n//                 <option value=\"\">Default</option>\n//                 <option value=\"low\">Price: Low to High</option>\n//                 <option value=\"high\">Price: High to Low</option>\n//               </select>\n//             </div>\n//             <div className=\"filter-group\">\n//               <label>Actions</label>\n//               <div className=\"action-buttons\">\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\n//                 >\n//                   <i className=\"icon-download\"></i> Export CSV\n//                 </button>\n//                 <label className=\"btn btn-secondary\">\n//                   <input\n//                     type=\"file\"\n//                     accept=\".csv\"\n//                     style={{ display: \"none\" }}\n//                     onChange={async (e) => {\n//                       try {\n//                         const fd = new FormData();\n//                         fd.append(\"file\", e.target.files[0]);\n//                         await axios.post(`${API_URL}/import`, fd);\n//                         showAlert(\"✅ Imported successfully\", \"success\");\n//                         fetchItems();\n//                       } catch (err) {\n//                         showAlert(\"❌ Import failed\", \"error\");\n//                       }\n//                     }}\n//                   />\n//                   <i className=\"icon-upload\"></i> Import CSV\n//                 </label>\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n\n//       {/* Bulk Actions */}\n//       {selectedItems.length > 0 && (\n//         <div className=\"bulk-actions-card\">\n//           <div className=\"bulk-header\">\n//             <h3>\n//               <i className=\"icon-check-square\"></i>\n//               {selectedItems.length} item{selectedItems.length > 1 ? \"s\" : \"\"}{\" \"}\n//               selected\n//             </h3>\n//             <div className=\"bulk-buttons\">\n//               {!bulkMode ? (\n//                 <>\n//                   <button\n//                     className=\"btn btn-danger\"\n//                     onClick={handleBulkDelete}\n//                   >\n//                     <i className=\"icon-trash-2\"></i> Bulk Delete\n//                   </button>\n//                   <button\n//                     className=\"btn btn-primary\"\n//                     onClick={() => setBulkMode(true)}\n//                   >\n//                     <i className=\"icon-edit\"></i> Bulk Edit\n//                   </button>\n//                 </>\n//               ) : (\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={() => setBulkMode(false)}\n//                 >\n//                   <i className=\"icon-x\"></i> Cancel\n//                 </button>\n//               )}\n//             </div>\n//           </div>\n\n//           {bulkMode && (\n//             <div className=\"bulk-edit-panel\">\n//               <h4>Bulk Edit Products</h4>\n//               <div className=\"bulk-grid\">\n//                 {items\n//                   .filter((item) => selectedItems.includes(item._id))\n//                   .map((item) => (\n//                     <div key={item._id} className=\"bulk-item-card\">\n//                       <h5>{item.name}</h5>\n//                       <div className=\"bulk-fields\">\n//                         <div className=\"form-group\">\n//                           <label>Base Price</label>\n//                           <input\n//                             type=\"number\"\n//                             value={item.basePrice}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"basePrice\",\n//                                 Number(e.target.value)\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>Profit/Loss</label>\n//                           <input\n//                             type=\"number\"\n//                             value={item.profitLoss}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"profitLoss\",\n//                                 Number(e.target.value)\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>GST %</label>\n//                           <input\n//                             type=\"number\"\n//                             value={item.gstPercent || \"\"}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"gstPercent\",\n//                                 Number(e.target.value)\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>Status</label>\n//                           <select\n//                             value={item.status}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"status\",\n//                                 e.target.value\n//                               )\n//                             }\n//                             className=\"form-select\"\n//                           >\n//                             <option value=\"active\">Active</option>\n//                             <option value=\"inactive\">Inactive</option>\n//                           </select>\n//                         </div>\n//                       </div>\n//                     </div>\n//                   ))}\n//               </div>\n//               <div className=\"bulk-actions\">\n//                 <button className=\"btn btn-primary\" onClick={handleBulkSave}>\n//                   <i className=\"icon-save\"></i> Save All Changes\n//                 </button>\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={async () => {\n//                     if (!selectedItems.length) return;\n//                     for (let id of selectedItems)\n//                       await axios.post(`${API_URL}/copy/${id}`);\n//                     showAlert(\"✅ Selected items copied\", \"success\");\n//                     fetchItems();\n//                   }}\n//                 >\n//                   <i className=\"icon-copy\"></i> Copy Selected\n//                 </button>\n//               </div>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {/* Add/Edit Form */}\n//       {showForm && (\n//         <div className=\"form-card\">\n//           <div className=\"form-header\">\n//             <h3>\n//               <i className=\"icon-edit-2\"></i>\n//               {editId ? \"Edit Product\" : \"Add New Product\"}\n//             </h3>\n//             <button className=\"btn-icon\" onClick={resetForm}>\n//               <i className=\"icon-x\"></i>\n//             </button>\n//           </div>\n//           <form onSubmit={handleSubmit}>\n//             <div className=\"form-grid\">\n//               <div className=\"form-group\">\n//                 <label>Product Name *</label>\n//                 <input\n//                   type=\"text\"\n//                   name=\"name\"\n//                   value={form.name}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   required\n//                   placeholder=\"Enter product name\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Category *</label>\n//                 <div className=\"input-with-button\">\n//                   <select\n//                     name=\"category\"\n//                     value={form.category}\n//                     onChange={handleChange}\n//                     className=\"form-select\"\n//                     required\n//                   >\n//                     <option value=\"\">Select Category</option>\n//                     {categories.map((c) => (\n//                       <option key={c._id} value={c._id}>\n//                         {c.name}\n//                       </option>\n//                     ))}\n//                   </select>\n//                   <button\n//                     type=\"button\"\n//                     onClick={() => setShowCategoryModal(true)}\n//                     className=\"btn-icon-primary\"\n//                   >\n//                     <i className=\"icon-plus\"></i>\n//                   </button>\n//                 </div>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Subcategory</label>\n//                 <select\n//                   name=\"subcategory\"\n//                   value={form.subcategory}\n//                   onChange={handleChange}\n//                   disabled={!subcategories.length}\n//                   className=\"form-select\"\n//                 >\n//                   <option value=\"\">Select Subcategory</option>\n//                   {subcategories.map((s) => (\n//                     <option key={s._id} value={s._id}>\n//                       {s.name}\n//                     </option>\n//                   ))}\n//                 </select>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Base Price *</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"basePrice\"\n//                   value={form.basePrice}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   required\n//                   placeholder=\"0.00\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Profit/Loss</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"profitLoss\"\n//                   value={form.profitLoss}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   placeholder=\"0\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>GST %</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"gstPercent\"\n//                   value={form.gstPercent}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   placeholder=\"18\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>HSN Code</label>\n//                 <input\n//                   type=\"text\"\n//                   name=\"hsnCode\"\n//                   value={form.hsnCode}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   placeholder=\"Enter HSN code\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Tax Type</label>\n//                 <select\n//                   name=\"taxType\"\n//                   value={form.taxType}\n//                   onChange={handleChange}\n//                   className=\"form-select\"\n//                 >\n//                   <option value=\"cgst_sgst\">CGST + SGST</option>\n//                   <option value=\"igst\">IGST</option>\n//                 </select>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Valid Till</label>\n//                 <input\n//                   type=\"date\"\n//                   name=\"validTill\"\n//                   value={form.validTill}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Status</label>\n//                 <select\n//                   name=\"status\"\n//                   value={form.status}\n//                   onChange={handleChange}\n//                   className=\"form-select\"\n//                 >\n//                   <option value=\"active\">Active</option>\n//                   <option value=\"inactive\">Inactive</option>\n//                 </select>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Image</label>\n//                 <input\n//                   type=\"file\"\n//                   accept=\"image/*\"\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                 />\n//               </div>\n//             </div>\n//             <div className=\"form-group\">\n//               <label>Description</label>\n//               <textarea\n//                 name=\"description\"\n//                 value={form.description}\n//                 onChange={handleChange}\n//                 className=\"form-textarea\"\n//                 rows=\"3\"\n//                 placeholder=\"Product description...\"\n//               ></textarea>\n//             </div>\n//             <div className=\"form-actions\">\n//               <button\n//                 type=\"submit\"\n//                 className=\"btn btn-primary\"\n//                 disabled={loading}\n//               >\n//                 {loading ? (\n//                   <>\n//                     <i className=\"icon-loader spinner\"></i>\n//                     Saving...\n//                   </>\n//                 ) : editId ? (\n//                   <>\n//                     <i className=\"icon-save\"></i>\n//                     Update Product\n//                   </>\n//                 ) : (\n//                   <>\n//                     <i className=\"icon-plus\"></i>\n//                     Add Product\n//                   </>\n//                 )}\n//               </button>\n//               <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\n//                 Cancel\n//               </button>\n//             </div>\n//           </form>\n//         </div>\n//       )}\n\n//       {/* Products Table */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <div>\n//             <h3>Products List</h3>\n//             <p className=\"table-subtitle\">\n//               Showing {currentItems.length} of {filteredItems.length} products\n//             </p>\n//           </div>\n//           <div className=\"table-actions\">\n//             <div className=\"table-checkbox\">\n//               <input\n//                 type=\"checkbox\"\n//                 checked={\n//                   selectedItems.length === filteredItems.length &&\n//                   filteredItems.length > 0\n//                 }\n//                 onChange={() => {\n//                   if (selectedItems.length === filteredItems.length)\n//                     setSelectedItems([]);\n//                   else setSelectedItems(filteredItems.map((x) => x._id));\n//                 }}\n//               />\n//               <span>Select All</span>\n//             </div>\n//           </div>\n//         </div>\n\n//         <div className=\"table-responsive\">\n//           <table className=\"data-table\">\n//             <thead>\n//               <tr>\n//                 <th></th>\n//                 <th>#</th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Base Price</th>\n//                 <th>Profit/Loss</th>\n//                 <th>Sale Price</th>\n//                 <th>GST</th>\n//                 <th>Status</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         setSelectedItems((prev) =>\n//                           prev.includes(item._id)\n//                             ? prev.filter((x) => x !== item._id)\n//                             : [...prev, item._id]\n//                         )\n//                       }\n//                     />\n//                   </td>\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n//                   <td>\n//                     <div className=\"table-image\">\n//                       {item.image ? (\n//                         <img src={item.image} alt={item.name} />\n//                       ) : (\n//                         <div className=\"image-placeholder\">\n//                           <i className=\"icon-image\"></i>\n//                         </div>\n//                       )}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"product-info\">\n//                       <strong>{item.name}</strong>\n//                       {item.description && (\n//                         <small>{item.description.substring(0, 50)}...</small>\n//                       )}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"category-info\">\n//                       <span className=\"category-badge\">\n//                         {item.category?.name || \"-\"}\n//                       </span>\n//                       {item.subcategory?.name && (\n//                         <small>{item.subcategory.name}</small>\n//                       )}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"editable-field\">\n//                       <input\n//                         type=\"number\"\n//                         value={\n//                           quickBasePrices[item._id] !== undefined\n//                             ? quickBasePrices[item._id]\n//                             : item.basePrice\n//                         }\n//                         onChange={(e) =>\n//                           setQuickBasePrices((p) => ({\n//                             ...p,\n//                             [item._id]: e.target.value,\n//                           }))\n//                         }\n//                         className=\"quick-input\"\n//                       />\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={() => updateBasePrice(item)}\n//                         title=\"Save\"\n//                       >\n//                         <i className=\"icon-check\"></i>\n//                       </button>\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"editable-field\">\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"Change\"\n//                         value={quickProfitLoss[item._id] ?? \"\"}\n//                         onChange={(e) =>\n//                           setQuickProfitLoss((p) => ({\n//                             ...p,\n//                             [item._id]: e.target.value,\n//                           }))\n//                         }\n//                         className=\"quick-input\"\n//                       />\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={() => updateProfitLoss(item)}\n//                         title=\"Save\"\n//                       >\n//                         <i className=\"icon-check\"></i>\n//                       </button>\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <span className=\"price-badge\">\n//                       ₹{item.salePrice || \"0.00\"}\n//                     </span>\n//                   </td>\n//                   <td>\n//                     {item.gstPercent ? (\n//                       <span className=\"gst-badge\">{item.gstPercent}%</span>\n//                     ) : (\n//                       \"-\"\n//                     )}\n//                   </td>\n//                   <td>\n//                     <button\n//                       className={`status-badge ${item.status === \"active\" ? \"active\" : \"inactive\"\n//                         }`}\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                     </button>\n//                   </td>\n//                   <td>\n//                     <div className=\"action-buttons\">\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={() => handleEdit(item)}\n//                         title=\"Edit\"\n//                       >\n//                         <i className=\"icon-edit\"></i>\n//                       </button>\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={async () => {\n//                           await axios.post(`${API_URL}/copy/${item._id}`);\n//                           showAlert(\"✅ Product copied\", \"success\");\n//                           fetchItems();\n//                         }}\n//                         title=\"Duplicate\"\n//                       >\n//                         <i className=\"icon-copy\"></i>\n//                       </button>\n//                       <button\n//                         className=\"btn-icon-small danger\"\n//                         onClick={() => handleDelete(item._id)}\n//                         title=\"Delete\"\n//                       >\n//                         <i className=\"icon-trash\"></i>\n//                       </button>\n//                     </div>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         </div>\n\n//         {/* Pagination */}\n//         {totalPages > 1 && (\n//           <div className=\"pagination\">\n//             <button\n//               className=\"pagination-btn\"\n//               disabled={currentPage === 1}\n//               onClick={() => setCurrentPage((p) => p - 1)}\n//             >\n//               <i className=\"icon-chevron-left\"></i> Previous\n//             </button>\n//             <div className=\"pagination-pages\">\n//               {Array.from({ length: Math.min(totalPages, 5) }, (_, i) => {\n//                 let pageNum;\n//                 if (totalPages <= 5) {\n//                   pageNum = i + 1;\n//                 } else if (currentPage <= 3) {\n//                   pageNum = i + 1;\n//                 } else if (currentPage >= totalPages - 2) {\n//                   pageNum = totalPages - 4 + i;\n//                 } else {\n//                   pageNum = currentPage - 2 + i;\n//                 }\n\n//                 if (pageNum < 1 || pageNum > totalPages) return null;\n\n//                 return (\n//                   <button\n//                     key={i}\n//                     className={`pagination-btn ${currentPage === pageNum ? \"active\" : \"\"\n//                       }`}\n//                     onClick={() => setCurrentPage(pageNum)}\n//                   >\n//                     {pageNum}\n//                   </button>\n//                 );\n//               })}\n//               {totalPages > 5 && <span className=\"pagination-dots\">...</span>}\n//             </div>\n//             <button\n//               className=\"pagination-btn\"\n//               disabled={currentPage === totalPages}\n//               onClick={() => setCurrentPage((p) => p + 1)}\n//             >\n//               Next <i className=\"icon-chevron-right\"></i>\n//             </button>\n//           </div>\n//         )}\n//       </div>\n\n//       {/* Modals */}\n//       {showCategoryModal && (\n//         <div className=\"modal-overlay\" onClick={() => setShowCategoryModal(false)}>\n//           <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\n//             <div className=\"modal-header\">\n//               <h3>Add New Category</h3>\n//               <button\n//                 className=\"btn-icon\"\n//                 onClick={() => setShowCategoryModal(false)}\n//               >\n//                 <i className=\"icon-x\"></i>\n//               </button>\n//             </div>\n//             <div className=\"modal-body\">\n//               <div className=\"form-group\">\n//                 <label>Category Name *</label>\n//                 <input\n//                   type=\"text\"\n//                   value={newCategoryName}\n//                   onChange={(e) => setNewCategoryName(e.target.value)}\n//                   className=\"form-input\"\n//                   placeholder=\"Enter category name\"\n//                   autoFocus\n//                 />\n//               </div>\n//             </div>\n//             <div className=\"modal-footer\">\n//               <button\n//                 className=\"btn btn-secondary\"\n//                 onClick={() => setShowCategoryModal(false)}\n//               >\n//                 Cancel\n//               </button>\n//               <button\n//                 className=\"btn btn-primary\"\n//                 onClick={handleAddCategory}\n//                 disabled={categoryLoading || !newCategoryName.trim()}\n//               >\n//                 {categoryLoading ? (\n//                   <>\n//                     <i className=\"icon-loader spinner\"></i>\n//                     Saving...\n//                   </>\n//                 ) : (\n//                   <>\n//                     <i className=\"icon-plus\"></i>\n//                     Add Category\n//                   </>\n//                 )}\n//               </button>\n//             </div>\n//           </div>\n//         </div>\n//       )}\n\n//       {alertBox.show && (\n//         <div className={`alert alert-${alertBox.type}`}>\n//           <div className=\"alert-content\">\n//             <i className={`alert-icon icon-${alertBox.type === \"success\" ? \"check-circle\" :\n//                 alertBox.type === \"error\" ? \"alert-circle\" :\n//                   \"info\"\n//               }`}></i>\n//             <span>{alertBox.message}</span>\n//           </div>\n//           <button\n//             className=\"alert-close\"\n//             onClick={() => setAlertBox({ ...alertBox, show: false })}\n//           >\n//             <i className=\"icon-x\"></i>\n//           </button>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n// import React, { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n// import {\n//   // Hero Icons\n//   PlusIcon,\n//   PencilIcon,\n//   TrashIcon,\n//   DocumentDuplicateIcon,\n//   MagnifyingGlassIcon,\n//   FunnelIcon,\n//   CheckIcon,\n//   XMarkIcon,\n//   ChevronLeftIcon,\n//   ChevronRightIcon,\n//   ArrowDownTrayIcon,\n//   ArrowUpTrayIcon,\n//   ClipboardDocumentIcon,\n//   CubeIcon,\n//   CheckCircleIcon,\n//   TagIcon,\n//   AdjustmentsHorizontalIcon,\n//   PhotoIcon,\n//   CogIcon,\n//   ClipboardDocumentCheckIcon,\n//   // Lucide Icons\n//   Package,\n//   Filter,\n//   Download,\n//   Upload,\n//   Copy,\n//   Image,\n//   Loader2,\n//   AlertCircle,\n//   Info,\n//   CheckSquare,\n//   Save,\n//   Edit2,\n//   Eye,\n//   EyeOff,\n//   // Tabler Icons\n//   TrendingUp,\n//   TrendingDown,\n//   Calendar,\n//   FileText,\n//   // Material Icons\n//   AttachMoney,\n//   Percent,\n//   Category,\n//   Inventory,\n//   Description,\n//   LocalOffer,\n//   PriceCheck,\n//   ContentCopy,\n//   DeleteOutline,\n//   Edit,\n//   MoreVert,\n//   CheckBox,\n//   CheckBoxOutlineBlank,\n//   CloudDownload,\n//   CloudUpload,\n//   Replay,\n//   Refresh,\n//   Visibility,\n//   VisibilityOff,\n// } from 'lucide-react';\n\n// const API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n//   const [search, setSearch] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     subcategory: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     profitLoss: \"\",\n//     gstPercent: \"\",\n//     hsnCode: \"\",\n//     taxType: \"cgst_sgst\",\n//     validTill: \"\",\n//     file: null,\n//     status: \"inactive\",\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [showForm, setShowForm] = useState(false);\n//   const [showModal, setShowModal] = useState(false);\n//   const [activeMenu, setActiveMenu] = useState(null);\n\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n\n//   const [filterCategory, setFilterCategory] = useState(\"\");\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n//   const [filterSubs, setFilterSubs] = useState([]);\n\n//   const [quickBasePrices, setQuickBasePrices] = useState({});\n//   const [quickProfitLoss, setQuickProfitLoss] = useState({});\n\n//   const [sortOrder, setSortOrder] = useState(\"\");\n//   const [showCategoryModal, setShowCategoryModal] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [categoryLoading, setCategoryLoading] = useState(false);\n//   const [alertBox, setAlertBox] = useState({\n//     show: false,\n//     message: \"\",\n//     type: \"success\",\n//   });\n\n//   useEffect(() => {\n//     if (alertBox.show) {\n//       const timer = setTimeout(() => {\n//         setAlertBox((prev) => ({ ...prev, show: false }));\n//       }, 2500);\n//       return () => clearTimeout(timer);\n//     }\n//   }, [alertBox.show]);\n\n//   useEffect(() => {\n//     fetchCategories();\n//   }, []);\n\n//   useEffect(() => {\n//     if (categories.length > 0) fetchItems();\n//   }, [categories]);\n\n//   useEffect(() => {\n//     if (!filterCategory) {\n//       setFilterSubs([]);\n//       setFilterSubcategory(\"\");\n//       return;\n//     }\n//     const cat = categories.find((c) => c._id === filterCategory);\n//     setFilterSubs(cat?.subcategories || []);\n//     setFilterSubcategory(\"\");\n//   }, [filterCategory, categories]);\n\n//   useEffect(() => {\n//     if (!form.category) {\n//       setSubcategories([]);\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//       return;\n//     }\n//     const cat = categories.find((c) => c._id === form.category);\n//     setSubcategories(cat?.subcategories || []);\n//   }, [form.category, categories]);\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data?.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error\", err);\n//       showAlert(\"Could not fetch categories\", \"error\");\n//     }\n//   };\n\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL);\n//       if (res.data?.success) {\n//         const raw = res.data.data || [];\n//         const flat = [];\n//         raw.forEach((cat) => {\n//           cat.subcategories.forEach((sub) => {\n//             sub.products.forEach((p) => {\n//               flat.push({\n//                 ...p,\n//                 category: {\n//                   _id: cat.id,\n//                   name: cat.name,\n//                   image: cat.image,\n//                 },\n//                 subcategory: {\n//                   _id: sub.id,\n//                   name: sub.name,\n//                   image: sub.image,\n//                 },\n//               });\n//             });\n//           });\n//         });\n//         flat.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n//         setItems(flat);\n//       }\n//     } catch (err) {\n//       console.error(\"Fetch items error\", err);\n//       showAlert(\"Could not fetch items\", \"error\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files?.length) {\n//       setForm((p) => ({ ...p, file: files[0] }));\n//     } else {\n//       setForm((p) => ({ ...p, [name]: value }));\n//     }\n//   };\n\n//   const showAlert = (message, type = \"success\") => {\n//     setAlertBox({ show: true, message, type });\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     const nameExists = items.some(\n//       (p) =>\n//         p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\n//         p._id !== editId\n//     );\n\n//     if (nameExists) {\n//       showAlert(\"❌ Product name already exists!\", \"error\");\n//       setLoading(false);\n//       return;\n//     }\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         showAlert(\"Name, category & base price are required\", \"error\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       fd.append(\"name\", form.name.trim());\n//       fd.append(\"category\", form.category);\n//       if (form.subcategory) {\n//         const sub = subcategories.find((s) => s._id === form.subcategory);\n//         if (sub) {\n//           fd.append(\n//             \"subcategory\",\n//             JSON.stringify({\n//               id: sub._id,\n//               name: sub.name,\n//               image: sub.image || \"\",\n//             })\n//           );\n//         }\n//       } else {\n//         fd.append(\"subcategory\", JSON.stringify(null));\n//       }\n\n//       fd.append(\"basePrice\", form.basePrice);\n//       fd.append(\"profitLoss\", form.profitLoss || 0);\n//       fd.append(\"gstPercent\", form.gstPercent || 0);\n//       fd.append(\"hsnCode\", form.hsnCode || \"\");\n//       fd.append(\"taxType\", form.taxType);\n//       if (form.description) fd.append(\"description\", form.description);\n//       if (form.validTill) fd.append(\"validTill\", form.validTill);\n//       fd.append(\"status\", form.status);\n//       if (form.file) fd.append(\"file\", form.file);\n\n//       if (editId) {\n//         await axios.put(`${API_URL}/${editId}`, fd);\n//         showAlert(\"✅ Product updated successfully\", \"success\");\n//       } else {\n//         await axios.post(API_URL, fd);\n//         showAlert(\"✅ Product added successfully\", \"success\");\n//       }\n\n//       await fetchItems();\n//       resetForm();\n//     } catch (err) {\n//       console.error(\"Save error\", err);\n//       if (err.response?.data?.message === \"Product name already exists\") {\n//         showAlert(\"❌ Product name already exists!\", \"error\");\n//       } else {\n//         showAlert(\"❌ Save failed!\", \"error\");\n//       }\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const resetForm = () => {\n//     setForm({\n//       name: \"\",\n//       category: \"\",\n//       subcategory: \"\",\n//       description: \"\",\n//       basePrice: \"\",\n//       profitLoss: \"\",\n//       validTill: \"\",\n//       file: null,\n//       status: \"inactive\",\n//     });\n//     setEditId(null);\n//     setShowModal(false);\n//     setShowForm(false);\n//   };\n\n//   const handleAddCategory = async () => {\n//     if (!newCategoryName.trim()) {\n//       showAlert(\"Category name is required\", \"error\");\n//       return;\n//     }\n\n//     try {\n//       setCategoryLoading(true);\n//       const res = await axios.post(CATEGORY_URL, {\n//         name: newCategoryName.trim(),\n//       });\n\n//       if (res.data?.success) {\n//         showAlert(\"✅ Category added successfully\", \"success\");\n//         setNewCategoryName(\"\");\n//         setShowCategoryModal(false);\n//         await fetchCategories();\n//       } else {\n//         showAlert(\"❌ Category add failed\", \"error\");\n//       }\n//     } catch (err) {\n//       console.error(\"Add category error\", err);\n//       showAlert(\"❌ Error while adding category\", \"error\");\n//     } finally {\n//       setCategoryLoading(false);\n//     }\n//   };\n\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice || \"\",\n//       profitLoss: item.profitLoss || 0,\n//       gstPercent: item.gstPercent || \"\",\n//       hsnCode: item.hsnCode || \"\",\n//       taxType: item.taxType || \"cgst_sgst\",\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//       status: item.status || \"inactive\",\n//     });\n\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n//     setEditId(item._id);\n//     setShowModal(true);\n//     setActiveMenu(null);\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete this item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       setItems((prev) => prev.filter((x) => x._id !== id));\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\n//       setActiveMenu(null);\n//       showAlert(\"✅ Product deleted successfully\", \"success\");\n//     } catch (err) {\n//       console.error(\"Delete error\", err);\n//       showAlert(\"❌ Delete failed\", \"error\");\n//     }\n//   };\n\n//   const handleStatusToggle = async (item) => {\n//     try {\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       setItems((prev) =>\n//         prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\n//       );\n//       showAlert(`✅ Status updated to ${newStatus}`, \"success\");\n//     } catch (err) {\n//       console.error(\"Status toggle error\", err);\n//       showAlert(\"❌ Status update failed\", \"error\");\n//     }\n//   };\n\n//   const updateLocalItemField = (id, key, value) => {\n//     setItems((prev) =>\n//       prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\n//     );\n//   };\n\n//   const handleBulkSave = async () => {\n//     if (!selectedItems.length) {\n//       showAlert(\"No items selected\", \"warning\");\n//       return;\n//     }\n\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         basePrice: Number(x.basePrice),\n//         profitLoss: Number(x.profitLoss),\n//         gstPercent: Number(x.gstPercent || 0),\n//         hsnCode: x.hsnCode || \"\",\n//         taxType: x.taxType || \"cgst_sgst\",\n//         status: x.status,\n//       }));\n\n//     try {\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       showAlert(\"✅ Bulk save successful\", \"success\");\n//       setBulkMode(false);\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk save error\", err);\n//       showAlert(\"❌ Bulk save failed\", \"error\");\n//     }\n//   };\n\n//   const handleBulkDelete = async () => {\n//     if (!selectedItems.length) {\n//       showAlert(\"No items selected\", \"warning\");\n//       return;\n//     }\n//     if (!window.confirm(\"Delete selected items?\")) return;\n\n//     try {\n//       await Promise.all(\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\n//       );\n//       setSelectedItems([]);\n//       fetchItems();\n//       setBulkMode(false);\n//       showAlert(\"✅ Bulk delete successful\", \"success\");\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       showAlert(\"❌ Bulk delete failed\", \"error\");\n//     }\n//   };\n\n//   const updateBasePrice = async (item) => {\n//     const newBase = Number(quickBasePrices[item._id] ?? item.basePrice);\n//     if (isNaN(newBase)) {\n//       showAlert(\"Invalid Base Price\", \"error\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       const fd = new FormData();\n//       fd.append(\"name\", item.name);\n//       fd.append(\"category\", item.category?._id);\n//       if (item.subcategory) {\n//         fd.append(\"subcategory\", JSON.stringify(item.subcategory));\n//       }\n//       fd.append(\"description\", item.description || \"\");\n//       fd.append(\"basePrice\", newBase);\n//       fd.append(\"profitLoss\", item.profitLoss);\n//       fd.append(\"status\", item.status);\n\n//       const res = await axios.put(`${API_URL}/${item._id}`, fd);\n//       if (res.data.success) {\n//         await fetchItems();\n//         setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\n//         showAlert(\"✅ Base price updated\", \"success\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       showAlert(\"❌ Update failed\", \"error\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const updateProfitLoss = async (item) => {\n//     const diff = Number(quickProfitLoss[item._id] ?? 0);\n//     if (isNaN(diff)) {\n//       showAlert(\"Invalid Profit/Loss\", \"error\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, {\n//         diff,\n//       });\n//       if (res.data.success) {\n//         await fetchItems();\n//         setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\n//         showAlert(\"✅ Profit/Loss updated\", \"success\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       showAlert(\"❌ Update failed\", \"error\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const filteredItems = items.filter((item) => {\n//     const t = search.toLowerCase();\n//     const matchText =\n//       (item.name || \"\").toLowerCase().includes(t) ||\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\n\n//     const matchCategory =\n//       !filterCategory || item.category?._id === filterCategory;\n//     const matchSub =\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\n\n//     return matchText && matchCategory && matchSub;\n//   });\n\n//   let sortedItems = [...filteredItems];\n//   if (sortOrder === \"low\") {\n//     sortedItems.sort(\n//       (a, b) => (Number(a.salePrice) || 0) - (Number(b.salePrice) || 0)\n//     );\n//   } else if (sortOrder === \"high\") {\n//     sortedItems.sort(\n//       (a, b) => (Number(b.salePrice) || 0) - (Number(a.salePrice) || 0)\n//     );\n//   }\n\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = sortedItems.slice(\n//     indexOfLast - itemsPerPage,\n//     indexOfLast\n//   );\n//   const totalPages = Math.max(1, Math.ceil(sortedItems.length / itemsPerPage));\n\n//   return (\n//     <div className=\"dashboard-container\">\n//       {/* Header */}\n//       <div className=\"dashboard-header\">\n//         <div className=\"header-content\">\n//           <h1 className=\"header-title\">Product Management</h1>\n//           <p className=\"header-subtitle\">\n//             Manage your products, categories, and inventory\n//           </p>\n//         </div>\n//         <div className=\"header-actions\">\n//           <button\n//             className=\"btn btn-primary\"\n//             onClick={() => {\n//               setShowForm(!showForm);\n//               setEditId(null);\n//             }}\n//           >\n//             <PlusIcon size={18} />\n//             {showForm ? \"Close Form\" : \"Add Product\"}\n//           </button>\n//         </div>\n//       </div>\n\n//       {/* Stats Cards */}\n//       <div className=\"stats-grid\">\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-blue\">\n//             <Package size={24} />\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">{items.length}</h3>\n//             <p className=\"stat-label\">Total Products</p>\n//           </div>\n//         </div>\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-green\">\n//             <CheckCircleIcon size={24} />\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">\n//               {items.filter((x) => x.status === \"active\").length}\n//             </h3>\n//             <p className=\"stat-label\">Active Products</p>\n//           </div>\n//         </div>\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-orange\">\n//             <Category size={24} />\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">{categories.length}</h3>\n//             <p className=\"stat-label\">Categories</p>\n//           </div>\n//         </div>\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-purple\">\n//             <Filter size={24} />\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">{filteredItems.length}</h3>\n//             <p className=\"stat-label\">Filtered Items</p>\n//           </div>\n//         </div>\n//       </div>\n\n//       {/* Search and Filters */}\n//       <div className=\"search-filters-card\">\n//         <div className=\"search-section\">\n//           <div className=\"search-box\">\n//             <MagnifyingGlassIcon size={20} className=\"search-icon\" />\n//             <input\n//               type=\"text\"\n//               placeholder=\"Search products, categories...\"\n//               value={search}\n//               onChange={(e) => {\n//                 setSearch(e.target.value);\n//                 setCurrentPage(1);\n//               }}\n//               className=\"search-input\"\n//             />\n//           </div>\n//           <div className=\"filters-row\">\n//             <div className=\"filter-group\">\n//               <label>Category</label>\n//               <select\n//                 value={filterCategory}\n//                 onChange={(e) => setFilterCategory(e.target.value)}\n//                 className=\"filter-select\"\n//               >\n//                 <option value=\"\">All Categories</option>\n//                 {categories.map((c) => (\n//                   <option key={c._id} value={c._id}>\n//                     {c.name}\n//                   </option>\n//                 ))}\n//               </select>\n//             </div>\n//             <div className=\"filter-group\">\n//               <label>Subcategory</label>\n//               <select\n//                 value={filterSubcategory}\n//                 onChange={(e) => setFilterSubcategory(e.target.value)}\n//                 disabled={!filterSubs.length}\n//                 className=\"filter-select\"\n//               >\n//                 <option value=\"\">All Subcategories</option>\n//                 {filterSubs.map((s) => (\n//                   <option key={s._id} value={s._id}>\n//                     {s.name}\n//                   </option>\n//                 ))}\n//               </select>\n//             </div>\n//             <div className=\"filter-group\">\n//               <label>Sort By</label>\n//               <select\n//                 value={sortOrder}\n//                 onChange={(e) => setSortOrder(e.target.value)}\n//                 className=\"filter-select\"\n//               >\n//                 <option value=\"\">Default</option>\n//                 <option value=\"low\">Price: Low to High</option>\n//                 <option value=\"high\">Price: High to Low</option>\n//               </select>\n//             </div>\n//             <div className=\"filter-group\">\n//               <label>Actions</label>\n//               <div className=\"action-buttons\">\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\n//                 >\n//                   <Download size={16} /> Export CSV\n//                 </button>\n//                 <label className=\"btn btn-secondary\">\n//                   <input\n//                     type=\"file\"\n//                     accept=\".csv\"\n//                     style={{ display: \"none\" }}\n//                     onChange={async (e) => {\n//                       try {\n//                         const fd = new FormData();\n//                         fd.append(\"file\", e.target.files[0]);\n//                         await axios.post(`${API_URL}/import`, fd);\n//                         showAlert(\"✅ Imported successfully\", \"success\");\n//                         fetchItems();\n//                       } catch (err) {\n//                         showAlert(\"❌ Import failed\", \"error\");\n//                       }\n//                     }}\n//                   />\n//                   <Upload size={16} /> Import CSV\n//                 </label>\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n\n//       {/* Bulk Actions */}\n//       {selectedItems.length > 0 && (\n//         <div className=\"bulk-actions-card\">\n//           <div className=\"bulk-header\">\n//             <h3>\n//               <CheckSquare size={20} />\n//               {selectedItems.length} item{selectedItems.length > 1 ? \"s\" : \"\"}{\" \"}\n//               selected\n//             </h3>\n//             <div className=\"bulk-buttons\">\n//               {!bulkMode ? (\n//                 <>\n//                   <button\n//                     className=\"btn btn-danger\"\n//                     onClick={handleBulkDelete}\n//                   >\n//                     <TrashIcon size={16} /> Bulk Delete\n//                   </button>\n//                   <button\n//                     className=\"btn btn-primary\"\n//                     onClick={() => setBulkMode(true)}\n//                   >\n//                     <Edit size={16} /> Bulk Edit\n//                   </button>\n//                 </>\n//               ) : (\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={() => setBulkMode(false)}\n//                 >\n//                   <XMarkIcon size={16} /> Cancel\n//                 </button>\n//               )}\n//             </div>\n//           </div>\n\n//           {bulkMode && (\n//             <div className=\"bulk-edit-panel\">\n//               <h4>Bulk Edit Products</h4>\n//               <div className=\"bulk-grid\">\n//                 {items\n//                   .filter((item) => selectedItems.includes(item._id))\n//                   .map((item) => (\n//                     <div key={item._id} className=\"bulk-item-card\">\n//                       <h5>{item.name}</h5>\n//                       <div className=\"bulk-fields\">\n//                         <div className=\"form-group\">\n//                           <label>Base Price</label>\n//                           <input\n//                             type=\"number\"\n//                             value={item.basePrice}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"basePrice\",\n//                                 Number(e.target.value)\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>Profit/Loss</label>\n//                           <input\n//                             type=\"number\"\n//                             value={item.profitLoss}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"profitLoss\",\n//                                 Number(e.target.value)\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>GST %</label>\n//                           <input\n//                             type=\"number\"\n//                             value={item.gstPercent || \"\"}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"gstPercent\",\n//                                 Number(e.target.value)\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>Status</label>\n//                           <select\n//                             value={item.status}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"status\",\n//                                 e.target.value\n//                               )\n//                             }\n//                             className=\"form-select\"\n//                           >\n//                             <option value=\"active\">Active</option>\n//                             <option value=\"inactive\">Inactive</option>\n//                           </select>\n//                         </div>\n//                       </div>\n//                     </div>\n//                   ))}\n//               </div>\n//               <div className=\"bulk-actions\">\n//                 <button className=\"btn btn-primary\" onClick={handleBulkSave}>\n//                   <Save size={16} /> Save All Changes\n//                 </button>\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={async () => {\n//                     if (!selectedItems.length) return;\n//                     for (let id of selectedItems)\n//                       await axios.post(`${API_URL}/copy/${id}`);\n//                     showAlert(\"✅ Selected items copied\", \"success\");\n//                     fetchItems();\n//                   }}\n//                 >\n//                   <Copy size={16} /> Copy Selected\n//                 </button>\n//               </div>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {/* Add/Edit Form */}\n//       {showForm && (\n//         <div className=\"form-card\">\n//           <div className=\"form-header\">\n//             <h3>\n//               <Edit2 size={20} />\n//               {editId ? \"Edit Product\" : \"Add New Product\"}\n//             </h3>\n//             <button className=\"btn-icon\" onClick={resetForm}>\n//               <XMarkIcon size={20} />\n//             </button>\n//           </div>\n//           <form onSubmit={handleSubmit}>\n//             <div className=\"form-grid\">\n//               <div className=\"form-group\">\n//                 <label>Product Name *</label>\n//                 <input\n//                   type=\"text\"\n//                   name=\"name\"\n//                   value={form.name}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   required\n//                   placeholder=\"Enter product name\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Category *</label>\n//                 <div className=\"input-with-button\">\n//                   <select\n//                     name=\"category\"\n//                     value={form.category}\n//                     onChange={handleChange}\n//                     className=\"form-select\"\n//                     required\n//                   >\n//                     <option value=\"\">Select Category</option>\n//                     {categories.map((c) => (\n//                       <option key={c._id} value={c._id}>\n//                         {c.name}\n//                       </option>\n//                     ))}\n//                   </select>\n//                   <button\n//                     type=\"button\"\n//                     onClick={() => setShowCategoryModal(true)}\n//                     className=\"btn-icon-primary\"\n//                   >\n//                     <PlusIcon size={18} />\n//                   </button>\n//                 </div>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Subcategory</label>\n//                 <select\n//                   name=\"subcategory\"\n//                   value={form.subcategory}\n//                   onChange={handleChange}\n//                   disabled={!subcategories.length}\n//                   className=\"form-select\"\n//                 >\n//                   <option value=\"\">Select Subcategory</option>\n//                   {subcategories.map((s) => (\n//                     <option key={s._id} value={s._id}>\n//                       {s.name}\n//                     </option>\n//                   ))}\n//                 </select>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Base Price *</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"basePrice\"\n//                   value={form.basePrice}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   required\n//                   placeholder=\"0.00\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Profit/Loss</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"profitLoss\"\n//                   value={form.profitLoss}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   placeholder=\"0\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>GST %</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"gstPercent\"\n//                   value={form.gstPercent}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   placeholder=\"18\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>HSN Code</label>\n//                 <input\n//                   type=\"text\"\n//                   name=\"hsnCode\"\n//                   value={form.hsnCode}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   placeholder=\"Enter HSN code\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Tax Type</label>\n//                 <select\n//                   name=\"taxType\"\n//                   value={form.taxType}\n//                   onChange={handleChange}\n//                   className=\"form-select\"\n//                 >\n//                   <option value=\"cgst_sgst\">CGST + SGST</option>\n//                   <option value=\"igst\">IGST</option>\n//                 </select>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Valid Till</label>\n//                 <input\n//                   type=\"date\"\n//                   name=\"validTill\"\n//                   value={form.validTill}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Status</label>\n//                 <select\n//                   name=\"status\"\n//                   value={form.status}\n//                   onChange={handleChange}\n//                   className=\"form-select\"\n//                 >\n//                   <option value=\"active\">Active</option>\n//                   <option value=\"inactive\">Inactive</option>\n//                 </select>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Image</label>\n//                 <input\n//                   type=\"file\"\n//                   accept=\"image/*\"\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                 />\n//               </div>\n//             </div>\n//             <div className=\"form-group\">\n//               <label>Description</label>\n//               <textarea\n//                 name=\"description\"\n//                 value={form.description}\n//                 onChange={handleChange}\n//                 className=\"form-textarea\"\n//                 rows=\"3\"\n//                 placeholder=\"Product description...\"\n//               ></textarea>\n//             </div>\n//             <div className=\"form-actions\">\n//               <button\n//                 type=\"submit\"\n//                 className=\"btn btn-primary\"\n//                 disabled={loading}\n//               >\n//                 {loading ? (\n//                   <>\n//                     <Loader2 size={18} className=\"spinner\" />\n//                     Saving...\n//                   </>\n//                 ) : editId ? (\n//                   <>\n//                     <Save size={16} />\n//                     Update Product\n//                   </>\n//                 ) : (\n//                   <>\n//                     <PlusIcon size={16} />\n//                     Add Product\n//                   </>\n//                 )}\n//               </button>\n//               <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\n//                 Cancel\n//               </button>\n//             </div>\n//           </form>\n//         </div>\n//       )}\n\n//       {/* Products Table */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <div>\n//             <h3>Products List</h3>\n//             <p className=\"table-subtitle\">\n//               Showing {currentItems.length} of {filteredItems.length} products\n//             </p>\n//           </div>\n//           <div className=\"table-actions\">\n//             <div className=\"table-checkbox\">\n//               <input\n//                 type=\"checkbox\"\n//                 checked={\n//                   selectedItems.length === filteredItems.length &&\n//                   filteredItems.length > 0\n//                 }\n//                 onChange={() => {\n//                   if (selectedItems.length === filteredItems.length)\n//                     setSelectedItems([]);\n//                   else setSelectedItems(filteredItems.map((x) => x._id));\n//                 }}\n//               />\n//               <span>Select All</span>\n//             </div>\n//           </div>\n//         </div>\n\n//         <div className=\"table-responsive\">\n//           <table className=\"data-table\">\n//             <thead>\n//               <tr>\n//                 <th></th>\n//                 <th>#</th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Base Price</th>\n//                 <th>Profit/Loss</th>\n//                 <th>Sale Price</th>\n//                 <th>GST</th>\n//                 <th>Status</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         setSelectedItems((prev) =>\n//                           prev.includes(item._id)\n//                             ? prev.filter((x) => x !== item._id)\n//                             : [...prev, item._id]\n//                         )\n//                       }\n//                     />\n//                   </td>\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n//                   <td>\n//                     <div className=\"table-image\">\n//                       {item.image ? (\n//                         <img src={item.image} alt={item.name} />\n//                       ) : (\n//                         <div className=\"image-placeholder\">\n//                           <Image size={20} />\n//                         </div>\n//                       )}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"product-info\">\n//                       <strong>{item.name}</strong>\n//                       {item.description && (\n//                         <small>{item.description.substring(0, 50)}...</small>\n//                       )}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"category-info\">\n//                       <span className=\"category-badge\">\n//                         {item.category?.name || \"-\"}\n//                       </span>\n//                       {item.subcategory?.name && (\n//                         <small>{item.subcategory.name}</small>\n//                       )}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"editable-field\">\n//                       <input\n//                         type=\"number\"\n//                         value={\n//                           quickBasePrices[item._id] !== undefined\n//                             ? quickBasePrices[item._id]\n//                             : item.basePrice\n//                         }\n//                         onChange={(e) =>\n//                           setQuickBasePrices((p) => ({\n//                             ...p,\n//                             [item._id]: e.target.value,\n//                           }))\n//                         }\n//                         className=\"quick-input\"\n//                       />\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={() => updateBasePrice(item)}\n//                         title=\"Save\"\n//                       >\n//                         <CheckIcon size={14} />\n//                       </button>\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"editable-field\">\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"Change\"\n//                         value={quickProfitLoss[item._id] ?? \"\"}\n//                         onChange={(e) =>\n//                           setQuickProfitLoss((p) => ({\n//                             ...p,\n//                             [item._id]: e.target.value,\n//                           }))\n//                         }\n//                         className=\"quick-input\"\n//                       />\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={() => updateProfitLoss(item)}\n//                         title=\"Save\"\n//                       >\n//                         <CheckIcon size={14} />\n//                       </button>\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <span className=\"price-badge\">\n//                       ₹{item.salePrice || \"0.00\"}\n//                     </span>\n//                   </td>\n//                   <td>\n//                     {item.gstPercent ? (\n//                       <span className=\"gst-badge\">{item.gstPercent}%</span>\n//                     ) : (\n//                       \"-\"\n//                     )}\n//                   </td>\n//                   <td>\n//                     <button\n//                       className={`status-badge ${item.status === \"active\" ? \"active\" : \"inactive\"\n//                         }`}\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? (\n//                         <>\n//                           <Eye size={12} /> Active\n//                         </>\n//                       ) : (\n//                         <>\n//                           <EyeOff size={12} /> Inactive\n//                         </>\n//                       )}\n//                     </button>\n//                   </td>\n//                   <td>\n//                     <div className=\"action-buttons\">\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={() => handleEdit(item)}\n//                         title=\"Edit\"\n//                       >\n//                         <Edit size={16} />\n//                       </button>\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={async () => {\n//                           await axios.post(`${API_URL}/copy/${item._id}`);\n//                           showAlert(\"✅ Product copied\", \"success\");\n//                           fetchItems();\n//                         }}\n//                         title=\"Duplicate\"\n//                       >\n//                         <Copy size={16} />\n//                       </button>\n//                       <button\n//                         className=\"btn-icon-small danger\"\n//                         onClick={() => handleDelete(item._id)}\n//                         title=\"Delete\"\n//                       >\n//                         <TrashIcon size={16} />\n//                       </button>\n//                     </div>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         </div>\n\n//         {/* Pagination */}\n//         {totalPages > 1 && (\n//           <div className=\"pagination\">\n//             <button\n//               className=\"pagination-btn\"\n//               disabled={currentPage === 1}\n//               onClick={() => setCurrentPage((p) => p - 1)}\n//             >\n//               <ChevronLeftIcon size={16} /> Previous\n//             </button>\n//             <div className=\"pagination-pages\">\n//               {Array.from({ length: Math.min(totalPages, 5) }, (_, i) => {\n//                 let pageNum;\n//                 if (totalPages <= 5) {\n//                   pageNum = i + 1;\n//                 } else if (currentPage <= 3) {\n//                   pageNum = i + 1;\n//                 } else if (currentPage >= totalPages - 2) {\n//                   pageNum = totalPages - 4 + i;\n//                 } else {\n//                   pageNum = currentPage - 2 + i;\n//                 }\n\n//                 if (pageNum < 1 || pageNum > totalPages) return null;\n\n//                 return (\n//                   <button\n//                     key={i}\n//                     className={`pagination-btn ${currentPage === pageNum ? \"active\" : \"\"\n//                       }`}\n//                     onClick={() => setCurrentPage(pageNum)}\n//                   >\n//                     {pageNum}\n//                   </button>\n//                 );\n//               })}\n//               {totalPages > 5 && <span className=\"pagination-dots\">...</span>}\n//             </div>\n//             <button\n//               className=\"pagination-btn\"\n//               disabled={currentPage === totalPages}\n//               onClick={() => setCurrentPage((p) => p + 1)}\n//             >\n//               Next <ChevronRightIcon size={16} />\n//             </button>\n//           </div>\n//         )}\n//       </div>\n\n//       {/* Modals */}\n//       {showCategoryModal && (\n//         <div className=\"modal-overlay\" onClick={() => setShowCategoryModal(false)}>\n//           <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\n//             <div className=\"modal-header\">\n//               <h3>Add New Category</h3>\n//               <button\n//                 className=\"btn-icon\"\n//                 onClick={() => setShowCategoryModal(false)}\n//               >\n//                 <XMarkIcon size={20} />\n//               </button>\n//             </div>\n//             <div className=\"modal-body\">\n//               <div className=\"form-group\">\n//                 <label>Category Name *</label>\n//                 <input\n//                   type=\"text\"\n//                   value={newCategoryName}\n//                   onChange={(e) => setNewCategoryName(e.target.value)}\n//                   className=\"form-input\"\n//                   placeholder=\"Enter category name\"\n//                   autoFocus\n//                 />\n//               </div>\n//             </div>\n//             <div className=\"modal-footer\">\n//               <button\n//                 className=\"btn btn-secondary\"\n//                 onClick={() => setShowCategoryModal(false)}\n//               >\n//                 Cancel\n//               </button>\n//               <button\n//                 className=\"btn btn-primary\"\n//                 onClick={handleAddCategory}\n//                 disabled={categoryLoading || !newCategoryName.trim()}\n//               >\n//                 {categoryLoading ? (\n//                   <>\n//                     <Loader2 size={16} className=\"spinner\" />\n//                     Saving...\n//                   </>\n//                 ) : (\n//                   <>\n//                     <PlusIcon size={16} />\n//                     Add Category\n//                   </>\n//                 )}\n//               </button>\n//             </div>\n//           </div>\n//         </div>\n//       )}\n\n//       {alertBox.show && (\n//         <div className={`alert alert-${alertBox.type}`}>\n//           <div className=\"alert-content\">\n//             {alertBox.type === \"success\" && <CheckCircleIcon size={20} className=\"alert-icon\" />}\n//             {alertBox.type === \"error\" && <AlertCircle size={20} className=\"alert-icon\" />}\n//             {alertBox.type === \"warning\" && <Info size={20} className=\"alert-icon\" />}\n//             <span>{alertBox.message}</span>\n//           </div>\n//           <button\n//             className=\"alert-close\"\n//             onClick={() => setAlertBox({ ...alertBox, show: false })}\n//           >\n//             <XMarkIcon size={16} />\n//           </button>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\n// import React, { useEffect, useState } from \"react\";\n// import axios from \"axios\";\n// import \"./PriceList.css\";\n// import {\n//   Plus,\n//   Edit,\n//   Trash2,\n//   Copy,\n//   Search,\n//   Filter,\n//   Check,\n//   X,\n//   ChevronLeft,\n//   ChevronRight,\n//   Download,\n//   Upload,\n//   CheckSquare,\n//   Package,\n//   CheckCircle,\n//   Tag,\n//   Image,\n//   Loader2,\n//   AlertCircle,\n//   Info,\n//   Save,\n//   Edit2,\n//   Eye,\n//   EyeOff,\n//   Calendar,\n//   Layers,\n//   Scale,\n//   FileSpreadsheet,\n//   Database,\n//   Box,\n//   ShoppingCart,\n//   TrendingUp,\n//   TrendingDown,\n//   Percent,\n//   Hash,\n//   Receipt,\n// } from 'lucide-react';\n\n// const API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\n\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n//   const [search, setSearch] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     subcategory: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     profitLoss: \"\",\n//     gstPercent: \"\",\n//     hsnCode: \"\",\n//     taxType: \"cgst_sgst\",\n//     weightValue: \"\",\n//     weightUnit: \"kg\",\n//     validTill: \"\",\n//     file: null,\n//     status: \"inactive\",\n//   });\n\n//   const [editId, setEditId] = useState(null);\n//   const [showForm, setShowForm] = useState(false);\n//   const [showModal, setShowModal] = useState(false);\n//   const [activeMenu, setActiveMenu] = useState(null);\n\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n\n//   const [filterCategory, setFilterCategory] = useState(\"\");\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n//   const [filterSubs, setFilterSubs] = useState([]);\n\n//   const [quickBasePrices, setQuickBasePrices] = useState({});\n//   const [quickProfitLoss, setQuickProfitLoss] = useState({});\n\n//   const [sortOrder, setSortOrder] = useState(\"\");\n//   const [showCategoryModal, setShowCategoryModal] = useState(false);\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\n//   const [categoryLoading, setCategoryLoading] = useState(false);\n//   const [alertBox, setAlertBox] = useState({\n//     show: false,\n//     message: \"\",\n//     type: \"success\",\n//   });\n\n//   useEffect(() => {\n//     if (alertBox.show) {\n//       const timer = setTimeout(() => {\n//         setAlertBox((prev) => ({ ...prev, show: false }));\n//       }, 2500);\n//       return () => clearTimeout(timer);\n//     }\n//   }, [alertBox.show]);\n\n//   useEffect(() => {\n//     fetchCategories();\n//   }, []);\n\n//   useEffect(() => {\n//     if (categories.length > 0) fetchItems();\n//   }, [categories]);\n\n//   useEffect(() => {\n//     if (!filterCategory) {\n//       setFilterSubs([]);\n//       setFilterSubcategory(\"\");\n//       return;\n//     }\n//     const cat = categories.find((c) => c._id === filterCategory);\n//     setFilterSubs(cat?.subcategories || []);\n//     setFilterSubcategory(\"\");\n//   }, [filterCategory, categories]);\n\n//   useEffect(() => {\n//     if (!form.category) {\n//       setSubcategories([]);\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//       return;\n//     }\n//     const cat = categories.find((c) => c._id === form.category);\n//     setSubcategories(cat?.subcategories || []);\n//   }, [form.category, categories]);\n\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data?.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error\", err);\n//       showAlert(\"Could not fetch categories\", \"error\");\n//     }\n//   };\n\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL);\n//       if (res.data?.success) {\n//         const raw = res.data.data || [];\n//         const flat = [];\n//         raw.forEach((cat) => {\n//           cat.subcategories.forEach((sub) => {\n//             sub.products.forEach((p) => {\n//               flat.push({\n//                 ...p,\n//                 category: {\n//                   _id: cat.id,\n//                   name: cat.name,\n//                   image: cat.image,\n//                 },\n//                 subcategory: {\n//                   _id: sub.id,\n//                   name: sub.name,\n//                   image: sub.image,\n//                 },\n//               });\n//             });\n//           });\n//         });\n//         flat.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n//         setItems(flat);\n//       }\n//     } catch (err) {\n//       console.error(\"Fetch items error\", err);\n//       showAlert(\"Could not fetch items\", \"error\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files?.length) {\n//       setForm((p) => ({ ...p, file: files[0] }));\n//     } else {\n//       setForm((p) => ({ ...p, [name]: value }));\n//     }\n//   };\n\n//   const showAlert = (message, type = \"success\") => {\n//     setAlertBox({ show: true, message, type });\n//   };\n\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n\n//     const nameExists = items.some(\n//       (p) =>\n//         p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\n//         p._id !== editId\n//     );\n\n//     if (nameExists) {\n//       showAlert(\"❌ Product name already exists!\", \"error\");\n//       setLoading(false);\n//       return;\n//     }\n\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         showAlert(\"Name, category & base price are required\", \"error\");\n//         setLoading(false);\n//         return;\n//       }\n\n//       const fd = new FormData();\n//       fd.append(\"name\", form.name.trim());\n//       fd.append(\"category\", form.category);\n\n//       if (form.subcategory) {\n//         const sub = subcategories.find((s) => s._id === form.subcategory);\n//         if (sub) {\n//           fd.append(\n//             \"subcategory\",\n//             JSON.stringify({\n//               id: sub._id,\n//               name: sub.name,\n//               image: sub.image || \"\"\n//             })\n//           );\n//         }\n//       } else {\n//         fd.append(\"subcategory\", JSON.stringify(null));\n//       }\n\n//       fd.append(\"basePrice\", form.basePrice);\n//       fd.append(\"profitLoss\", form.profitLoss || 0);\n\n//       const weightValue =\n//         form.weightValue && Number(form.weightValue) > 0\n//           ? Number(form.weightValue)\n//           : 1;\n\n//       fd.append(\n//         \"weight\",\n//         JSON.stringify({\n//           value: weightValue,\n//           unit: form.weightUnit || \"kg\",\n//         })\n//       );\n\n//       fd.append(\"gstPercent\", form.gstPercent || 0);\n//       fd.append(\"hsnCode\", form.hsnCode || \"\");\n//       fd.append(\"taxType\", form.taxType);\n\n//       if (form.description) fd.append(\"description\", form.description);\n//       if (form.validTill) fd.append(\"validTill\", form.validTill);\n//       fd.append(\"status\", form.status);\n//       if (form.file) fd.append(\"file\", form.file);\n\n//       if (editId) {\n//         await axios.put(`${API_URL}/${editId}`, fd);\n//         showAlert(\"✅ Product updated successfully\", \"success\");\n//       } else {\n//         await axios.post(API_URL, fd);\n//         showAlert(\"✅ Product added successfully\", \"success\");\n//       }\n\n//       await fetchItems();\n//       resetForm();\n//     } catch (err) {\n//       console.error(\"Save error\", err);\n//       if (err.response?.data?.message === \"Product name already exists\") {\n//         showAlert(\"❌ Product name already exists!\", \"error\");\n//       } else {\n//         showAlert(\"❌ Save failed!\", \"error\");\n//       }\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const resetForm = () => {\n//     setForm({\n//       name: \"\",\n//       category: \"\",\n//       subcategory: \"\",\n//       description: \"\",\n//       basePrice: \"\",\n//       profitLoss: \"\",\n//       validTill: \"\",\n//       weightValue: \"\",\n//       weightUnit: \"kg\",\n//       file: null,\n//       status: \"inactive\",\n//     });\n//     setEditId(null);\n//     setShowModal(false);\n//     setShowForm(false);\n//   };\n\n//   const handleAddCategory = async () => {\n//     if (!newCategoryName.trim()) {\n//       showAlert(\"Category name is required\", \"error\");\n//       return;\n//     }\n\n//     try {\n//       setCategoryLoading(true);\n//       const res = await axios.post(CATEGORY_URL, {\n//         name: newCategoryName.trim(),\n//       });\n\n//       if (res.data?.success) {\n//         showAlert(\"✅ Category added successfully\", \"success\");\n//         setNewCategoryName(\"\");\n//         setShowCategoryModal(false);\n//         await fetchCategories();\n//       } else {\n//         showAlert(\"❌ Category add failed\", \"error\");\n//       }\n//     } catch (err) {\n//       console.error(\"Add category error\", err);\n//       showAlert(\"❌ Error while adding category\", \"error\");\n//     } finally {\n//       setCategoryLoading(false);\n//     }\n//   };\n\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       subcategory: item.subcategory?._id || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice || \"\",\n//       profitLoss: item.profitLoss || 0,\n//       weightValue: item.weight?.value || \"\",\n//       weightUnit: item.weight?.unit || \"kg\",\n//       gstPercent: item.gstPercent || \"\",\n//       hsnCode: item.hsnCode || \"\",\n//       taxType: item.taxType || \"cgst_sgst\",\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//       status: item.status || \"inactive\",\n//     });\n\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n//     setEditId(item._id);\n//     setShowModal(true);\n//     setActiveMenu(null);\n//   };\n\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete this item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       setItems((prev) => prev.filter((x) => x._id !== id));\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\n//       setActiveMenu(null);\n//       showAlert(\"✅ Product deleted successfully\", \"success\");\n//     } catch (err) {\n//       console.error(\"Delete error\", err);\n//       showAlert(\"❌ Delete failed\", \"error\");\n//     }\n//   };\n\n//   const handleStatusToggle = async (item) => {\n//     try {\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       setItems((prev) =>\n//         prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\n//       );\n//       showAlert(`✅ Status updated to ${newStatus}`, \"success\");\n//     } catch (err) {\n//       console.error(\"Status toggle error\", err);\n//       showAlert(\"❌ Status update failed\", \"error\");\n//     }\n//   };\n\n//   const updateLocalItemField = (id, key, value) => {\n//     setItems((prev) =>\n//       prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\n//     );\n//   };\n\n//   const handleBulkSave = async () => {\n//     if (!selectedItems.length) {\n//       showAlert(\"No items selected\", \"warning\");\n//       return;\n//     }\n\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         basePrice: Number(x.basePrice),\n//         profitLoss: Number(x.profitLoss),\n//         gstPercent: Number(x.gstPercent || 0),\n//         hsnCode: x.hsnCode || \"\",\n//         taxType: x.taxType || \"cgst_sgst\",\n//         status: x.status,\n//       }));\n\n//     try {\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       showAlert(\"✅ Bulk save successful\", \"success\");\n//       setBulkMode(false);\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk save error\", err);\n//       showAlert(\"❌ Bulk save failed\", \"error\");\n//     }\n//   };\n\n//   const handleBulkDelete = async () => {\n//     if (!selectedItems.length) {\n//       showAlert(\"No items selected\", \"warning\");\n//       return;\n//     }\n//     if (!window.confirm(\"Delete selected items?\")) return;\n\n//     try {\n//       await Promise.all(\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\n//       );\n//       setSelectedItems([]);\n//       fetchItems();\n//       setBulkMode(false);\n//       showAlert(\"✅ Bulk delete successful\", \"success\");\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       showAlert(\"❌ Bulk delete failed\", \"error\");\n//     }\n//   };\n\n//   const updateBasePrice = async (item) => {\n//     const newBase = Number(quickBasePrices[item._id] ?? item.basePrice);\n//     if (isNaN(newBase)) {\n//       showAlert(\"Invalid Base Price\", \"error\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       const fd = new FormData();\n//       fd.append(\"name\", item.name);\n//       fd.append(\"category\", item.category?._id);\n\n//       if (item.subcategory) {\n//         fd.append(\"subcategory\", JSON.stringify(item.subcategory));\n//       }\n\n//       fd.append(\"description\", item.description || \"\");\n//       fd.append(\"basePrice\", newBase);\n//       fd.append(\"profitLoss\", item.profitLoss);\n//       fd.append(\"status\", item.status);\n//       fd.append(\"gstPercent\", item.gstPercent || 0);\n//       fd.append(\"hsnCode\", item.hsnCode || \"\");\n//       fd.append(\"taxType\", item.taxType || \"cgst_sgst\");\n//       fd.append(\"weight\", JSON.stringify(item.weight));\n\n//       const res = await axios.put(`${API_URL}/${item._id}`, fd);\n//       if (res.data.success) {\n//         await fetchItems();\n//         setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\n//         showAlert(\"✅ Base price updated\", \"success\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       showAlert(\"❌ Update failed\", \"error\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const updateProfitLoss = async (item) => {\n//     const diff = Number(quickProfitLoss[item._id] ?? 0);\n//     if (isNaN(diff)) {\n//       showAlert(\"Invalid Profit/Loss\", \"error\");\n//       return;\n//     }\n\n//     try {\n//       setLoading(true);\n//       const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, { diff });\n//       if (res.data.success) {\n//         await fetchItems();\n//         setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\n//         showAlert(\"✅ Profit/Loss updated\", \"success\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       showAlert(\"❌ Update failed\", \"error\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   const filteredItems = items.filter((item) => {\n//     const t = search.toLowerCase();\n//     const matchText =\n//       (item.name || \"\").toLowerCase().includes(t) ||\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\n\n//     const matchCategory =\n//       !filterCategory || item.category?._id === filterCategory;\n//     const matchSub =\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\n\n//     return matchText && matchCategory && matchSub;\n//   });\n\n//   let sortedItems = [...filteredItems];\n//   if (sortOrder === \"low\") {\n//     sortedItems.sort(\n//       (a, b) => (Number(a.salePrice) || 0) - (Number(b.salePrice) || 0)\n//     );\n//   } else if (sortOrder === \"high\") {\n//     sortedItems.sort(\n//       (a, b) => (Number(b.salePrice) || 0) - (Number(a.salePrice) || 0)\n//     );\n//   }\n\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = sortedItems.slice(\n//     indexOfLast - itemsPerPage,\n//     indexOfLast\n//   );\n//   const totalPages = Math.max(1, Math.ceil(sortedItems.length / itemsPerPage));\n\n//   return (\n//     <div className=\"dashboard-container\">\n//       {/* Header */}\n//       <div className=\"dashboard-header\">\n//         <div className=\"header-content\">\n//           <h1 className=\"header-title\">Product Management</h1>\n//           <p className=\"header-subtitle\">\n//             Manage your products, categories, and inventory\n//           </p>\n//         </div>\n//         <div className=\"header-actions\">\n//           <button\n//             className=\"btn btn-primary\"\n//             onClick={() => {\n//               setShowForm(!showForm);\n//               setEditId(null);\n//             }}\n//           >\n//             <Plus size={18} />\n//             {showForm ? \"Close Form\" : \"Add Product\"}\n//           </button>\n//         </div>\n//       </div>\n\n//       {/* Stats Cards */}\n//       <div className=\"stats-grid\">\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-blue\">\n//             <Package size={24} />\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">{items.length}</h3>\n//             <p className=\"stat-label\">Total Products</p>\n//           </div>\n//         </div>\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-green\">\n//             <CheckCircle size={24} />\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">\n//               {items.filter((x) => x.status === \"active\").length}\n//             </h3>\n//             <p className=\"stat-label\">Active Products</p>\n//           </div>\n//         </div>\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-orange\">\n//             <Layers size={24} />\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">{categories.length}</h3>\n//             <p className=\"stat-label\">Categories</p>\n//           </div>\n//         </div>\n//         <div className=\"stat-card\">\n//           <div className=\"stat-icon bg-purple\">\n//             <Database size={24} />\n//           </div>\n//           <div className=\"stat-content\">\n//             <h3 className=\"stat-value\">{filteredItems.length}</h3>\n//             <p className=\"stat-label\">Filtered Items</p>\n//           </div>\n//         </div>\n//       </div>\n\n//       {/* Search and Filters */}\n//       <div className=\"search-filters-card\">\n//         <div className=\"search-section\">\n//           <div className=\"search-box\">\n//             <Search size={20} className=\"search-icon\" />\n//             <input\n//               type=\"text\"\n//               placeholder=\"Search products, categories...\"\n//               value={search}\n//               onChange={(e) => {\n//                 setSearch(e.target.value);\n//                 setCurrentPage(1);\n//               }}\n//               className=\"search-input\"\n//             />\n//           </div>\n//           <div className=\"filters-row\">\n//             <div className=\"filter-group\">\n//               <label>Category</label>\n//               <select\n//                 value={filterCategory}\n//                 onChange={(e) => setFilterCategory(e.target.value)}\n//                 className=\"filter-select\"\n//               >\n//                 <option value=\"\">All Categories</option>\n//                 {categories.map((c) => (\n//                   <option key={c._id} value={c._id}>\n//                     {c.name}\n//                   </option>\n//                 ))}\n//               </select>\n//             </div>\n//             <div className=\"filter-group\">\n//               <label>Subcategory</label>\n//               <select\n//                 value={filterSubcategory}\n//                 onChange={(e) => setFilterSubcategory(e.target.value)}\n//                 disabled={!filterSubs.length}\n//                 className=\"filter-select\"\n//               >\n//                 <option value=\"\">All Subcategories</option>\n//                 {filterSubs.map((s) => (\n//                   <option key={s._id} value={s._id}>\n//                     {s.name}\n//                   </option>\n//                 ))}\n//               </select>\n//             </div>\n//             <div className=\"filter-group\">\n//               <label>Sort By</label>\n//               <select\n//                 value={sortOrder}\n//                 onChange={(e) => setSortOrder(e.target.value)}\n//                 className=\"filter-select\"\n//               >\n//                 <option value=\"\">Default</option>\n//                 <option value=\"low\">Price: Low to High</option>\n//                 <option value=\"high\">Price: High to Low</option>\n//               </select>\n//             </div>\n//             <div className=\"filter-group\">\n//               <label>Actions</label>\n//               <div className=\"action-buttons\">\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\n//                 >\n//                   <Download size={16} /> Export CSV\n//                 </button>\n//                 <label className=\"btn btn-secondary\">\n//                   <input\n//                     type=\"file\"\n//                     accept=\".csv\"\n//                     style={{ display: \"none\" }}\n//                     onChange={async (e) => {\n//                       try {\n//                         const fd = new FormData();\n//                         fd.append(\"file\", e.target.files[0]);\n//                         await axios.post(`${API_URL}/import`, fd);\n//                         showAlert(\"✅ Imported successfully\", \"success\");\n//                         fetchItems();\n//                       } catch (err) {\n//                         showAlert(\"❌ Import failed\", \"error\");\n//                       }\n//                     }}\n//                   />\n//                   <Upload size={16} /> Import CSV\n//                 </label>\n//               </div>\n//             </div>\n//           </div>\n//         </div>\n//       </div>\n\n//       {/* Bulk Actions */}\n//       {selectedItems.length > 0 && (\n//         <div className=\"bulk-actions-card\">\n//           <div className=\"bulk-header\">\n//             <h3>\n//               <CheckSquare size={20} />\n//               {selectedItems.length} item{selectedItems.length > 1 ? \"s\" : \"\"}{\" \"}\n//               selected\n//             </h3>\n//             <div className=\"bulk-buttons\">\n//               {!bulkMode ? (\n//                 <>\n//                   <button\n//                     className=\"btn btn-danger\"\n//                     onClick={handleBulkDelete}\n//                   >\n//                     <Trash2 size={16} /> Bulk Delete\n//                   </button>\n//                   <button\n//                     className=\"btn btn-primary\"\n//                     onClick={() => setBulkMode(true)}\n//                   >\n//                     <Edit size={16} /> Bulk Edit\n//                   </button>\n//                 </>\n//               ) : (\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={() => setBulkMode(false)}\n//                 >\n//                   <X size={16} /> Cancel\n//                 </button>\n//               )}\n//             </div>\n//           </div>\n\n//           {bulkMode && (\n//             <div className=\"bulk-edit-panel\">\n//               <h4>Bulk Edit Products</h4>\n//               <div className=\"bulk-grid\">\n//                 {items\n//                   .filter((item) => selectedItems.includes(item._id))\n//                   .map((item) => (\n//                     <div key={item._id} className=\"bulk-item-card\">\n//                       <h5>{item.name}</h5>\n//                       <div className=\"bulk-fields\">\n//                         <div className=\"form-group\">\n//                           <label>Base Price</label>\n//                           <input\n//                             type=\"number\"\n//                             value={item.basePrice}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"basePrice\",\n//                                 Number(e.target.value)\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>Profit/Loss</label>\n//                           <input\n//                             type=\"number\"\n//                             value={item.profitLoss}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"profitLoss\",\n//                                 Number(e.target.value)\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>GST %</label>\n//                           <input\n//                             type=\"number\"\n//                             value={item.gstPercent || \"\"}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"gstPercent\",\n//                                 Number(e.target.value)\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>HSN Code</label>\n//                           <input\n//                             value={item.hsnCode || \"\"}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"hsnCode\",\n//                                 e.target.value\n//                               )\n//                             }\n//                             className=\"form-input\"\n//                           />\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>Tax Type</label>\n//                           <select\n//                             value={item.taxType || \"cgst_sgst\"}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"taxType\",\n//                                 e.target.value\n//                               )\n//                             }\n//                             className=\"form-select\"\n//                           >\n//                             <option value=\"cgst_sgst\">CGST + SGST</option>\n//                             <option value=\"igst\">IGST</option>\n//                           </select>\n//                         </div>\n//                         <div className=\"form-group\">\n//                           <label>Status</label>\n//                           <select\n//                             value={item.status}\n//                             onChange={(e) =>\n//                               updateLocalItemField(\n//                                 item._id,\n//                                 \"status\",\n//                                 e.target.value\n//                               )\n//                             }\n//                             className=\"form-select\"\n//                           >\n//                             <option value=\"active\">Active</option>\n//                             <option value=\"inactive\">Inactive</option>\n//                           </select>\n//                         </div>\n//                       </div>\n//                     </div>\n//                   ))}\n//               </div>\n//               <div className=\"bulk-actions\">\n//                 <button className=\"btn btn-primary\" onClick={handleBulkSave}>\n//                   <Save size={16} /> Save All Changes\n//                 </button>\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={async () => {\n//                     if (!selectedItems.length) {\n//                       showAlert(\"No items selected\", \"warning\");\n//                       return;\n//                     }\n//                     for (let id of selectedItems)\n//                       await axios.post(`${API_URL}/copy/${id}`);\n//                     showAlert(\"✅ Selected items copied\", \"success\");\n//                     fetchItems();\n//                   }}\n//                 >\n//                   <Copy size={16} /> Copy Selected\n//                 </button>\n//                 <button\n//                   className=\"btn btn-secondary\"\n//                   onClick={async () => {\n//                     if (!selectedItems.length) {\n//                       showAlert(\"No items selected\", \"warning\");\n//                       return;\n//                     }\n//                     const res = await axios.post(\n//                       `${API_URL}/export-selected`,\n//                       { ids: selectedItems },\n//                       { responseType: \"blob\" }\n//                     );\n//                     const url = window.URL.createObjectURL(new Blob([res.data]));\n//                     const a = document.createElement(\"a\");\n//                     a.href = url;\n//                     a.download = \"selected.csv\";\n//                     a.click();\n//                   }}\n//                 >\n//                   <FileSpreadsheet size={16} /> Export Selected\n//                 </button>\n//               </div>\n//             </div>\n//           )}\n//         </div>\n//       )}\n\n//       {/* Add/Edit Form */}\n//       {showForm && (\n//         <div className=\"form-card\">\n//           <div className=\"form-header\">\n//             <h3>\n//               <Edit2 size={20} />\n//               {editId ? \"Edit Product\" : \"Add New Product\"}\n//             </h3>\n//             <button className=\"btn-icon\" onClick={resetForm}>\n//               <X size={20} />\n//             </button>\n//           </div>\n//           <form onSubmit={handleSubmit}>\n//             <div className=\"form-grid\">\n//               <div className=\"form-group\">\n//                 <label>Product Name *</label>\n//                 <input\n//                   type=\"text\"\n//                   name=\"name\"\n//                   value={form.name}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   required\n//                   placeholder=\"Enter product name\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Category *</label>\n//                 <div className=\"input-with-button\">\n//                   <select\n//                     name=\"category\"\n//                     value={form.category}\n//                     onChange={handleChange}\n//                     className=\"form-select\"\n//                     required\n//                   >\n//                     <option value=\"\">Select Category</option>\n//                     {categories.map((c) => (\n//                       <option key={c._id} value={c._id}>\n//                         {c.name}\n//                       </option>\n//                     ))}\n//                   </select>\n//                   <button\n//                     type=\"button\"\n//                     onClick={() => setShowCategoryModal(true)}\n//                     className=\"btn-icon-primary\"\n//                   >\n//                     <Plus size={18} />\n//                   </button>\n//                 </div>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Subcategory</label>\n//                 <select\n//                   name=\"subcategory\"\n//                   value={form.subcategory}\n//                   onChange={handleChange}\n//                   disabled={!subcategories.length}\n//                   className=\"form-select\"\n//                 >\n//                   <option value=\"\">Select Subcategory</option>\n//                   {subcategories.map((s) => (\n//                     <option key={s._id} value={s._id}>\n//                       {s.name}\n//                     </option>\n//                   ))}\n//                 </select>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Base Price *</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"basePrice\"\n//                   value={form.basePrice}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   required\n//                   placeholder=\"0.00\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Weight</label>\n//                 <div className=\"input-with-button\">\n//                   <input\n//                     type=\"number\"\n//                     name=\"weightValue\"\n//                     value={form.weightValue}\n//                     onChange={handleChange}\n//                     placeholder=\"Value\"\n//                     className=\"form-input\"\n//                     style={{ flex: 1 }}\n//                   />\n//                   <select\n//                     name=\"weightUnit\"\n//                     value={form.weightUnit}\n//                     onChange={handleChange}\n//                     className=\"form-select\"\n//                     style={{ width: \"100px\" }}\n//                   >\n//                     <option value=\"kg\">Kg</option>\n//                     <option value=\"gm\">Gram</option>\n//                     <option value=\"ltr\">Litre</option>\n//                     <option value=\"ml\">ML</option>\n//                     <option value=\"pcs\">Pcs</option>\n//                   </select>\n//                 </div>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Profit/Loss</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"profitLoss\"\n//                   value={form.profitLoss}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   placeholder=\"0\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>GST %</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"gstPercent\"\n//                   value={form.gstPercent}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   placeholder=\"e.g. 5, 12, 18\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>HSN Code</label>\n//                 <input\n//                   name=\"hsnCode\"\n//                   value={form.hsnCode}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                   placeholder=\"Enter HSN\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Tax Type</label>\n//                 <select\n//                   name=\"taxType\"\n//                   value={form.taxType}\n//                   onChange={handleChange}\n//                   className=\"form-select\"\n//                 >\n//                   <option value=\"cgst_sgst\">CGST + SGST</option>\n//                   <option value=\"igst\">IGST</option>\n//                 </select>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Valid Till</label>\n//                 <input\n//                   type=\"date\"\n//                   name=\"validTill\"\n//                   value={form.validTill}\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                 />\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Status</label>\n//                 <select\n//                   name=\"status\"\n//                   value={form.status}\n//                   onChange={handleChange}\n//                   className=\"form-select\"\n//                 >\n//                   <option value=\"active\">Active</option>\n//                   <option value=\"inactive\">Inactive</option>\n//                 </select>\n//               </div>\n//               <div className=\"form-group\">\n//                 <label>Image</label>\n//                 <input\n//                   type=\"file\"\n//                   accept=\"image/*\"\n//                   onChange={handleChange}\n//                   className=\"form-input\"\n//                 />\n//               </div>\n//             </div>\n//             <div className=\"form-group\">\n//               <label>Description</label>\n//               <textarea\n//                 name=\"description\"\n//                 value={form.description}\n//                 onChange={handleChange}\n//                 className=\"form-textarea\"\n//                 rows=\"3\"\n//                 placeholder=\"Product description...\"\n//               ></textarea>\n//             </div>\n//             <div className=\"form-actions\">\n//               <button\n//                 type=\"submit\"\n//                 className=\"btn btn-primary\"\n//                 disabled={loading}\n//               >\n//                 {loading ? (\n//                   <>\n//                     <Loader2 size={18} className=\"spinner\" />\n//                     Saving...\n//                   </>\n//                 ) : editId ? (\n//                   <>\n//                     <Save size={16} />\n//                     Update Product\n//                   </>\n//                 ) : (\n//                   <>\n//                     <Plus size={16} />\n//                     Add Product\n//                   </>\n//                 )}\n//               </button>\n//               <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\n//                 Cancel\n//               </button>\n//             </div>\n//           </form>\n//         </div>\n//       )}\n\n//       {/* Products Table */}\n//       <div className=\"table-card\">\n//         <div className=\"table-header\">\n//           <div>\n//             <h3>Products List</h3>\n//             <p className=\"table-subtitle\">\n//               Showing {currentItems.length} of {filteredItems.length} products\n//             </p>\n//           </div>\n//           <div className=\"table-actions\">\n//             <div className=\"table-checkbox\">\n//               <input\n//                 type=\"checkbox\"\n//                 checked={\n//                   selectedItems.length === filteredItems.length &&\n//                   filteredItems.length > 0\n//                 }\n//                 onChange={() => {\n//                   if (selectedItems.length === filteredItems.length)\n//                     setSelectedItems([]);\n//                   else setSelectedItems(filteredItems.map((x) => x._id));\n//                 }}\n//               />\n//               <span>Select All</span>\n//             </div>\n//           </div>\n//         </div>\n\n//         <div className=\"table-responsive\">\n//           <table className=\"data-table\">\n//             <thead>\n//               <tr>\n//                 <th></th>\n//                 <th>#</th>\n//                 <th>Image</th>\n//                 <th>Name</th>\n//                 <th>Category</th>\n//                 <th>Base Price</th>\n//                 <th>Weight</th>\n//                 <th>Profit/Loss</th>\n//                 <th>Sale Price</th>\n//                 <th>HSN</th>\n//                 <th>GST</th>\n//                 <th>Price Lock</th>\n//                 <th>Teji/Maddi</th>\n//                 <th>Status</th>\n//                 <th>Actions</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id}>\n//                   <td>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         setSelectedItems((prev) =>\n//                           prev.includes(item._id)\n//                             ? prev.filter((x) => x !== item._id)\n//                             : [...prev, item._id]\n//                         )\n//                       }\n//                     />\n//                   </td>\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n//                   <td>\n//                     <div className=\"table-image\">\n//                       {item.image ? (\n//                         <img src={item.image} alt={item.name} />\n//                       ) : (\n//                         <div className=\"image-placeholder\">\n//                           <Image size={20} />\n//                         </div>\n//                       )}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"product-info\">\n//                       <strong>{item.name}</strong>\n//                       {item.description && (\n//                         <small>{item.description.substring(0, 50)}...</small>\n//                       )}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"category-info\">\n//                       <span className=\"category-badge\">\n//                         {item.category?.name || \"-\"}\n//                       </span>\n//                       {item.subcategory?.name && (\n//                         <small>{item.subcategory.name}</small>\n//                       )}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"editable-field\">\n//                       <input\n//                         type=\"number\"\n//                         value={\n//                           quickBasePrices[item._id] !== undefined\n//                             ? quickBasePrices[item._id]\n//                             : item.basePrice\n//                         }\n//                         onChange={(e) =>\n//                           setQuickBasePrices((p) => ({\n//                             ...p,\n//                             [item._id]: e.target.value,\n//                           }))\n//                         }\n//                         className=\"quick-input\"\n//                       />\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={() => updateBasePrice(item)}\n//                         title=\"Save\"\n//                       >\n//                         <Check size={14} />\n//                       </button>\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"weight-info\">\n//                       <Scale size={14} style={{ marginRight: 4 }} />\n//                       {item.weight\n//                         ? `${item.weight.value} ${item.weight.unit}`\n//                         : \"1 kg\"}\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <div className=\"editable-field\">\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"Change\"\n//                         value={quickProfitLoss[item._id] ?? \"\"}\n//                         onChange={(e) =>\n//                           setQuickProfitLoss((p) => ({\n//                             ...p,\n//                             [item._id]: e.target.value,\n//                           }))\n//                         }\n//                         className=\"quick-input\"\n//                       />\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={() => updateProfitLoss(item)}\n//                         title=\"Save\"\n//                       >\n//                         <Check size={14} />\n//                       </button>\n//                     </div>\n//                   </td>\n//                   <td>\n//                     <span className=\"price-badge\">\n//                       ₹{item.salePrice || \"0.00\"}\n//                     </span>\n//                   </td>\n//                   <td>\n//                     {item.hsnCode ? (\n//                       <span className=\"hsn-badge\">{item.hsnCode}</span>\n//                     ) : (\n//                       \"-\"\n//                     )}\n//                   </td>\n//                   <td>\n//                     {item.gstPercent ? (\n//                       <span className=\"gst-badge\">{item.gstPercent}%</span>\n//                     ) : (\n//                       \"-\"\n//                     )}\n//                   </td>\n//                   <td>\n//                     <span className={`price-lock-badge ${item.lockedPrice > 0 ? \"locked\" : \"unlocked\"}`}>\n//                       ₹{item.lockedPrice || \"0\"}\n//                     </span>\n//                   </td>\n//                   <td>\n//                     {item.lockedPrice === 0 ? (\n//                       <span className=\"teji-maddi neutral\">0</span>\n//                     ) : (\n//                       (() => {\n//                         const teji = item.salePrice - item.lockedPrice;\n//                         return (\n//                           <span className={`teji-maddi ${teji >= 0 ? \"profit\" : \"loss\"}`}>\n//                             {teji >= 0 ? <TrendingUp size={12} /> : <TrendingDown size={12} />}\n//                             {Math.abs(teji)}\n//                           </span>\n//                         );\n//                       })()\n//                     )}\n//                   </td>\n//                   <td>\n//                     <button\n//                       className={`status-badge ${item.status === \"active\" ? \"active\" : \"inactive\"\n//                         }`}\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? (\n//                         <>\n//                           <Eye size={12} /> Active\n//                         </>\n//                       ) : (\n//                         <>\n//                           <EyeOff size={12} /> Inactive\n//                         </>\n//                       )}\n//                     </button>\n//                   </td>\n//                   <td>\n//                     <div className=\"action-buttons\">\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={() => handleEdit(item)}\n//                         title=\"Edit\"\n//                       >\n//                         <Edit size={16} />\n//                       </button>\n//                       <button\n//                         className=\"btn-icon-small\"\n//                         onClick={async () => {\n//                           await axios.post(`${API_URL}/copy/${item._id}`);\n//                           showAlert(\"✅ Product copied\", \"success\");\n//                           fetchItems();\n//                         }}\n//                         title=\"Duplicate\"\n//                       >\n//                         <Copy size={16} />\n//                       </button>\n//                       <button\n//                         className=\"btn-icon-small danger\"\n//                         onClick={() => handleDelete(item._id)}\n//                         title=\"Delete\"\n//                       >\n//                         <Trash2 size={16} />\n//                       </button>\n//                     </div>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         </div>\n\n//         {/* Pagination */}\n//         {totalPages > 1 && (\n//           <div className=\"pagination\">\n//             <button\n//               className=\"pagination-btn\"\n//               disabled={currentPage === 1}\n//               onClick={() => setCurrentPage((p) => p - 1)}\n//             >\n//               <ChevronLeft size={16} /> Previous\n//             </button>\n//             <div className=\"pagination-pages\">\n//               {Array.from({ length: Math.min(totalPages, 5) }, (_, i) => {\n//                 let pageNum;\n//                 if (totalPages <= 5) {\n//                   pageNum = i + 1;\n//                 } else if (currentPage <= 3) {\n//                   pageNum = i + 1;\n//                 } else if (currentPage >= totalPages - 2) {\n//                   pageNum = totalPages - 4 + i;\n//                 } else {\n//                   pageNum = currentPage - 2 + i;\n//                 }\n\n//                 if (pageNum < 1 || pageNum > totalPages) return null;\n\n//                 return (\n//                   <button\n//                     key={i}\n//                     className={`pagination-btn ${currentPage === pageNum ? \"active\" : \"\"\n//                       }`}\n//                     onClick={() => setCurrentPage(pageNum)}\n//                   >\n//                     {pageNum}\n//                   </button>\n//                 );\n//               })}\n//               {totalPages > 5 && <span className=\"pagination-dots\">...</span>}\n//             </div>\n//             <button\n//               className=\"pagination-btn\"\n//               disabled={currentPage === totalPages}\n//               onClick={() => setCurrentPage((p) => p + 1)}\n//             >\n//               Next <ChevronRight size={16} />\n//             </button>\n//           </div>\n//         )}\n//       </div>\n\n//       {/* Modals */}\n//       {showCategoryModal && (\n//         <div className=\"modal-overlay\" onClick={() => setShowCategoryModal(false)}>\n//           <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\n//             <div className=\"modal-header\">\n//               <h3>Add New Category</h3>\n//               <button\n//                 className=\"btn-icon\"\n//                 onClick={() => setShowCategoryModal(false)}\n//               >\n//                 <X size={20} />\n//               </button>\n//             </div>\n//             <div className=\"modal-body\">\n//               <div className=\"form-group\">\n//                 <label>Category Name *</label>\n//                 <input\n//                   type=\"text\"\n//                   value={newCategoryName}\n//                   onChange={(e) => setNewCategoryName(e.target.value)}\n//                   className=\"form-input\"\n//                   placeholder=\"Enter category name\"\n//                   autoFocus\n//                 />\n//               </div>\n//             </div>\n//             <div className=\"modal-footer\">\n//               <button\n//                 className=\"btn btn-secondary\"\n//                 onClick={() => setShowCategoryModal(false)}\n//               >\n//                 Cancel\n//               </button>\n//               <button\n//                 className=\"btn btn-primary\"\n//                 onClick={handleAddCategory}\n//                 disabled={categoryLoading || !newCategoryName.trim()}\n//               >\n//                 {categoryLoading ? (\n//                   <>\n//                     <Loader2 size={16} className=\"spinner\" />\n//                     Saving...\n//                   </>\n//                 ) : (\n//                   <>\n//                     <Plus size={16} />\n//                     Add Category\n//                   </>\n//                 )}\n//               </button>\n//             </div>\n//           </div>\n//         </div>\n//       )}\n\n//       {/* Edit Modal */}\n//       {showModal && (\n//         <div className=\"modal-overlay\" onClick={() => setShowModal(false)}>\n//           <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\n//             <div className=\"modal-header\">\n//               <h3>Edit Product</h3>\n//               <button\n//                 className=\"btn-icon\"\n//                 onClick={() => setShowModal(false)}\n//               >\n//                 <X size={20} />\n//               </button>\n//             </div>\n//             <div className=\"modal-body\">\n//               <form onSubmit={handleSubmit}>\n//                 <div className=\"form-grid\">\n//                   <div className=\"form-group\">\n//                     <label>Product Name *</label>\n//                     <input\n//                       type=\"text\"\n//                       name=\"name\"\n//                       value={form.name}\n//                       onChange={handleChange}\n//                       className=\"form-input\"\n//                       required\n//                     />\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>Category *</label>\n//                     <select\n//                       name=\"category\"\n//                       value={form.category}\n//                       onChange={handleChange}\n//                       className=\"form-select\"\n//                       required\n//                     >\n//                       <option value=\"\">Select Category</option>\n//                       {categories.map((c) => (\n//                         <option key={c._id} value={c._id}>\n//                           {c.name}\n//                         </option>\n//                       ))}\n//                     </select>\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>Subcategory</label>\n//                     <select\n//                       name=\"subcategory\"\n//                       value={form.subcategory}\n//                       onChange={handleChange}\n//                       disabled={!subcategories.length}\n//                       className=\"form-select\"\n//                     >\n//                       <option value=\"\">Select Subcategory</option>\n//                       {subcategories.map((s) => (\n//                         <option key={s._id} value={s._id}>\n//                           {s.name}\n//                         </option>\n//                       ))}\n//                     </select>\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>Base Price *</label>\n//                     <input\n//                       type=\"number\"\n//                       name=\"basePrice\"\n//                       value={form.basePrice}\n//                       onChange={handleChange}\n//                       className=\"form-input\"\n//                       required\n//                     />\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>Weight</label>\n//                     <div className=\"input-with-button\">\n//                       <input\n//                         type=\"number\"\n//                         name=\"weightValue\"\n//                         value={form.weightValue}\n//                         onChange={handleChange}\n//                         placeholder=\"Value\"\n//                         className=\"form-input\"\n//                         style={{ flex: 1 }}\n//                       />\n//                       <select\n//                         name=\"weightUnit\"\n//                         value={form.weightUnit}\n//                         onChange={handleChange}\n//                         className=\"form-select\"\n//                         style={{ width: \"100px\" }}\n//                       >\n//                         <option value=\"kg\">Kg</option>\n//                         <option value=\"gm\">Gram</option>\n//                         <option value=\"ltr\">Litre</option>\n//                         <option value=\"ml\">ML</option>\n//                         <option value=\"pcs\">Pcs</option>\n//                       </select>\n//                     </div>\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>Profit/Loss</label>\n//                     <input\n//                       type=\"number\"\n//                       name=\"profitLoss\"\n//                       value={form.profitLoss}\n//                       onChange={handleChange}\n//                       className=\"form-input\"\n//                     />\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>GST %</label>\n//                     <input\n//                       type=\"number\"\n//                       name=\"gstPercent\"\n//                       value={form.gstPercent}\n//                       onChange={handleChange}\n//                       className=\"form-input\"\n//                     />\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>HSN Code</label>\n//                     <input\n//                       name=\"hsnCode\"\n//                       value={form.hsnCode}\n//                       onChange={handleChange}\n//                       className=\"form-input\"\n//                     />\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>Tax Type</label>\n//                     <select\n//                       name=\"taxType\"\n//                       value={form.taxType}\n//                       onChange={handleChange}\n//                       className=\"form-select\"\n//                     >\n//                       <option value=\"cgst_sgst\">CGST + SGST</option>\n//                       <option value=\"igst\">IGST</option>\n//                     </select>\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>Valid Till</label>\n//                     <input\n//                       type=\"date\"\n//                       name=\"validTill\"\n//                       value={form.validTill}\n//                       onChange={handleChange}\n//                       className=\"form-input\"\n//                     />\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>Status</label>\n//                     <select\n//                       name=\"status\"\n//                       value={form.status}\n//                       onChange={handleChange}\n//                       className=\"form-select\"\n//                     >\n//                       <option value=\"active\">Active</option>\n//                       <option value=\"inactive\">Inactive</option>\n//                     </select>\n//                   </div>\n//                   <div className=\"form-group\">\n//                     <label>Image</label>\n//                     <input\n//                       type=\"file\"\n//                       accept=\"image/*\"\n//                       onChange={handleChange}\n//                       className=\"form-input\"\n//                     />\n//                   </div>\n//                 </div>\n//                 <div className=\"form-group\">\n//                   <label>Description</label>\n//                   <textarea\n//                     name=\"description\"\n//                     value={form.description}\n//                     onChange={handleChange}\n//                     className=\"form-textarea\"\n//                     rows=\"3\"\n//                   ></textarea>\n//                 </div>\n//                 <div className=\"form-actions\">\n//                   <button\n//                     type=\"submit\"\n//                     className=\"btn btn-primary\"\n//                     disabled={loading}\n//                   >\n//                     {loading ? (\n//                       <>\n//                         <Loader2 size={16} className=\"spinner\" />\n//                         Saving...\n//                       </>\n//                     ) : (\n//                       <>\n//                         <Save size={16} />\n//                         Update Product\n//                       </>\n//                     )}\n//                   </button>\n//                   <button\n//                     type=\"button\"\n//                     className=\"btn btn-secondary\"\n//                     onClick={() => setShowModal(false)}\n//                   >\n//                     Cancel\n//                   </button>\n//                 </div>\n//               </form>\n//             </div>\n//           </div>\n//         </div>\n//       )}\n\n//       {alertBox.show && (\n//         <div className={`alert alert-${alertBox.type}`}>\n//           <div className=\"alert-content\">\n//             {alertBox.type === \"success\" && <CheckCircle size={20} className=\"alert-icon\" />}\n//             {alertBox.type === \"error\" && <AlertCircle size={20} className=\"alert-icon\" />}\n//             {alertBox.type === \"warning\" && <Info size={20} className=\"alert-icon\" />}\n//             <span>{alertBox.message}</span>\n//           </div>\n//           <button\n//             className=\"alert-close\"\n//             onClick={() => setAlertBox({ ...alertBox, show: false })}\n//           >\n//             <X size={16} />\n//           </button>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport \"./PriceList.css\";\nimport { Plus, Edit, Trash2, Copy, Search, Filter, Check, X, ChevronLeft, ChevronRight, Download, Upload, CheckSquare, Package, CheckCircle, Tag, Image, Loader2, AlertCircle, Info, Save, Edit2, Eye, EyeOff, Calendar, Layers, Scale, FileSpreadsheet, Database, Box, ShoppingCart, TrendingUp, TrendingDown, Percent, Hash, Receipt } from 'lucide-react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\nconst CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\nexport default function PriceList() {\n  _s();\n  const [items, setItems] = useState([]);\n  const [categories, setCategories] = useState([]);\n  const [subcategories, setSubcategories] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [form, setForm] = useState({\n    name: \"\",\n    category: \"\",\n    subcategory: \"\",\n    description: \"\",\n    basePrice: \"\",\n    profitLoss: \"\",\n    gstPercent: \"\",\n    hsnCode: \"\",\n    taxType: \"cgst_sgst\",\n    weightValue: \"\",\n    weightUnit: \"kg\",\n    validTill: \"\",\n    file: null,\n    status: \"inactive\"\n  });\n  const [editId, setEditId] = useState(null);\n  const [showForm, setShowForm] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [activeMenu, setActiveMenu] = useState(null);\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [bulkMode, setBulkMode] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 30;\n  const [filterCategory, setFilterCategory] = useState(\"\");\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n  const [filterSubs, setFilterSubs] = useState([]);\n  const [quickBasePrices, setQuickBasePrices] = useState({});\n  const [quickProfitLoss, setQuickProfitLoss] = useState({});\n  const [sortOrder, setSortOrder] = useState(\"\");\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\n  const [categoryLoading, setCategoryLoading] = useState(false);\n  const [alertBox, setAlertBox] = useState({\n    show: false,\n    message: \"\",\n    type: \"success\"\n  });\n  useEffect(() => {\n    if (alertBox.show) {\n      const timer = setTimeout(() => {\n        setAlertBox(prev => ({\n          ...prev,\n          show: false\n        }));\n      }, 2500);\n      return () => clearTimeout(timer);\n    }\n  }, [alertBox.show]);\n  useEffect(() => {\n    fetchCategories();\n  }, []);\n  useEffect(() => {\n    if (categories.length > 0) fetchItems();\n  }, [categories]);\n  useEffect(() => {\n    if (!filterCategory) {\n      setFilterSubs([]);\n      setFilterSubcategory(\"\");\n      return;\n    }\n    const cat = categories.find(c => c._id === filterCategory);\n    setFilterSubs((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    setFilterSubcategory(\"\");\n  }, [filterCategory, categories]);\n  useEffect(() => {\n    if (!form.category) {\n      setSubcategories([]);\n      setForm(prev => ({\n        ...prev,\n        subcategory: \"\"\n      }));\n      return;\n    }\n    const cat = categories.find(c => c._id === form.category);\n    setSubcategories((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n  }, [form.category, categories]);\n  const fetchCategories = async () => {\n    try {\n      var _res$data;\n      const res = await axios.get(CATEGORY_URL);\n      if ((_res$data = res.data) !== null && _res$data !== void 0 && _res$data.success) setCategories(res.data.categories || []);\n    } catch (err) {\n      console.error(\"Fetch categories error\", err);\n      showAlert(\"Could not fetch categories\", \"error\");\n    }\n  };\n  const fetchItems = async () => {\n    try {\n      var _res$data2;\n      setLoading(true);\n      const res = await axios.get(API_URL);\n      if ((_res$data2 = res.data) !== null && _res$data2 !== void 0 && _res$data2.success) {\n        const raw = res.data.data || [];\n        const flat = [];\n        raw.forEach(cat => {\n          cat.subcategories.forEach(sub => {\n            sub.products.forEach(p => {\n              // Format numbers to 2 decimal places\n              const formattedProduct = {\n                ...p,\n                basePrice: p.basePrice ? parseFloat(p.basePrice).toFixed(2) : \"0.00\",\n                salePrice: p.salePrice ? parseFloat(p.salePrice).toFixed(2) : \"0.00\",\n                profitLoss: p.profitLoss ? parseFloat(p.profitLoss).toFixed(2) : \"0.00\",\n                lockedPrice: p.lockedPrice ? parseFloat(p.lockedPrice).toFixed(2) : \"0.00\",\n                gstPercent: p.gstPercent ? parseFloat(p.gstPercent).toFixed(2) : \"0.00\",\n                category: {\n                  _id: cat.id,\n                  name: cat.name,\n                  image: cat.image\n                },\n                subcategory: {\n                  _id: sub.id,\n                  name: sub.name,\n                  image: sub.image\n                }\n              };\n              flat.push(formattedProduct);\n            });\n          });\n        });\n        flat.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\n        setItems(flat);\n      }\n    } catch (err) {\n      console.error(\"Fetch items error\", err);\n      showAlert(\"Could not fetch items\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    if (files !== null && files !== void 0 && files.length) {\n      setForm(p => ({\n        ...p,\n        file: files[0]\n      }));\n    } else {\n      // Format numbers to 2 decimal places\n      if (['basePrice', 'profitLoss', 'gstPercent', 'weightValue'].includes(name)) {\n        const numValue = parseFloat(value);\n        if (!isNaN(numValue)) {\n          setForm(p => ({\n            ...p,\n            [name]: numValue.toFixed(2)\n          }));\n        } else {\n          setForm(p => ({\n            ...p,\n            [name]: value\n          }));\n        }\n      } else {\n        setForm(p => ({\n          ...p,\n          [name]: value\n        }));\n      }\n    }\n  };\n  const showAlert = (message, type = \"success\") => {\n    setAlertBox({\n      show: true,\n      message,\n      type\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    const nameExists = items.some(p => p.name.trim().toLowerCase() === form.name.trim().toLowerCase() && p._id !== editId);\n    if (nameExists) {\n      showAlert(\"❌ Product name already exists!\", \"error\");\n      setLoading(false);\n      return;\n    }\n    try {\n      if (!form.name || !form.category || !form.basePrice) {\n        showAlert(\"Name, category & base price are required\", \"error\");\n        setLoading(false);\n        return;\n      }\n      const fd = new FormData();\n      fd.append(\"name\", form.name.trim());\n      fd.append(\"category\", form.category);\n      if (form.subcategory) {\n        const sub = subcategories.find(s => s._id === form.subcategory);\n        if (sub) {\n          fd.append(\"subcategory\", JSON.stringify({\n            id: sub._id,\n            name: sub.name,\n            image: sub.image || \"\"\n          }));\n        }\n      } else {\n        fd.append(\"subcategory\", JSON.stringify(null));\n      }\n\n      // Format numbers before sending\n      const basePrice = parseFloat(form.basePrice).toFixed(2);\n      const profitLoss = parseFloat(form.profitLoss || 0).toFixed(2);\n      const gstPercent = parseFloat(form.gstPercent || 0).toFixed(2);\n      fd.append(\"basePrice\", basePrice);\n      fd.append(\"profitLoss\", profitLoss);\n      fd.append(\"gstPercent\", gstPercent);\n      const weightValue = form.weightValue && Number(form.weightValue) > 0 ? parseFloat(form.weightValue).toFixed(2) : \"1.00\";\n      fd.append(\"weight\", JSON.stringify({\n        value: weightValue,\n        unit: form.weightUnit || \"kg\"\n      }));\n      fd.append(\"hsnCode\", form.hsnCode || \"\");\n      fd.append(\"taxType\", form.taxType);\n      if (form.description) fd.append(\"description\", form.description);\n      if (form.validTill) fd.append(\"validTill\", form.validTill);\n      fd.append(\"status\", form.status);\n      if (form.file) fd.append(\"file\", form.file);\n      if (editId) {\n        await axios.put(`${API_URL}/${editId}`, fd);\n        showAlert(\"✅ Product updated successfully\", \"success\");\n      } else {\n        await axios.post(API_URL, fd);\n        showAlert(\"✅ Product added successfully\", \"success\");\n      }\n      await fetchItems();\n      resetForm();\n    } catch (err) {\n      var _err$response, _err$response$data;\n      console.error(\"Save error\", err);\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) === \"Product name already exists\") {\n        showAlert(\"❌ Product name already exists!\", \"error\");\n      } else {\n        showAlert(\"❌ Save failed!\", \"error\");\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n  const resetForm = () => {\n    setForm({\n      name: \"\",\n      category: \"\",\n      subcategory: \"\",\n      description: \"\",\n      basePrice: \"\",\n      profitLoss: \"\",\n      validTill: \"\",\n      weightValue: \"\",\n      weightUnit: \"kg\",\n      file: null,\n      status: \"inactive\"\n    });\n    setEditId(null);\n    setShowModal(false);\n    setShowForm(false);\n  };\n  const handleAddCategory = async () => {\n    if (!newCategoryName.trim()) {\n      showAlert(\"Category name is required\", \"error\");\n      return;\n    }\n    try {\n      var _res$data3;\n      setCategoryLoading(true);\n      const res = await axios.post(CATEGORY_URL, {\n        name: newCategoryName.trim()\n      });\n      if ((_res$data3 = res.data) !== null && _res$data3 !== void 0 && _res$data3.success) {\n        showAlert(\"✅ Category added successfully\", \"success\");\n        setNewCategoryName(\"\");\n        setShowCategoryModal(false);\n        await fetchCategories();\n      } else {\n        showAlert(\"❌ Category add failed\", \"error\");\n      }\n    } catch (err) {\n      console.error(\"Add category error\", err);\n      showAlert(\"❌ Error while adding category\", \"error\");\n    } finally {\n      setCategoryLoading(false);\n    }\n  };\n  const handleEdit = item => {\n    var _item$category, _item$category$_id, _item$subcategory, _item$weight, _item$weight2;\n    setForm({\n      name: item.name || \"\",\n      category: ((_item$category = item.category) === null || _item$category === void 0 ? void 0 : (_item$category$_id = _item$category._id) === null || _item$category$_id === void 0 ? void 0 : _item$category$_id.toString()) || \"\",\n      subcategory: ((_item$subcategory = item.subcategory) === null || _item$subcategory === void 0 ? void 0 : _item$subcategory._id) || \"\",\n      description: item.description || \"\",\n      basePrice: item.basePrice || \"\",\n      profitLoss: item.profitLoss || 0,\n      weightValue: ((_item$weight = item.weight) === null || _item$weight === void 0 ? void 0 : _item$weight.value) || \"\",\n      weightUnit: ((_item$weight2 = item.weight) === null || _item$weight2 === void 0 ? void 0 : _item$weight2.unit) || \"kg\",\n      gstPercent: item.gstPercent || \"\",\n      hsnCode: item.hsnCode || \"\",\n      taxType: item.taxType || \"cgst_sgst\",\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n      file: null,\n      status: item.status || \"inactive\"\n    });\n    const cat = categories.find(c => {\n      var _item$category2;\n      return c._id === ((_item$category2 = item.category) === null || _item$category2 === void 0 ? void 0 : _item$category2._id);\n    });\n    setSubcategories((cat === null || cat === void 0 ? void 0 : cat.subcategories) || []);\n    setEditId(item._id);\n    setShowModal(true);\n    setActiveMenu(null);\n  };\n  const handleDelete = async id => {\n    if (!window.confirm(\"Delete this item?\")) return;\n    try {\n      await axios.delete(`${API_URL}/${id}`);\n      setItems(prev => prev.filter(x => x._id !== id));\n      setSelectedItems(prev => prev.filter(x => x !== id));\n      setActiveMenu(null);\n      showAlert(\"✅ Product deleted successfully\", \"success\");\n    } catch (err) {\n      console.error(\"Delete error\", err);\n      showAlert(\"❌ Delete failed\", \"error\");\n    }\n  };\n  const handleStatusToggle = async item => {\n    try {\n      const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n      await axios.put(`${API_URL}/status/${item._id}`, {\n        status: newStatus\n      });\n      setItems(prev => prev.map(x => x._id === item._id ? {\n        ...x,\n        status: newStatus\n      } : x));\n      showAlert(`✅ Status updated to ${newStatus}`, \"success\");\n    } catch (err) {\n      console.error(\"Status toggle error\", err);\n      showAlert(\"❌ Status update failed\", \"error\");\n    }\n  };\n  const updateLocalItemField = (id, key, value) => {\n    setItems(prev => prev.map(x => x._id === id ? {\n      ...x,\n      [key]: value\n    } : x));\n  };\n  const handleBulkSave = async () => {\n    if (!selectedItems.length) {\n      showAlert(\"No items selected\", \"warning\");\n      return;\n    }\n    const updates = items.filter(x => selectedItems.includes(x._id)).map(x => ({\n      id: x._id,\n      basePrice: parseFloat(x.basePrice).toFixed(2),\n      profitLoss: parseFloat(x.profitLoss).toFixed(2),\n      gstPercent: parseFloat(x.gstPercent || 0).toFixed(2),\n      hsnCode: x.hsnCode || \"\",\n      taxType: x.taxType || \"cgst_sgst\",\n      status: x.status\n    }));\n    try {\n      await axios.post(`${API_URL}/bulk-update`, {\n        products: updates\n      });\n      showAlert(\"✅ Bulk save successful\", \"success\");\n      setBulkMode(false);\n      setSelectedItems([]);\n      fetchItems();\n    } catch (err) {\n      console.error(\"Bulk save error\", err);\n      showAlert(\"❌ Bulk save failed\", \"error\");\n    }\n  };\n  const handleBulkDelete = async () => {\n    if (!selectedItems.length) {\n      showAlert(\"No items selected\", \"warning\");\n      return;\n    }\n    if (!window.confirm(\"Delete selected items?\")) return;\n    try {\n      await Promise.all(selectedItems.map(id => axios.delete(`${API_URL}/${id}`)));\n      setSelectedItems([]);\n      fetchItems();\n      setBulkMode(false);\n      showAlert(\"✅ Bulk delete successful\", \"success\");\n    } catch (err) {\n      console.error(\"Bulk delete error\", err);\n      showAlert(\"❌ Bulk delete failed\", \"error\");\n    }\n  };\n  const updateBasePrice = async item => {\n    var _quickBasePrices$item;\n    const newBase = parseFloat((_quickBasePrices$item = quickBasePrices[item._id]) !== null && _quickBasePrices$item !== void 0 ? _quickBasePrices$item : item.basePrice).toFixed(2);\n    if (isNaN(newBase)) {\n      showAlert(\"Invalid Base Price\", \"error\");\n      return;\n    }\n    try {\n      var _item$category3;\n      setLoading(true);\n      const fd = new FormData();\n      fd.append(\"name\", item.name);\n      fd.append(\"category\", (_item$category3 = item.category) === null || _item$category3 === void 0 ? void 0 : _item$category3._id);\n      if (item.subcategory) {\n        fd.append(\"subcategory\", JSON.stringify(item.subcategory));\n      }\n      fd.append(\"description\", item.description || \"\");\n      fd.append(\"basePrice\", newBase);\n      fd.append(\"profitLoss\", item.profitLoss);\n      fd.append(\"status\", item.status);\n      fd.append(\"gstPercent\", item.gstPercent || 0);\n      fd.append(\"hsnCode\", item.hsnCode || \"\");\n      fd.append(\"taxType\", item.taxType || \"cgst_sgst\");\n      fd.append(\"weight\", JSON.stringify(item.weight));\n      const res = await axios.put(`${API_URL}/${item._id}`, fd);\n      if (res.data.success) {\n        await fetchItems();\n        setQuickBasePrices(p => ({\n          ...p,\n          [item._id]: undefined\n        }));\n        showAlert(\"✅ Base price updated\", \"success\");\n      }\n    } catch (err) {\n      console.error(err);\n      showAlert(\"❌ Update failed\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const updateProfitLoss = async item => {\n    var _quickProfitLoss$item;\n    const diff = parseFloat((_quickProfitLoss$item = quickProfitLoss[item._id]) !== null && _quickProfitLoss$item !== void 0 ? _quickProfitLoss$item : 0).toFixed(2);\n    if (isNaN(diff)) {\n      showAlert(\"Invalid Profit/Loss\", \"error\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, {\n        diff\n      });\n      if (res.data.success) {\n        await fetchItems();\n        setQuickProfitLoss(p => ({\n          ...p,\n          [item._id]: undefined\n        }));\n        showAlert(\"✅ Profit/Loss updated\", \"success\");\n      }\n    } catch (err) {\n      console.error(err);\n      showAlert(\"❌ Update failed\", \"error\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const filteredItems = items.filter(item => {\n    var _item$category4, _item$subcategory2, _item$category5, _item$subcategory3;\n    const t = search.toLowerCase();\n    const matchText = (item.name || \"\").toLowerCase().includes(t) || (((_item$category4 = item.category) === null || _item$category4 === void 0 ? void 0 : _item$category4.name) || \"\").toLowerCase().includes(t) || (((_item$subcategory2 = item.subcategory) === null || _item$subcategory2 === void 0 ? void 0 : _item$subcategory2.name) || \"\").toLowerCase().includes(t);\n    const matchCategory = !filterCategory || ((_item$category5 = item.category) === null || _item$category5 === void 0 ? void 0 : _item$category5._id) === filterCategory;\n    const matchSub = !filterSubcategory || ((_item$subcategory3 = item.subcategory) === null || _item$subcategory3 === void 0 ? void 0 : _item$subcategory3._id) === filterSubcategory;\n    return matchText && matchCategory && matchSub;\n  });\n  let sortedItems = [...filteredItems];\n  if (sortOrder === \"low\") {\n    sortedItems.sort((a, b) => (parseFloat(a.salePrice) || 0) - (parseFloat(b.salePrice) || 0));\n  } else if (sortOrder === \"high\") {\n    sortedItems.sort((a, b) => (parseFloat(b.salePrice) || 0) - (parseFloat(a.salePrice) || 0));\n  }\n  const indexOfLast = currentPage * itemsPerPage;\n  const currentItems = sortedItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n  const totalPages = Math.max(1, Math.ceil(sortedItems.length / itemsPerPage));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"header-title\",\n          children: \"Product Management\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4965,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"header-subtitle\",\n          children: \"Manage your products, categories, and inventory\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4966,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4964,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary\",\n          onClick: () => {\n            setShowForm(!showForm);\n            setEditId(null);\n            resetForm();\n          },\n          children: [/*#__PURE__*/_jsxDEV(Plus, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4979,\n            columnNumber: 13\n          }, this), showForm ? \"Close Form\" : \"Add Product\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4971,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 4970,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 4963,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"stats-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-icon bg-blue\",\n          children: /*#__PURE__*/_jsxDEV(Package, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4989,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4988,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"stat-value\",\n            children: items.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4992,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"stat-label\",\n            children: \"Total Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4993,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 4991,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4987,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-icon bg-green\",\n          children: /*#__PURE__*/_jsxDEV(CheckCircle, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 4998,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 4997,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"stat-value\",\n            children: items.filter(x => x.status === \"active\").length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5001,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"stat-label\",\n            children: \"Active Products\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5004,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5000,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 4996,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-icon bg-orange\",\n          children: /*#__PURE__*/_jsxDEV(Layers, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5009,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5008,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"stat-value\",\n            children: categories.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5012,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"stat-label\",\n            children: \"Categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5013,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5011,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5007,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"stat-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-icon bg-purple\",\n          children: /*#__PURE__*/_jsxDEV(Database, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5018,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5017,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"stat-content\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"stat-value\",\n            children: filteredItems.length\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5021,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"stat-label\",\n            children: \"Filtered Items\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5022,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5020,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5016,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 4986,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-filters-card\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-box\",\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            size: 20,\n            className: \"search-icon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5031,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search products, categories...\",\n            value: search,\n            onChange: e => {\n              setSearch(e.target.value);\n              setCurrentPage(1);\n            },\n            className: \"search-input\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5032,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5030,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"filters-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5045,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: filterCategory,\n              onChange: e => setFilterCategory(e.target.value),\n              className: \"filter-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"All Categories\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5051,\n                columnNumber: 17\n              }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: c._id,\n                children: c.name\n              }, c._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5053,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5046,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5044,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5060,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: filterSubcategory,\n              onChange: e => setFilterSubcategory(e.target.value),\n              disabled: !filterSubs.length,\n              className: \"filter-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"All Subcategories\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5067,\n                columnNumber: 17\n              }, this), filterSubs.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: s._id,\n                children: s.name\n              }, s._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5069,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5061,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5059,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Sort By\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5076,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              value: sortOrder,\n              onChange: e => setSortOrder(e.target.value),\n              className: \"filter-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Default\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5082,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"low\",\n                children: \"Price: Low to High\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5083,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"high\",\n                children: \"Price: High to Low\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5084,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5077,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5075,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"filter-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5088,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"action-buttons\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-secondary\",\n                onClick: () => window.open(`${API_URL}/export`, \"_blank\"),\n                children: [/*#__PURE__*/_jsxDEV(Download, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5094,\n                  columnNumber: 19\n                }, this), \" Export CSV\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5090,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"btn btn-secondary\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \".csv\",\n                  style: {\n                    display: \"none\"\n                  },\n                  onChange: async e => {\n                    try {\n                      const fd = new FormData();\n                      fd.append(\"file\", e.target.files[0]);\n                      await axios.post(`${API_URL}/import`, fd);\n                      showAlert(\"✅ Imported successfully\", \"success\");\n                      fetchItems();\n                    } catch (err) {\n                      showAlert(\"❌ Import failed\", \"error\");\n                    }\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5097,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Upload, {\n                  size: 16\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5113,\n                  columnNumber: 19\n                }, this), \" Import CSV\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5096,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5089,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5087,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5043,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5029,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 5028,\n      columnNumber: 7\n    }, this), selectedItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bulk-actions-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bulk-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [/*#__PURE__*/_jsxDEV(CheckSquare, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5126,\n            columnNumber: 15\n          }, this), selectedItems.length, \" item\", selectedItems.length > 1 ? \"s\" : \"\", \" \", \"selected\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5125,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bulk-buttons\",\n          children: !bulkMode ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-danger\",\n              onClick: handleBulkDelete,\n              children: [/*#__PURE__*/_jsxDEV(Trash2, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5137,\n                columnNumber: 21\n              }, this), \" Bulk Delete\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5133,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-primary\",\n              onClick: () => setBulkMode(true),\n              children: [/*#__PURE__*/_jsxDEV(Edit, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5143,\n                columnNumber: 21\n              }, this), \" Bulk Edit\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5139,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: () => setBulkMode(false),\n            children: [/*#__PURE__*/_jsxDEV(X, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5151,\n              columnNumber: 19\n            }, this), \" Cancel\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5147,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5130,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5124,\n        columnNumber: 11\n      }, this), bulkMode && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bulk-edit-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Bulk Edit Products\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5159,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bulk-grid\",\n          children: items.filter(item => selectedItems.includes(item._id)).map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bulk-item-card\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              children: item.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5165,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bulk-fields\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Base Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5168,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.01\",\n                  value: item.basePrice,\n                  onChange: e => updateLocalItemField(item._id, \"basePrice\", parseFloat(e.target.value).toFixed(2)),\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5169,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5167,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Profit/Loss\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5184,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.01\",\n                  value: item.profitLoss,\n                  onChange: e => updateLocalItemField(item._id, \"profitLoss\", parseFloat(e.target.value).toFixed(2)),\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5185,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5183,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"GST %\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5200,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.01\",\n                  value: item.gstPercent || \"\",\n                  onChange: e => updateLocalItemField(item._id, \"gstPercent\", parseFloat(e.target.value).toFixed(2)),\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5201,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5199,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"HSN Code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5216,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: item.hsnCode || \"\",\n                  onChange: e => updateLocalItemField(item._id, \"hsnCode\", e.target.value),\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5217,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5215,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Tax Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5230,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: item.taxType || \"cgst_sgst\",\n                  onChange: e => updateLocalItemField(item._id, \"taxType\", e.target.value),\n                  className: \"form-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"cgst_sgst\",\n                    children: \"CGST + SGST\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5242,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"igst\",\n                    children: \"IGST\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5243,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5231,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5229,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5247,\n                  columnNumber: 27\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  value: item.status,\n                  onChange: e => updateLocalItemField(item._id, \"status\", e.target.value),\n                  className: \"form-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"active\",\n                    children: \"Active\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5259,\n                    columnNumber: 29\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"inactive\",\n                    children: \"Inactive\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5260,\n                    columnNumber: 29\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5248,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5246,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5166,\n              columnNumber: 23\n            }, this)]\n          }, item._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5164,\n            columnNumber: 21\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5160,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bulk-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: handleBulkSave,\n            children: [/*#__PURE__*/_jsxDEV(Save, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5269,\n              columnNumber: 19\n            }, this), \" Save All Changes\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5268,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: async () => {\n              if (!selectedItems.length) {\n                showAlert(\"No items selected\", \"warning\");\n                return;\n              }\n              for (let id of selectedItems) await axios.post(`${API_URL}/copy/${id}`);\n              showAlert(\"✅ Selected items copied\", \"success\");\n              fetchItems();\n            },\n            children: [/*#__PURE__*/_jsxDEV(Copy, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5284,\n              columnNumber: 19\n            }, this), \" Copy Selected\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5271,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: async () => {\n              if (!selectedItems.length) {\n                showAlert(\"No items selected\", \"warning\");\n                return;\n              }\n              const res = await axios.post(`${API_URL}/export-selected`, {\n                ids: selectedItems\n              }, {\n                responseType: \"blob\"\n              });\n              const url = window.URL.createObjectURL(new Blob([res.data]));\n              const a = document.createElement(\"a\");\n              a.href = url;\n              a.download = \"selected.csv\";\n              a.click();\n            },\n            children: [/*#__PURE__*/_jsxDEV(FileSpreadsheet, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5305,\n              columnNumber: 19\n            }, this), \" Export Selected\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5286,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5267,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5158,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 5123,\n      columnNumber: 9\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [/*#__PURE__*/_jsxDEV(Edit2, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5318,\n            columnNumber: 15\n          }, this), editId ? \"Edit Product\" : \"Add New Product\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5317,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn-icon\",\n          onClick: resetForm,\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5322,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5321,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5316,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Product Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5328,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"name\",\n              value: form.name,\n              onChange: handleChange,\n              className: \"form-input\",\n              required: true,\n              placeholder: \"Enter product name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5329,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5327,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Category *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5340,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-with-button\",\n              children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"category\",\n                value: form.category,\n                onChange: handleChange,\n                className: \"form-select\",\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  children: \"Select Category\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5349,\n                  columnNumber: 21\n                }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: c._id,\n                  children: c.name\n                }, c._id, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5351,\n                  columnNumber: 23\n                }, this))]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5342,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: () => setShowCategoryModal(true),\n                className: \"btn-icon-primary\",\n                style: {\n                  background: 'var(--primary)',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '8px',\n                  padding: '8px',\n                  cursor: 'pointer'\n                },\n                children: /*#__PURE__*/_jsxDEV(Plus, {\n                  size: 18\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5362,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5356,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5341,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5339,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Subcategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5367,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"subcategory\",\n              value: form.subcategory,\n              onChange: handleChange,\n              disabled: !subcategories.length,\n              className: \"form-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select Subcategory\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5375,\n                columnNumber: 19\n              }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: s._id,\n                children: s.name\n              }, s._id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5377,\n                columnNumber: 21\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5368,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5366,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Base Price *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5384,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.01\",\n              name: \"basePrice\",\n              value: form.basePrice,\n              onChange: handleChange,\n              className: \"form-input\",\n              required: true,\n              placeholder: \"0.00\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5385,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5383,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Weight\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5397,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-with-button\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                step: \"0.01\",\n                name: \"weightValue\",\n                value: form.weightValue,\n                onChange: handleChange,\n                placeholder: \"Value\",\n                className: \"form-input\",\n                style: {\n                  flex: 1\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5399,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                name: \"weightUnit\",\n                value: form.weightUnit,\n                onChange: handleChange,\n                className: \"form-select\",\n                style: {\n                  width: \"100px\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"kg\",\n                  children: \"Kg\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5416,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"gm\",\n                  children: \"Gram\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5417,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"ltr\",\n                  children: \"Litre\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5418,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"ml\",\n                  children: \"ML\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5419,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"pcs\",\n                  children: \"Pcs\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5420,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5409,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5398,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5396,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Profit/Loss\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5425,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.01\",\n              name: \"profitLoss\",\n              value: form.profitLoss,\n              onChange: handleChange,\n              className: \"form-input\",\n              placeholder: \"0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5426,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5424,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"GST %\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5437,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"number\",\n              step: \"0.01\",\n              name: \"gstPercent\",\n              value: form.gstPercent,\n              onChange: handleChange,\n              className: \"form-input\",\n              placeholder: \"e.g. 5, 12, 18\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5438,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5436,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"HSN Code\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5449,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"hsnCode\",\n              value: form.hsnCode,\n              onChange: handleChange,\n              className: \"form-input\",\n              placeholder: \"Enter HSN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5450,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5448,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Tax Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5459,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"taxType\",\n              value: form.taxType,\n              onChange: handleChange,\n              className: \"form-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"cgst_sgst\",\n                children: \"CGST + SGST\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5466,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"igst\",\n                children: \"IGST\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5467,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5460,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5458,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Valid Till\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5471,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              name: \"validTill\",\n              value: form.validTill,\n              onChange: handleChange,\n              className: \"form-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5472,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5470,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Status\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5481,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"status\",\n              value: form.status,\n              onChange: handleChange,\n              className: \"form-select\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"active\",\n                children: \"Active\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5488,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"inactive\",\n                children: \"Inactive\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5489,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5482,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5480,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5493,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              accept: \"image/*\",\n              onChange: handleChange,\n              className: \"form-input\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5494,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5492,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5326,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5503,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"description\",\n            value: form.description,\n            onChange: handleChange,\n            className: \"form-textarea\",\n            rows: \"3\",\n            placeholder: \"Product description...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5504,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5502,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary\",\n            disabled: loading,\n            children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                size: 18,\n                className: \"spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5521,\n                columnNumber: 21\n              }, this), \"Saving...\"]\n            }, void 0, true) : editId ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Save, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5526,\n                columnNumber: 21\n              }, this), \"Update Product\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Plus, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5531,\n                columnNumber: 21\n              }, this), \"Add Product\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5514,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-secondary\",\n            onClick: resetForm,\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5536,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5513,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5325,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 5315,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Products List\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5548,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"table-subtitle\",\n            children: [\"Showing \", currentItems.length, \" of \", filteredItems.length, \" products\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5549,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5547,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-actions\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"table-checkbox\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: selectedItems.length === filteredItems.length && filteredItems.length > 0,\n              onChange: () => {\n                if (selectedItems.length === filteredItems.length) setSelectedItems([]);else setSelectedItems(filteredItems.map(x => x._id));\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5555,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Select All\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5567,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5554,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5553,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5546,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"table-responsive\",\n        children: /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"data-table\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5576,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"#\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5577,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Image\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5578,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5579,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Category\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5580,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Base Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5581,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Weight\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5582,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Profit/Loss\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5583,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Sale Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5584,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"HSN\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5585,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"GST\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5586,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Price Lock\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5587,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Teji/Maddi\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5588,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Status\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5589,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"Actions\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5590,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5575,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5574,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: currentItems.map((item, i) => {\n              var _item$category6, _item$subcategory4, _quickProfitLoss$item2;\n              return /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"checkbox\",\n                    checked: selectedItems.includes(item._id),\n                    onChange: () => setSelectedItems(prev => prev.includes(item._id) ? prev.filter(x => x !== item._id) : [...prev, item._id])\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5597,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5596,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: (currentPage - 1) * itemsPerPage + (i + 1)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5609,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"table-image\",\n                    children: item.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: item.image,\n                      alt: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5613,\n                      columnNumber: 25\n                    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"image-placeholder\",\n                      children: /*#__PURE__*/_jsxDEV(Image, {\n                        size: 20\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5616,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5615,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5611,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5610,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"product-info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                      children: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5623,\n                      columnNumber: 23\n                    }, this), item.description && /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: [item.description.substring(0, 50), \"...\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5625,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5622,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5621,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"category-info\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"category-badge\",\n                      children: ((_item$category6 = item.category) === null || _item$category6 === void 0 ? void 0 : _item$category6.name) || \"-\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5631,\n                      columnNumber: 23\n                    }, this), ((_item$subcategory4 = item.subcategory) === null || _item$subcategory4 === void 0 ? void 0 : _item$subcategory4.name) && /*#__PURE__*/_jsxDEV(\"small\", {\n                      children: item.subcategory.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5635,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5630,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5629,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"editable-field\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      step: \"0.01\",\n                      value: quickBasePrices[item._id] !== undefined ? quickBasePrices[item._id] : item.basePrice,\n                      onChange: e => setQuickBasePrices(p => ({\n                        ...p,\n                        [item._id]: e.target.value\n                      })),\n                      className: \"quick-input\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5641,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-icon-small\",\n                      onClick: () => updateBasePrice(item),\n                      title: \"Save\",\n                      children: /*#__PURE__*/_jsxDEV(Check, {\n                        size: 14\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5662,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5657,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5640,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5639,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"weight-info\",\n                    children: [/*#__PURE__*/_jsxDEV(Scale, {\n                      size: 14,\n                      style: {\n                        marginRight: 4\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5668,\n                      columnNumber: 23\n                    }, this), item.weight ? `${parseFloat(item.weight.value).toFixed(2)} ${item.weight.unit}` : \"1.00 kg\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5667,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5666,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"editable-field\",\n                    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"number\",\n                      step: \"0.01\",\n                      placeholder: \"Change\",\n                      value: (_quickProfitLoss$item2 = quickProfitLoss[item._id]) !== null && _quickProfitLoss$item2 !== void 0 ? _quickProfitLoss$item2 : \"\",\n                      onChange: e => setQuickProfitLoss(p => ({\n                        ...p,\n                        [item._id]: e.target.value\n                      })),\n                      className: \"quick-input\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5676,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-icon-small\",\n                      onClick: () => updateProfitLoss(item),\n                      title: \"Save\",\n                      children: /*#__PURE__*/_jsxDEV(Check, {\n                        size: 14\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5694,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5689,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5675,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5674,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"price-badge\",\n                    children: [\"\\u20B9\", parseFloat(item.salePrice || \"0\").toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5699,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5698,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.hsnCode ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"hsn-badge\",\n                    children: item.hsnCode\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5705,\n                    columnNumber: 23\n                  }, this) : \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5703,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.gstPercent ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"gst-badge\",\n                    children: [parseFloat(item.gstPercent).toFixed(2), \"%\"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5712,\n                    columnNumber: 23\n                  }, this) : \"-\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5710,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: `price-lock-badge ${item.lockedPrice > 0 ? \"locked\" : \"unlocked\"}`,\n                    children: [\"\\u20B9\", parseFloat(item.lockedPrice || \"0\").toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5718,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5717,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: item.lockedPrice === 0 || parseFloat(item.lockedPrice) === 0 ? /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"teji-maddi neutral\",\n                    children: \"0.00\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5724,\n                    columnNumber: 23\n                  }, this) : (() => {\n                    const teji = parseFloat(item.salePrice) - parseFloat(item.lockedPrice);\n                    return /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: `teji-maddi ${teji >= 0 ? \"profit\" : \"loss\"}`,\n                      children: [teji >= 0 ? /*#__PURE__*/_jsxDEV(TrendingUp, {\n                        size: 12\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5730,\n                        columnNumber: 42\n                      }, this) : /*#__PURE__*/_jsxDEV(TrendingDown, {\n                        size: 12\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5730,\n                        columnNumber: 69\n                      }, this), Math.abs(teji).toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5729,\n                      columnNumber: 27\n                    }, this);\n                  })()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5722,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: `status-badge ${item.status === \"active\" ? \"active\" : \"inactive\"}`,\n                    onClick: () => handleStatusToggle(item),\n                    children: item.status === \"active\" ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(Eye, {\n                        size: 12\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5745,\n                        columnNumber: 27\n                      }, this), \" Active\"]\n                    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(EyeOff, {\n                        size: 12\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5749,\n                        columnNumber: 27\n                      }, this), \" Inactive\"]\n                    }, void 0, true)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5738,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5737,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"action-buttons\",\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-icon-small\",\n                      onClick: () => handleEdit(item),\n                      title: \"Edit\",\n                      children: /*#__PURE__*/_jsxDEV(Edit, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5761,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5756,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-icon-small\",\n                      onClick: async () => {\n                        await axios.post(`${API_URL}/copy/${item._id}`);\n                        showAlert(\"✅ Product copied\", \"success\");\n                        fetchItems();\n                      },\n                      title: \"Duplicate\",\n                      children: /*#__PURE__*/_jsxDEV(Copy, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5772,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5763,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn-icon-small danger\",\n                      onClick: () => handleDelete(item._id),\n                      title: \"Delete\",\n                      children: /*#__PURE__*/_jsxDEV(Trash2, {\n                        size: 16\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 5779,\n                        columnNumber: 25\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5774,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5755,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5754,\n                  columnNumber: 19\n                }, this)]\n              }, item._id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5595,\n                columnNumber: 17\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5593,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5573,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 5572,\n        columnNumber: 9\n      }, this), totalPages > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagination\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"pagination-btn\",\n          disabled: currentPage === 1,\n          onClick: () => setCurrentPage(p => p - 1),\n          children: [/*#__PURE__*/_jsxDEV(ChevronLeft, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5797,\n            columnNumber: 15\n          }, this), \" Previous\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5792,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pagination-pages\",\n          children: [Array.from({\n            length: Math.min(totalPages, 5)\n          }, (_, i) => {\n            let pageNum;\n            if (totalPages <= 5) {\n              pageNum = i + 1;\n            } else if (currentPage <= 3) {\n              pageNum = i + 1;\n            } else if (currentPage >= totalPages - 2) {\n              pageNum = totalPages - 4 + i;\n            } else {\n              pageNum = currentPage - 2 + i;\n            }\n            if (pageNum < 1 || pageNum > totalPages) return null;\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              className: `pagination-btn ${currentPage === pageNum ? \"active\" : \"\"}`,\n              onClick: () => setCurrentPage(pageNum),\n              children: pageNum\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5815,\n              columnNumber: 19\n            }, this);\n          }), totalPages > 5 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pagination-dots\",\n            children: \"...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5825,\n            columnNumber: 34\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5799,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"pagination-btn\",\n          disabled: currentPage === totalPages,\n          onClick: () => setCurrentPage(p => p + 1),\n          children: [\"Next \", /*#__PURE__*/_jsxDEV(ChevronRight, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5832,\n            columnNumber: 20\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5827,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5791,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 5545,\n      columnNumber: 7\n    }, this), showCategoryModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setShowCategoryModal(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Add New Category\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5843,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-icon\",\n            onClick: () => setShowCategoryModal(false),\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5848,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5844,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5842,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Category Name *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5853,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: newCategoryName,\n              onChange: e => setNewCategoryName(e.target.value),\n              className: \"form-input\",\n              placeholder: \"Enter category name\",\n              autoFocus: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5854,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5852,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5851,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary\",\n            onClick: () => setShowCategoryModal(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5865,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: handleAddCategory,\n            disabled: categoryLoading || !newCategoryName.trim(),\n            children: categoryLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                size: 16,\n                className: \"spinner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5878,\n                columnNumber: 21\n              }, this), \"Saving...\"]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Plus, {\n                size: 16\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 5883,\n                columnNumber: 21\n              }, this), \"Add Category\"]\n            }, void 0, true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5871,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5864,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5841,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 5840,\n      columnNumber: 9\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      onClick: () => setShowModal(false),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal\",\n        onClick: e => e.stopPropagation(),\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [/*#__PURE__*/_jsxDEV(Edit2, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5899,\n              columnNumber: 17\n            }, this), \"Edit Product\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5898,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-icon\",\n            onClick: () => setShowModal(false),\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 5906,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 5902,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 5897,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-grid\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Product Name *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5913,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"name\",\n                  value: form.name,\n                  onChange: handleChange,\n                  className: \"form-input\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5914,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5912,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Category *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5924,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"category\",\n                  value: form.category,\n                  onChange: handleChange,\n                  className: \"form-select\",\n                  required: true,\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select Category\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5932,\n                    columnNumber: 23\n                  }, this), categories.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: c._id,\n                    children: c.name\n                  }, c._id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5934,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5925,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5923,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Subcategory\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5941,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"subcategory\",\n                  value: form.subcategory,\n                  onChange: handleChange,\n                  disabled: !subcategories.length,\n                  className: \"form-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"\",\n                    children: \"Select Subcategory\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5949,\n                    columnNumber: 23\n                  }, this), subcategories.map(s => /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: s._id,\n                    children: s.name\n                  }, s._id, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5951,\n                    columnNumber: 25\n                  }, this))]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5942,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5940,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Base Price *\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5958,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.01\",\n                  name: \"basePrice\",\n                  value: form.basePrice,\n                  onChange: handleChange,\n                  className: \"form-input\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5959,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5957,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Weight\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5970,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"input-with-button\",\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"number\",\n                    step: \"0.01\",\n                    name: \"weightValue\",\n                    value: form.weightValue,\n                    onChange: handleChange,\n                    placeholder: \"Value\",\n                    className: \"form-input\",\n                    style: {\n                      flex: 1\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5972,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                    name: \"weightUnit\",\n                    value: form.weightUnit,\n                    onChange: handleChange,\n                    className: \"form-select\",\n                    style: {\n                      width: \"100px\"\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"kg\",\n                      children: \"Kg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5989,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"gm\",\n                      children: \"Gram\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5990,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"ltr\",\n                      children: \"Litre\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5991,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"ml\",\n                      children: \"ML\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5992,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"pcs\",\n                      children: \"Pcs\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 5993,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 5982,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5971,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5969,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Profit/Loss\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5998,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.01\",\n                  name: \"profitLoss\",\n                  value: form.profitLoss,\n                  onChange: handleChange,\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 5999,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 5997,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"GST %\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6009,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  step: \"0.01\",\n                  name: \"gstPercent\",\n                  value: form.gstPercent,\n                  onChange: handleChange,\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6010,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 6008,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"HSN Code\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6020,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  name: \"hsnCode\",\n                  value: form.hsnCode,\n                  onChange: handleChange,\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6021,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 6019,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Tax Type\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6029,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"taxType\",\n                  value: form.taxType,\n                  onChange: handleChange,\n                  className: \"form-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"cgst_sgst\",\n                    children: \"CGST + SGST\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 6036,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"igst\",\n                    children: \"IGST\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 6037,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6030,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 6028,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Valid Till\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6041,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"date\",\n                  name: \"validTill\",\n                  value: form.validTill,\n                  onChange: handleChange,\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6042,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 6040,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Status\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6051,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                  name: \"status\",\n                  value: form.status,\n                  onChange: handleChange,\n                  className: \"form-select\",\n                  children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"active\",\n                    children: \"Active\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 6058,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: \"inactive\",\n                    children: \"Inactive\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 6059,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6052,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 6050,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"form-group\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  children: \"Image\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6063,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"file\",\n                  accept: \"image/*\",\n                  onChange: handleChange,\n                  className: \"form-input\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 6064,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 6062,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 5911,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"Description\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 6073,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n                name: \"description\",\n                value: form.description,\n                onChange: handleChange,\n                className: \"form-textarea\",\n                rows: \"3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 6074,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 6072,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-actions\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary\",\n                disabled: loading,\n                children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Loader2, {\n                    size: 16,\n                    className: \"spinner\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 6090,\n                    columnNumber: 25\n                  }, this), \"Saving...\"]\n                }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(Save, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 6095,\n                    columnNumber: 25\n                  }, this), \"Update Product\"]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 6083,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"btn btn-secondary\",\n                onClick: () => setShowModal(false),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 6100,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 6082,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 5910,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 5909,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 5896,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 5895,\n      columnNumber: 9\n    }, this), alertBox.show && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `alert alert-${alertBox.type}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert-content\",\n        children: [alertBox.type === \"success\" && /*#__PURE__*/_jsxDEV(CheckCircle, {\n          size: 20,\n          className: \"alert-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 6118,\n          columnNumber: 45\n        }, this), alertBox.type === \"error\" && /*#__PURE__*/_jsxDEV(AlertCircle, {\n          size: 20,\n          className: \"alert-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 6119,\n          columnNumber: 43\n        }, this), alertBox.type === \"warning\" && /*#__PURE__*/_jsxDEV(Info, {\n          size: 20,\n          className: \"alert-icon\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 6120,\n          columnNumber: 45\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: alertBox.message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 6121,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 6117,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"alert-close\",\n        onClick: () => setAlertBox({\n          ...alertBox,\n          show: false\n        }),\n        children: /*#__PURE__*/_jsxDEV(X, {\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 6127,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 6123,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 6116,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 4961,\n    columnNumber: 5\n  }, this);\n}\n_s(PriceList, \"E1jei0nyDyNkwx4sQssVOxwO4hU=\");\n_c = PriceList;\nvar _c;\n$RefreshReg$(_c, \"PriceList\");","map":{"version":3,"names":["React","useEffect","useState","axios","Plus","Edit","Trash2","Copy","Search","Filter","Check","X","ChevronLeft","ChevronRight","Download","Upload","CheckSquare","Package","CheckCircle","Tag","Image","Loader2","AlertCircle","Info","Save","Edit2","Eye","EyeOff","Calendar","Layers","Scale","FileSpreadsheet","Database","Box","ShoppingCart","TrendingUp","TrendingDown","Percent","Hash","Receipt","jsxDEV","_jsxDEV","Fragment","_Fragment","API_URL","CATEGORY_URL","PriceList","_s","items","setItems","categories","setCategories","subcategories","setSubcategories","search","setSearch","loading","setLoading","form","setForm","name","category","subcategory","description","basePrice","profitLoss","gstPercent","hsnCode","taxType","weightValue","weightUnit","validTill","file","status","editId","setEditId","showForm","setShowForm","showModal","setShowModal","activeMenu","setActiveMenu","selectedItems","setSelectedItems","bulkMode","setBulkMode","currentPage","setCurrentPage","itemsPerPage","filterCategory","setFilterCategory","filterSubcategory","setFilterSubcategory","filterSubs","setFilterSubs","quickBasePrices","setQuickBasePrices","quickProfitLoss","setQuickProfitLoss","sortOrder","setSortOrder","showCategoryModal","setShowCategoryModal","newCategoryName","setNewCategoryName","categoryLoading","setCategoryLoading","alertBox","setAlertBox","show","message","type","timer","setTimeout","prev","clearTimeout","fetchCategories","length","fetchItems","cat","find","c","_id","_res$data","res","get","data","success","err","console","error","showAlert","_res$data2","raw","flat","forEach","sub","products","p","formattedProduct","parseFloat","toFixed","salePrice","lockedPrice","id","image","push","sort","a","b","Date","createdAt","handleChange","e","value","files","target","includes","numValue","isNaN","handleSubmit","preventDefault","nameExists","some","trim","toLowerCase","fd","FormData","append","s","JSON","stringify","Number","unit","put","post","resetForm","_err$response","_err$response$data","response","handleAddCategory","_res$data3","handleEdit","item","_item$category","_item$category$_id","_item$subcategory","_item$weight","_item$weight2","toString","weight","split","_item$category2","handleDelete","window","confirm","delete","filter","x","handleStatusToggle","newStatus","map","updateLocalItemField","key","handleBulkSave","updates","handleBulkDelete","Promise","all","updateBasePrice","_quickBasePrices$item","newBase","_item$category3","undefined","updateProfitLoss","_quickProfitLoss$item","diff","filteredItems","_item$category4","_item$subcategory2","_item$category5","_item$subcategory3","t","matchText","matchCategory","matchSub","sortedItems","indexOfLast","currentItems","slice","totalPages","Math","max","ceil","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","placeholder","onChange","disabled","open","accept","style","display","step","ids","responseType","url","URL","createObjectURL","Blob","document","createElement","href","download","click","onSubmit","required","background","color","border","borderRadius","padding","cursor","flex","width","rows","checked","i","_item$category6","_item$subcategory4","_quickProfitLoss$item2","src","alt","substring","title","marginRight","teji","abs","Array","from","min","_","pageNum","stopPropagation","autoFocus","_c","$RefreshReg$"],"sources":["/Users/akshaychandel/Desktop/Grocerryadminfrontend-main/src/pages/PriceList.jsx"],"sourcesContent":["// import React, { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n\r\n// const API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n//   const [search, setSearch] = useState(\"\");\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     subcategory: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     profitLoss: \"\",\r\n//     gstPercent: \"\",\r\n//     hsnCode: \"\",\r\n//     taxType: \"cgst_sgst\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//     status: \"inactive\",\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [showForm, setShowForm] = useState(false);\r\n//   const [showModal, setShowModal] = useState(false);\r\n//   const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   const [filterCategory, setFilterCategory] = useState(\"\");\r\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n//   const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n//   const [quickBasePrices, setQuickBasePrices] = useState({});\r\n//   const [quickProfitLoss, setQuickProfitLoss] = useState({});\r\n\r\n//   const [sortOrder, setSortOrder] = useState(\"\");\r\n//   const [showCategoryModal, setShowCategoryModal] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [categoryLoading, setCategoryLoading] = useState(false);\r\n//   const [alertBox, setAlertBox] = useState({\r\n//     show: false,\r\n//     message: \"\",\r\n//     type: \"success\",\r\n//   });\r\n\r\n//   useEffect(() => {\r\n//     if (alertBox.show) {\r\n//       const timer = setTimeout(() => {\r\n//         setAlertBox((prev) => ({ ...prev, show: false }));\r\n//       }, 2500);\r\n//       return () => clearTimeout(timer);\r\n//     }\r\n//   }, [alertBox.show]);\r\n\r\n//   useEffect(() => {\r\n//     fetchCategories();\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (categories.length > 0) fetchItems();\r\n//   }, [categories]);\r\n\r\n//   useEffect(() => {\r\n//     if (!filterCategory) {\r\n//       setFilterSubs([]);\r\n//       setFilterSubcategory(\"\");\r\n//       return;\r\n//     }\r\n//     const cat = categories.find((c) => c._id === filterCategory);\r\n//     setFilterSubs(cat?.subcategories || []);\r\n//     setFilterSubcategory(\"\");\r\n//   }, [filterCategory, categories]);\r\n\r\n//   useEffect(() => {\r\n//     if (!form.category) {\r\n//       setSubcategories([]);\r\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//       return;\r\n//     }\r\n//     const cat = categories.find((c) => c._id === form.category);\r\n//     setSubcategories(cat?.subcategories || []);\r\n//   }, [form.category, categories]);\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data?.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error\", err);\r\n//       showAlert(\"Could not fetch categories\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data?.success) {\r\n//         const raw = res.data.data || [];\r\n//         const flat = [];\r\n//         raw.forEach((cat) => {\r\n//           cat.subcategories.forEach((sub) => {\r\n//             sub.products.forEach((p) => {\r\n//               flat.push({\r\n//                 ...p,\r\n//                 category: {\r\n//                   _id: cat.id,\r\n//                   name: cat.name,\r\n//                   image: cat.image,\r\n//                 },\r\n//                 subcategory: {\r\n//                   _id: sub.id,\r\n//                   name: sub.name,\r\n//                   image: sub.image,\r\n//                 },\r\n//               });\r\n//             });\r\n//           });\r\n//         });\r\n//         flat.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n//         setItems(flat);\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error\", err);\r\n//       showAlert(\"Could not fetch items\", \"error\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files?.length) {\r\n//       setForm((p) => ({ ...p, file: files[0] }));\r\n//     } else {\r\n//       setForm((p) => ({ ...p, [name]: value }));\r\n//     }\r\n//   };\r\n\r\n//   const showAlert = (message, type = \"success\") => {\r\n//     setAlertBox({ show: true, message, type });\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     const nameExists = items.some(\r\n//       (p) =>\r\n//         p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\r\n//         p._id !== editId\r\n//     );\r\n\r\n//     if (nameExists) {\r\n//       showAlert(\"❌ Product name already exists!\", \"error\");\r\n//       setLoading(false);\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         showAlert(\"Name, category & base price are required\", \"error\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", form.name.trim());\r\n//       fd.append(\"category\", form.category);\r\n//       if (form.subcategory) {\r\n//         const sub = subcategories.find((s) => s._id === form.subcategory);\r\n//         if (sub) {\r\n//           fd.append(\r\n//             \"subcategory\",\r\n//             JSON.stringify({\r\n//               id: sub._id,\r\n//               name: sub.name,\r\n//               image: sub.image || \"\",\r\n//             })\r\n//           );\r\n//         }\r\n//       } else {\r\n//         fd.append(\"subcategory\", JSON.stringify(null));\r\n//       }\r\n\r\n//       fd.append(\"basePrice\", form.basePrice);\r\n//       fd.append(\"profitLoss\", form.profitLoss || 0);\r\n//       fd.append(\"gstPercent\", form.gstPercent || 0);\r\n//       fd.append(\"hsnCode\", form.hsnCode || \"\");\r\n//       fd.append(\"taxType\", form.taxType);\r\n//       if (form.description) fd.append(\"description\", form.description);\r\n//       if (form.validTill) fd.append(\"validTill\", form.validTill);\r\n//       fd.append(\"status\", form.status);\r\n//       if (form.file) fd.append(\"file\", form.file);\r\n\r\n//       if (editId) {\r\n//         await axios.put(`${API_URL}/${editId}`, fd);\r\n//         showAlert(\"✅ Product updated successfully\", \"success\");\r\n//       } else {\r\n//         await axios.post(API_URL, fd);\r\n//         showAlert(\"✅ Product added successfully\", \"success\");\r\n//       }\r\n\r\n//       await fetchItems();\r\n//       resetForm();\r\n//     } catch (err) {\r\n//       console.error(\"Save error\", err);\r\n//       if (err.response?.data?.message === \"Product name already exists\") {\r\n//         showAlert(\"❌ Product name already exists!\", \"error\");\r\n//       } else {\r\n//         showAlert(\"❌ Save failed!\", \"error\");\r\n//       }\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const resetForm = () => {\r\n//     setForm({\r\n//       name: \"\",\r\n//       category: \"\",\r\n//       subcategory: \"\",\r\n//       description: \"\",\r\n//       basePrice: \"\",\r\n//       profitLoss: \"\",\r\n//       validTill: \"\",\r\n//       file: null,\r\n//       status: \"inactive\",\r\n//     });\r\n//     setEditId(null);\r\n//     setShowModal(false);\r\n//     setShowForm(false);\r\n//   };\r\n\r\n//   const handleAddCategory = async () => {\r\n//     if (!newCategoryName.trim()) {\r\n//       showAlert(\"Category name is required\", \"error\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setCategoryLoading(true);\r\n//       const res = await axios.post(CATEGORY_URL, {\r\n//         name: newCategoryName.trim(),\r\n//       });\r\n\r\n//       if (res.data?.success) {\r\n//         showAlert(\"✅ Category added successfully\", \"success\");\r\n//         setNewCategoryName(\"\");\r\n//         setShowCategoryModal(false);\r\n//         await fetchCategories();\r\n//       } else {\r\n//         showAlert(\"❌ Category add failed\", \"error\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Add category error\", err);\r\n//       showAlert(\"❌ Error while adding category\", \"error\");\r\n//     } finally {\r\n//       setCategoryLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice || \"\",\r\n//       profitLoss: item.profitLoss || 0,\r\n//       gstPercent: item.gstPercent || \"\",\r\n//       hsnCode: item.hsnCode || \"\",\r\n//       taxType: item.taxType || \"cgst_sgst\",\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//       status: item.status || \"inactive\",\r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n//     setEditId(item._id);\r\n//     setShowModal(true);\r\n//     setActiveMenu(null);\r\n//   };\r\n\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete this item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       setItems((prev) => prev.filter((x) => x._id !== id));\r\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n//       setActiveMenu(null);\r\n//       showAlert(\"✅ Product deleted successfully\", \"success\");\r\n//     } catch (err) {\r\n//       console.error(\"Delete error\", err);\r\n//       showAlert(\"❌ Delete failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const handleStatusToggle = async (item) => {\r\n//     try {\r\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       setItems((prev) =>\r\n//         prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\r\n//       );\r\n//       showAlert(`✅ Status updated to ${newStatus}`, \"success\");\r\n//     } catch (err) {\r\n//       console.error(\"Status toggle error\", err);\r\n//       showAlert(\"❌ Status update failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const updateLocalItemField = (id, key, value) => {\r\n//     setItems((prev) =>\r\n//       prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\r\n//     );\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     if (!selectedItems.length) {\r\n//       showAlert(\"No items selected\", \"warning\");\r\n//       return;\r\n//     }\r\n\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         basePrice: Number(x.basePrice),\r\n//         profitLoss: Number(x.profitLoss),\r\n//         gstPercent: Number(x.gstPercent || 0),\r\n//         hsnCode: x.hsnCode || \"\",\r\n//         taxType: x.taxType || \"cgst_sgst\",\r\n//         status: x.status,\r\n//       }));\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       showAlert(\"✅ Bulk save successful\", \"success\");\r\n//       setBulkMode(false);\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk save error\", err);\r\n//       showAlert(\"❌ Bulk save failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkDelete = async () => {\r\n//     if (!selectedItems.length) {\r\n//       showAlert(\"No items selected\", \"warning\");\r\n//       return;\r\n//     }\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await Promise.all(\r\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\r\n//       );\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//       showAlert(\"✅ Bulk delete successful\", \"success\");\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       showAlert(\"❌ Bulk delete failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const updateBasePrice = async (item) => {\r\n//     const newBase = Number(quickBasePrices[item._id] ?? item.basePrice);\r\n//     if (isNaN(newBase)) {\r\n//       showAlert(\"Invalid Base Price\", \"error\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", item.name);\r\n//       fd.append(\"category\", item.category?._id);\r\n//       if (item.subcategory) {\r\n//         fd.append(\"subcategory\", JSON.stringify(item.subcategory));\r\n//       }\r\n//       fd.append(\"description\", item.description || \"\");\r\n//       fd.append(\"basePrice\", newBase);\r\n//       fd.append(\"profitLoss\", item.profitLoss);\r\n//       fd.append(\"status\", item.status);\r\n\r\n//       const res = await axios.put(`${API_URL}/${item._id}`, fd);\r\n//       if (res.data.success) {\r\n//         await fetchItems();\r\n//         setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\r\n//         showAlert(\"✅ Base price updated\", \"success\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       showAlert(\"❌ Update failed\", \"error\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const updateProfitLoss = async (item) => {\r\n//     const diff = Number(quickProfitLoss[item._id] ?? 0);\r\n//     if (isNaN(diff)) {\r\n//       showAlert(\"Invalid Profit/Loss\", \"error\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, {\r\n//         diff,\r\n//       });\r\n//       if (res.data.success) {\r\n//         await fetchItems();\r\n//         setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\r\n//         showAlert(\"✅ Profit/Loss updated\", \"success\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       showAlert(\"❌ Update failed\", \"error\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = search.toLowerCase();\r\n//     const matchText =\r\n//       (item.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n//     const matchCategory =\r\n//       !filterCategory || item.category?._id === filterCategory;\r\n//     const matchSub =\r\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n//     return matchText && matchCategory && matchSub;\r\n//   });\r\n\r\n//   let sortedItems = [...filteredItems];\r\n//   if (sortOrder === \"low\") {\r\n//     sortedItems.sort(\r\n//       (a, b) => (Number(a.salePrice) || 0) - (Number(b.salePrice) || 0)\r\n//     );\r\n//   } else if (sortOrder === \"high\") {\r\n//     sortedItems.sort(\r\n//       (a, b) => (Number(b.salePrice) || 0) - (Number(a.salePrice) || 0)\r\n//     );\r\n//   }\r\n\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = sortedItems.slice(\r\n//     indexOfLast - itemsPerPage,\r\n//     indexOfLast\r\n//   );\r\n//   const totalPages = Math.max(1, Math.ceil(sortedItems.length / itemsPerPage));\r\n\r\n//   return (\r\n//     <div className=\"dashboard-container\">\r\n//       {/* Header */}\r\n//       <div className=\"dashboard-header\">\r\n//         <div className=\"header-content\">\r\n//           <h1 className=\"header-title\">Product Management</h1>\r\n//           <p className=\"header-subtitle\">\r\n//             Manage your products, categories, and inventory\r\n//           </p>\r\n//         </div>\r\n//         <div className=\"header-actions\">\r\n//           <button\r\n//             className=\"btn btn-primary\"\r\n//             onClick={() => {\r\n//               setShowForm(!showForm);\r\n//               setEditId(null);\r\n//             }}\r\n//           >\r\n//             <i className=\"icon-plus\"></i>\r\n//             {showForm ? \"Close Form\" : \"Add Product\"}\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Stats Cards */}\r\n//       <div className=\"stats-grid\">\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-blue\">\r\n//             <i className=\"icon-package\"></i>\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">{items.length}</h3>\r\n//             <p className=\"stat-label\">Total Products</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-green\">\r\n//             <i className=\"icon-check-circle\"></i>\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">\r\n//               {items.filter((x) => x.status === \"active\").length}\r\n//             </h3>\r\n//             <p className=\"stat-label\">Active Products</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-orange\">\r\n//             <i className=\"icon-tag\"></i>\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">{categories.length}</h3>\r\n//             <p className=\"stat-label\">Categories</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-purple\">\r\n//             <i className=\"icon-filter\"></i>\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">{filteredItems.length}</h3>\r\n//             <p className=\"stat-label\">Filtered Items</p>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Search and Filters */}\r\n//       <div className=\"search-filters-card\">\r\n//         <div className=\"search-section\">\r\n//           <div className=\"search-box\">\r\n//             <i className=\"icon-search\"></i>\r\n//             <input\r\n//               type=\"text\"\r\n//               placeholder=\"Search products, categories...\"\r\n//               value={search}\r\n//               onChange={(e) => {\r\n//                 setSearch(e.target.value);\r\n//                 setCurrentPage(1);\r\n//               }}\r\n//               className=\"search-input\"\r\n//             />\r\n//           </div>\r\n//           <div className=\"filters-row\">\r\n//             <div className=\"filter-group\">\r\n//               <label>Category</label>\r\n//               <select\r\n//                 value={filterCategory}\r\n//                 onChange={(e) => setFilterCategory(e.target.value)}\r\n//                 className=\"filter-select\"\r\n//               >\r\n//                 <option value=\"\">All Categories</option>\r\n//                 {categories.map((c) => (\r\n//                   <option key={c._id} value={c._id}>\r\n//                     {c.name}\r\n//                   </option>\r\n//                 ))}\r\n//               </select>\r\n//             </div>\r\n//             <div className=\"filter-group\">\r\n//               <label>Subcategory</label>\r\n//               <select\r\n//                 value={filterSubcategory}\r\n//                 onChange={(e) => setFilterSubcategory(e.target.value)}\r\n//                 disabled={!filterSubs.length}\r\n//                 className=\"filter-select\"\r\n//               >\r\n//                 <option value=\"\">All Subcategories</option>\r\n//                 {filterSubs.map((s) => (\r\n//                   <option key={s._id} value={s._id}>\r\n//                     {s.name}\r\n//                   </option>\r\n//                 ))}\r\n//               </select>\r\n//             </div>\r\n//             <div className=\"filter-group\">\r\n//               <label>Sort By</label>\r\n//               <select\r\n//                 value={sortOrder}\r\n//                 onChange={(e) => setSortOrder(e.target.value)}\r\n//                 className=\"filter-select\"\r\n//               >\r\n//                 <option value=\"\">Default</option>\r\n//                 <option value=\"low\">Price: Low to High</option>\r\n//                 <option value=\"high\">Price: High to Low</option>\r\n//               </select>\r\n//             </div>\r\n//             <div className=\"filter-group\">\r\n//               <label>Actions</label>\r\n//               <div className=\"action-buttons\">\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\r\n//                 >\r\n//                   <i className=\"icon-download\"></i> Export CSV\r\n//                 </button>\r\n//                 <label className=\"btn btn-secondary\">\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\".csv\"\r\n//                     style={{ display: \"none\" }}\r\n//                     onChange={async (e) => {\r\n//                       try {\r\n//                         const fd = new FormData();\r\n//                         fd.append(\"file\", e.target.files[0]);\r\n//                         await axios.post(`${API_URL}/import`, fd);\r\n//                         showAlert(\"✅ Imported successfully\", \"success\");\r\n//                         fetchItems();\r\n//                       } catch (err) {\r\n//                         showAlert(\"❌ Import failed\", \"error\");\r\n//                       }\r\n//                     }}\r\n//                   />\r\n//                   <i className=\"icon-upload\"></i> Import CSV\r\n//                 </label>\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Bulk Actions */}\r\n//       {selectedItems.length > 0 && (\r\n//         <div className=\"bulk-actions-card\">\r\n//           <div className=\"bulk-header\">\r\n//             <h3>\r\n//               <i className=\"icon-check-square\"></i>\r\n//               {selectedItems.length} item{selectedItems.length > 1 ? \"s\" : \"\"}{\" \"}\r\n//               selected\r\n//             </h3>\r\n//             <div className=\"bulk-buttons\">\r\n//               {!bulkMode ? (\r\n//                 <>\r\n//                   <button\r\n//                     className=\"btn btn-danger\"\r\n//                     onClick={handleBulkDelete}\r\n//                   >\r\n//                     <i className=\"icon-trash-2\"></i> Bulk Delete\r\n//                   </button>\r\n//                   <button\r\n//                     className=\"btn btn-primary\"\r\n//                     onClick={() => setBulkMode(true)}\r\n//                   >\r\n//                     <i className=\"icon-edit\"></i> Bulk Edit\r\n//                   </button>\r\n//                 </>\r\n//               ) : (\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={() => setBulkMode(false)}\r\n//                 >\r\n//                   <i className=\"icon-x\"></i> Cancel\r\n//                 </button>\r\n//               )}\r\n//             </div>\r\n//           </div>\r\n\r\n//           {bulkMode && (\r\n//             <div className=\"bulk-edit-panel\">\r\n//               <h4>Bulk Edit Products</h4>\r\n//               <div className=\"bulk-grid\">\r\n//                 {items\r\n//                   .filter((item) => selectedItems.includes(item._id))\r\n//                   .map((item) => (\r\n//                     <div key={item._id} className=\"bulk-item-card\">\r\n//                       <h5>{item.name}</h5>\r\n//                       <div className=\"bulk-fields\">\r\n//                         <div className=\"form-group\">\r\n//                           <label>Base Price</label>\r\n//                           <input\r\n//                             type=\"number\"\r\n//                             value={item.basePrice}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"basePrice\",\r\n//                                 Number(e.target.value)\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>Profit/Loss</label>\r\n//                           <input\r\n//                             type=\"number\"\r\n//                             value={item.profitLoss}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"profitLoss\",\r\n//                                 Number(e.target.value)\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>GST %</label>\r\n//                           <input\r\n//                             type=\"number\"\r\n//                             value={item.gstPercent || \"\"}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"gstPercent\",\r\n//                                 Number(e.target.value)\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>Status</label>\r\n//                           <select\r\n//                             value={item.status}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"status\",\r\n//                                 e.target.value\r\n//                               )\r\n//                             }\r\n//                             className=\"form-select\"\r\n//                           >\r\n//                             <option value=\"active\">Active</option>\r\n//                             <option value=\"inactive\">Inactive</option>\r\n//                           </select>\r\n//                         </div>\r\n//                       </div>\r\n//                     </div>\r\n//                   ))}\r\n//               </div>\r\n//               <div className=\"bulk-actions\">\r\n//                 <button className=\"btn btn-primary\" onClick={handleBulkSave}>\r\n//                   <i className=\"icon-save\"></i> Save All Changes\r\n//                 </button>\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={async () => {\r\n//                     if (!selectedItems.length) return;\r\n//                     for (let id of selectedItems)\r\n//                       await axios.post(`${API_URL}/copy/${id}`);\r\n//                     showAlert(\"✅ Selected items copied\", \"success\");\r\n//                     fetchItems();\r\n//                   }}\r\n//                 >\r\n//                   <i className=\"icon-copy\"></i> Copy Selected\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Add/Edit Form */}\r\n//       {showForm && (\r\n//         <div className=\"form-card\">\r\n//           <div className=\"form-header\">\r\n//             <h3>\r\n//               <i className=\"icon-edit-2\"></i>\r\n//               {editId ? \"Edit Product\" : \"Add New Product\"}\r\n//             </h3>\r\n//             <button className=\"btn-icon\" onClick={resetForm}>\r\n//               <i className=\"icon-x\"></i>\r\n//             </button>\r\n//           </div>\r\n//           <form onSubmit={handleSubmit}>\r\n//             <div className=\"form-grid\">\r\n//               <div className=\"form-group\">\r\n//                 <label>Product Name *</label>\r\n//                 <input\r\n//                   type=\"text\"\r\n//                   name=\"name\"\r\n//                   value={form.name}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   required\r\n//                   placeholder=\"Enter product name\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Category *</label>\r\n//                 <div className=\"input-with-button\">\r\n//                   <select\r\n//                     name=\"category\"\r\n//                     value={form.category}\r\n//                     onChange={handleChange}\r\n//                     className=\"form-select\"\r\n//                     required\r\n//                   >\r\n//                     <option value=\"\">Select Category</option>\r\n//                     {categories.map((c) => (\r\n//                       <option key={c._id} value={c._id}>\r\n//                         {c.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n//                   <button\r\n//                     type=\"button\"\r\n//                     onClick={() => setShowCategoryModal(true)}\r\n//                     className=\"btn-icon-primary\"\r\n//                   >\r\n//                     <i className=\"icon-plus\"></i>\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Subcategory</label>\r\n//                 <select\r\n//                   name=\"subcategory\"\r\n//                   value={form.subcategory}\r\n//                   onChange={handleChange}\r\n//                   disabled={!subcategories.length}\r\n//                   className=\"form-select\"\r\n//                 >\r\n//                   <option value=\"\">Select Subcategory</option>\r\n//                   {subcategories.map((s) => (\r\n//                     <option key={s._id} value={s._id}>\r\n//                       {s.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Base Price *</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"basePrice\"\r\n//                   value={form.basePrice}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   required\r\n//                   placeholder=\"0.00\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Profit/Loss</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"profitLoss\"\r\n//                   value={form.profitLoss}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"0\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>GST %</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"gstPercent\"\r\n//                   value={form.gstPercent}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"18\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>HSN Code</label>\r\n//                 <input\r\n//                   type=\"text\"\r\n//                   name=\"hsnCode\"\r\n//                   value={form.hsnCode}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"Enter HSN code\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Tax Type</label>\r\n//                 <select\r\n//                   name=\"taxType\"\r\n//                   value={form.taxType}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-select\"\r\n//                 >\r\n//                   <option value=\"cgst_sgst\">CGST + SGST</option>\r\n//                   <option value=\"igst\">IGST</option>\r\n//                 </select>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Valid Till</label>\r\n//                 <input\r\n//                   type=\"date\"\r\n//                   name=\"validTill\"\r\n//                   value={form.validTill}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Status</label>\r\n//                 <select\r\n//                   name=\"status\"\r\n//                   value={form.status}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-select\"\r\n//                 >\r\n//                   <option value=\"active\">Active</option>\r\n//                   <option value=\"inactive\">Inactive</option>\r\n//                 </select>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Image</label>\r\n//                 <input\r\n//                   type=\"file\"\r\n//                   accept=\"image/*\"\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//             <div className=\"form-group\">\r\n//               <label>Description</label>\r\n//               <textarea\r\n//                 name=\"description\"\r\n//                 value={form.description}\r\n//                 onChange={handleChange}\r\n//                 className=\"form-textarea\"\r\n//                 rows=\"3\"\r\n//                 placeholder=\"Product description...\"\r\n//               ></textarea>\r\n//             </div>\r\n//             <div className=\"form-actions\">\r\n//               <button\r\n//                 type=\"submit\"\r\n//                 className=\"btn btn-primary\"\r\n//                 disabled={loading}\r\n//               >\r\n//                 {loading ? (\r\n//                   <>\r\n//                     <i className=\"icon-loader spinner\"></i>\r\n//                     Saving...\r\n//                   </>\r\n//                 ) : editId ? (\r\n//                   <>\r\n//                     <i className=\"icon-save\"></i>\r\n//                     Update Product\r\n//                   </>\r\n//                 ) : (\r\n//                   <>\r\n//                     <i className=\"icon-plus\"></i>\r\n//                     Add Product\r\n//                   </>\r\n//                 )}\r\n//               </button>\r\n//               <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\r\n//                 Cancel\r\n//               </button>\r\n//             </div>\r\n//           </form>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Products Table */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <div>\r\n//             <h3>Products List</h3>\r\n//             <p className=\"table-subtitle\">\r\n//               Showing {currentItems.length} of {filteredItems.length} products\r\n//             </p>\r\n//           </div>\r\n//           <div className=\"table-actions\">\r\n//             <div className=\"table-checkbox\">\r\n//               <input\r\n//                 type=\"checkbox\"\r\n//                 checked={\r\n//                   selectedItems.length === filteredItems.length &&\r\n//                   filteredItems.length > 0\r\n//                 }\r\n//                 onChange={() => {\r\n//                   if (selectedItems.length === filteredItems.length)\r\n//                     setSelectedItems([]);\r\n//                   else setSelectedItems(filteredItems.map((x) => x._id));\r\n//                 }}\r\n//               />\r\n//               <span>Select All</span>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div className=\"table-responsive\">\r\n//           <table className=\"data-table\">\r\n//             <thead>\r\n//               <tr>\r\n//                 <th></th>\r\n//                 <th>#</th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Base Price</th>\r\n//                 <th>Profit/Loss</th>\r\n//                 <th>Sale Price</th>\r\n//                 <th>GST</th>\r\n//                 <th>Status</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         setSelectedItems((prev) =>\r\n//                           prev.includes(item._id)\r\n//                             ? prev.filter((x) => x !== item._id)\r\n//                             : [...prev, item._id]\r\n//                         )\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n//                   <td>\r\n//                     <div className=\"table-image\">\r\n//                       {item.image ? (\r\n//                         <img src={item.image} alt={item.name} />\r\n//                       ) : (\r\n//                         <div className=\"image-placeholder\">\r\n//                           <i className=\"icon-image\"></i>\r\n//                         </div>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"product-info\">\r\n//                       <strong>{item.name}</strong>\r\n//                       {item.description && (\r\n//                         <small>{item.description.substring(0, 50)}...</small>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"category-info\">\r\n//                       <span className=\"category-badge\">\r\n//                         {item.category?.name || \"-\"}\r\n//                       </span>\r\n//                       {item.subcategory?.name && (\r\n//                         <small>{item.subcategory.name}</small>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"editable-field\">\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         value={\r\n//                           quickBasePrices[item._id] !== undefined\r\n//                             ? quickBasePrices[item._id]\r\n//                             : item.basePrice\r\n//                         }\r\n//                         onChange={(e) =>\r\n//                           setQuickBasePrices((p) => ({\r\n//                             ...p,\r\n//                             [item._id]: e.target.value,\r\n//                           }))\r\n//                         }\r\n//                         className=\"quick-input\"\r\n//                       />\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={() => updateBasePrice(item)}\r\n//                         title=\"Save\"\r\n//                       >\r\n//                         <i className=\"icon-check\"></i>\r\n//                       </button>\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"editable-field\">\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         placeholder=\"Change\"\r\n//                         value={quickProfitLoss[item._id] ?? \"\"}\r\n//                         onChange={(e) =>\r\n//                           setQuickProfitLoss((p) => ({\r\n//                             ...p,\r\n//                             [item._id]: e.target.value,\r\n//                           }))\r\n//                         }\r\n//                         className=\"quick-input\"\r\n//                       />\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={() => updateProfitLoss(item)}\r\n//                         title=\"Save\"\r\n//                       >\r\n//                         <i className=\"icon-check\"></i>\r\n//                       </button>\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <span className=\"price-badge\">\r\n//                       ₹{item.salePrice || \"0.00\"}\r\n//                     </span>\r\n//                   </td>\r\n//                   <td>\r\n//                     {item.gstPercent ? (\r\n//                       <span className=\"gst-badge\">{item.gstPercent}%</span>\r\n//                     ) : (\r\n//                       \"-\"\r\n//                     )}\r\n//                   </td>\r\n//                   <td>\r\n//                     <button\r\n//                       className={`status-badge ${item.status === \"active\" ? \"active\" : \"inactive\"\r\n//                         }`}\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"action-buttons\">\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={() => handleEdit(item)}\r\n//                         title=\"Edit\"\r\n//                       >\r\n//                         <i className=\"icon-edit\"></i>\r\n//                       </button>\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={async () => {\r\n//                           await axios.post(`${API_URL}/copy/${item._id}`);\r\n//                           showAlert(\"✅ Product copied\", \"success\");\r\n//                           fetchItems();\r\n//                         }}\r\n//                         title=\"Duplicate\"\r\n//                       >\r\n//                         <i className=\"icon-copy\"></i>\r\n//                       </button>\r\n//                       <button\r\n//                         className=\"btn-icon-small danger\"\r\n//                         onClick={() => handleDelete(item._id)}\r\n//                         title=\"Delete\"\r\n//                       >\r\n//                         <i className=\"icon-trash\"></i>\r\n//                       </button>\r\n//                     </div>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         </div>\r\n\r\n//         {/* Pagination */}\r\n//         {totalPages > 1 && (\r\n//           <div className=\"pagination\">\r\n//             <button\r\n//               className=\"pagination-btn\"\r\n//               disabled={currentPage === 1}\r\n//               onClick={() => setCurrentPage((p) => p - 1)}\r\n//             >\r\n//               <i className=\"icon-chevron-left\"></i> Previous\r\n//             </button>\r\n//             <div className=\"pagination-pages\">\r\n//               {Array.from({ length: Math.min(totalPages, 5) }, (_, i) => {\r\n//                 let pageNum;\r\n//                 if (totalPages <= 5) {\r\n//                   pageNum = i + 1;\r\n//                 } else if (currentPage <= 3) {\r\n//                   pageNum = i + 1;\r\n//                 } else if (currentPage >= totalPages - 2) {\r\n//                   pageNum = totalPages - 4 + i;\r\n//                 } else {\r\n//                   pageNum = currentPage - 2 + i;\r\n//                 }\r\n\r\n//                 if (pageNum < 1 || pageNum > totalPages) return null;\r\n\r\n//                 return (\r\n//                   <button\r\n//                     key={i}\r\n//                     className={`pagination-btn ${currentPage === pageNum ? \"active\" : \"\"\r\n//                       }`}\r\n//                     onClick={() => setCurrentPage(pageNum)}\r\n//                   >\r\n//                     {pageNum}\r\n//                   </button>\r\n//                 );\r\n//               })}\r\n//               {totalPages > 5 && <span className=\"pagination-dots\">...</span>}\r\n//             </div>\r\n//             <button\r\n//               className=\"pagination-btn\"\r\n//               disabled={currentPage === totalPages}\r\n//               onClick={() => setCurrentPage((p) => p + 1)}\r\n//             >\r\n//               Next <i className=\"icon-chevron-right\"></i>\r\n//             </button>\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       {/* Modals */}\r\n//       {showCategoryModal && (\r\n//         <div className=\"modal-overlay\" onClick={() => setShowCategoryModal(false)}>\r\n//           <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n//             <div className=\"modal-header\">\r\n//               <h3>Add New Category</h3>\r\n//               <button\r\n//                 className=\"btn-icon\"\r\n//                 onClick={() => setShowCategoryModal(false)}\r\n//               >\r\n//                 <i className=\"icon-x\"></i>\r\n//               </button>\r\n//             </div>\r\n//             <div className=\"modal-body\">\r\n//               <div className=\"form-group\">\r\n//                 <label>Category Name *</label>\r\n//                 <input\r\n//                   type=\"text\"\r\n//                   value={newCategoryName}\r\n//                   onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"Enter category name\"\r\n//                   autoFocus\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//             <div className=\"modal-footer\">\r\n//               <button\r\n//                 className=\"btn btn-secondary\"\r\n//                 onClick={() => setShowCategoryModal(false)}\r\n//               >\r\n//                 Cancel\r\n//               </button>\r\n//               <button\r\n//                 className=\"btn btn-primary\"\r\n//                 onClick={handleAddCategory}\r\n//                 disabled={categoryLoading || !newCategoryName.trim()}\r\n//               >\r\n//                 {categoryLoading ? (\r\n//                   <>\r\n//                     <i className=\"icon-loader spinner\"></i>\r\n//                     Saving...\r\n//                   </>\r\n//                 ) : (\r\n//                   <>\r\n//                     <i className=\"icon-plus\"></i>\r\n//                     Add Category\r\n//                   </>\r\n//                 )}\r\n//               </button>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n\r\n//       {alertBox.show && (\r\n//         <div className={`alert alert-${alertBox.type}`}>\r\n//           <div className=\"alert-content\">\r\n//             <i className={`alert-icon icon-${alertBox.type === \"success\" ? \"check-circle\" :\r\n//                 alertBox.type === \"error\" ? \"alert-circle\" :\r\n//                   \"info\"\r\n//               }`}></i>\r\n//             <span>{alertBox.message}</span>\r\n//           </div>\r\n//           <button\r\n//             className=\"alert-close\"\r\n//             onClick={() => setAlertBox({ ...alertBox, show: false })}\r\n//           >\r\n//             <i className=\"icon-x\"></i>\r\n//           </button>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import React, { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n// import {\r\n//   // Hero Icons\r\n//   PlusIcon,\r\n//   PencilIcon,\r\n//   TrashIcon,\r\n//   DocumentDuplicateIcon,\r\n//   MagnifyingGlassIcon,\r\n//   FunnelIcon,\r\n//   CheckIcon,\r\n//   XMarkIcon,\r\n//   ChevronLeftIcon,\r\n//   ChevronRightIcon,\r\n//   ArrowDownTrayIcon,\r\n//   ArrowUpTrayIcon,\r\n//   ClipboardDocumentIcon,\r\n//   CubeIcon,\r\n//   CheckCircleIcon,\r\n//   TagIcon,\r\n//   AdjustmentsHorizontalIcon,\r\n//   PhotoIcon,\r\n//   CogIcon,\r\n//   ClipboardDocumentCheckIcon,\r\n//   // Lucide Icons\r\n//   Package,\r\n//   Filter,\r\n//   Download,\r\n//   Upload,\r\n//   Copy,\r\n//   Image,\r\n//   Loader2,\r\n//   AlertCircle,\r\n//   Info,\r\n//   CheckSquare,\r\n//   Save,\r\n//   Edit2,\r\n//   Eye,\r\n//   EyeOff,\r\n//   // Tabler Icons\r\n//   TrendingUp,\r\n//   TrendingDown,\r\n//   Calendar,\r\n//   FileText,\r\n//   // Material Icons\r\n//   AttachMoney,\r\n//   Percent,\r\n//   Category,\r\n//   Inventory,\r\n//   Description,\r\n//   LocalOffer,\r\n//   PriceCheck,\r\n//   ContentCopy,\r\n//   DeleteOutline,\r\n//   Edit,\r\n//   MoreVert,\r\n//   CheckBox,\r\n//   CheckBoxOutlineBlank,\r\n//   CloudDownload,\r\n//   CloudUpload,\r\n//   Replay,\r\n//   Refresh,\r\n//   Visibility,\r\n//   VisibilityOff,\r\n// } from 'lucide-react';\r\n\r\n// const API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n//   const [search, setSearch] = useState(\"\");\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     subcategory: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     profitLoss: \"\",\r\n//     gstPercent: \"\",\r\n//     hsnCode: \"\",\r\n//     taxType: \"cgst_sgst\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//     status: \"inactive\",\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [showForm, setShowForm] = useState(false);\r\n//   const [showModal, setShowModal] = useState(false);\r\n//   const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   const [filterCategory, setFilterCategory] = useState(\"\");\r\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n//   const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n//   const [quickBasePrices, setQuickBasePrices] = useState({});\r\n//   const [quickProfitLoss, setQuickProfitLoss] = useState({});\r\n\r\n//   const [sortOrder, setSortOrder] = useState(\"\");\r\n//   const [showCategoryModal, setShowCategoryModal] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [categoryLoading, setCategoryLoading] = useState(false);\r\n//   const [alertBox, setAlertBox] = useState({\r\n//     show: false,\r\n//     message: \"\",\r\n//     type: \"success\",\r\n//   });\r\n\r\n//   useEffect(() => {\r\n//     if (alertBox.show) {\r\n//       const timer = setTimeout(() => {\r\n//         setAlertBox((prev) => ({ ...prev, show: false }));\r\n//       }, 2500);\r\n//       return () => clearTimeout(timer);\r\n//     }\r\n//   }, [alertBox.show]);\r\n\r\n//   useEffect(() => {\r\n//     fetchCategories();\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (categories.length > 0) fetchItems();\r\n//   }, [categories]);\r\n\r\n//   useEffect(() => {\r\n//     if (!filterCategory) {\r\n//       setFilterSubs([]);\r\n//       setFilterSubcategory(\"\");\r\n//       return;\r\n//     }\r\n//     const cat = categories.find((c) => c._id === filterCategory);\r\n//     setFilterSubs(cat?.subcategories || []);\r\n//     setFilterSubcategory(\"\");\r\n//   }, [filterCategory, categories]);\r\n\r\n//   useEffect(() => {\r\n//     if (!form.category) {\r\n//       setSubcategories([]);\r\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//       return;\r\n//     }\r\n//     const cat = categories.find((c) => c._id === form.category);\r\n//     setSubcategories(cat?.subcategories || []);\r\n//   }, [form.category, categories]);\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data?.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error\", err);\r\n//       showAlert(\"Could not fetch categories\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data?.success) {\r\n//         const raw = res.data.data || [];\r\n//         const flat = [];\r\n//         raw.forEach((cat) => {\r\n//           cat.subcategories.forEach((sub) => {\r\n//             sub.products.forEach((p) => {\r\n//               flat.push({\r\n//                 ...p,\r\n//                 category: {\r\n//                   _id: cat.id,\r\n//                   name: cat.name,\r\n//                   image: cat.image,\r\n//                 },\r\n//                 subcategory: {\r\n//                   _id: sub.id,\r\n//                   name: sub.name,\r\n//                   image: sub.image,\r\n//                 },\r\n//               });\r\n//             });\r\n//           });\r\n//         });\r\n//         flat.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n//         setItems(flat);\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error\", err);\r\n//       showAlert(\"Could not fetch items\", \"error\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files?.length) {\r\n//       setForm((p) => ({ ...p, file: files[0] }));\r\n//     } else {\r\n//       setForm((p) => ({ ...p, [name]: value }));\r\n//     }\r\n//   };\r\n\r\n//   const showAlert = (message, type = \"success\") => {\r\n//     setAlertBox({ show: true, message, type });\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     const nameExists = items.some(\r\n//       (p) =>\r\n//         p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\r\n//         p._id !== editId\r\n//     );\r\n\r\n//     if (nameExists) {\r\n//       showAlert(\"❌ Product name already exists!\", \"error\");\r\n//       setLoading(false);\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         showAlert(\"Name, category & base price are required\", \"error\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", form.name.trim());\r\n//       fd.append(\"category\", form.category);\r\n//       if (form.subcategory) {\r\n//         const sub = subcategories.find((s) => s._id === form.subcategory);\r\n//         if (sub) {\r\n//           fd.append(\r\n//             \"subcategory\",\r\n//             JSON.stringify({\r\n//               id: sub._id,\r\n//               name: sub.name,\r\n//               image: sub.image || \"\",\r\n//             })\r\n//           );\r\n//         }\r\n//       } else {\r\n//         fd.append(\"subcategory\", JSON.stringify(null));\r\n//       }\r\n\r\n//       fd.append(\"basePrice\", form.basePrice);\r\n//       fd.append(\"profitLoss\", form.profitLoss || 0);\r\n//       fd.append(\"gstPercent\", form.gstPercent || 0);\r\n//       fd.append(\"hsnCode\", form.hsnCode || \"\");\r\n//       fd.append(\"taxType\", form.taxType);\r\n//       if (form.description) fd.append(\"description\", form.description);\r\n//       if (form.validTill) fd.append(\"validTill\", form.validTill);\r\n//       fd.append(\"status\", form.status);\r\n//       if (form.file) fd.append(\"file\", form.file);\r\n\r\n//       if (editId) {\r\n//         await axios.put(`${API_URL}/${editId}`, fd);\r\n//         showAlert(\"✅ Product updated successfully\", \"success\");\r\n//       } else {\r\n//         await axios.post(API_URL, fd);\r\n//         showAlert(\"✅ Product added successfully\", \"success\");\r\n//       }\r\n\r\n//       await fetchItems();\r\n//       resetForm();\r\n//     } catch (err) {\r\n//       console.error(\"Save error\", err);\r\n//       if (err.response?.data?.message === \"Product name already exists\") {\r\n//         showAlert(\"❌ Product name already exists!\", \"error\");\r\n//       } else {\r\n//         showAlert(\"❌ Save failed!\", \"error\");\r\n//       }\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const resetForm = () => {\r\n//     setForm({\r\n//       name: \"\",\r\n//       category: \"\",\r\n//       subcategory: \"\",\r\n//       description: \"\",\r\n//       basePrice: \"\",\r\n//       profitLoss: \"\",\r\n//       validTill: \"\",\r\n//       file: null,\r\n//       status: \"inactive\",\r\n//     });\r\n//     setEditId(null);\r\n//     setShowModal(false);\r\n//     setShowForm(false);\r\n//   };\r\n\r\n//   const handleAddCategory = async () => {\r\n//     if (!newCategoryName.trim()) {\r\n//       showAlert(\"Category name is required\", \"error\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setCategoryLoading(true);\r\n//       const res = await axios.post(CATEGORY_URL, {\r\n//         name: newCategoryName.trim(),\r\n//       });\r\n\r\n//       if (res.data?.success) {\r\n//         showAlert(\"✅ Category added successfully\", \"success\");\r\n//         setNewCategoryName(\"\");\r\n//         setShowCategoryModal(false);\r\n//         await fetchCategories();\r\n//       } else {\r\n//         showAlert(\"❌ Category add failed\", \"error\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Add category error\", err);\r\n//       showAlert(\"❌ Error while adding category\", \"error\");\r\n//     } finally {\r\n//       setCategoryLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice || \"\",\r\n//       profitLoss: item.profitLoss || 0,\r\n//       gstPercent: item.gstPercent || \"\",\r\n//       hsnCode: item.hsnCode || \"\",\r\n//       taxType: item.taxType || \"cgst_sgst\",\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//       status: item.status || \"inactive\",\r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n//     setEditId(item._id);\r\n//     setShowModal(true);\r\n//     setActiveMenu(null);\r\n//   };\r\n\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete this item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       setItems((prev) => prev.filter((x) => x._id !== id));\r\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n//       setActiveMenu(null);\r\n//       showAlert(\"✅ Product deleted successfully\", \"success\");\r\n//     } catch (err) {\r\n//       console.error(\"Delete error\", err);\r\n//       showAlert(\"❌ Delete failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const handleStatusToggle = async (item) => {\r\n//     try {\r\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       setItems((prev) =>\r\n//         prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\r\n//       );\r\n//       showAlert(`✅ Status updated to ${newStatus}`, \"success\");\r\n//     } catch (err) {\r\n//       console.error(\"Status toggle error\", err);\r\n//       showAlert(\"❌ Status update failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const updateLocalItemField = (id, key, value) => {\r\n//     setItems((prev) =>\r\n//       prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\r\n//     );\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     if (!selectedItems.length) {\r\n//       showAlert(\"No items selected\", \"warning\");\r\n//       return;\r\n//     }\r\n\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         basePrice: Number(x.basePrice),\r\n//         profitLoss: Number(x.profitLoss),\r\n//         gstPercent: Number(x.gstPercent || 0),\r\n//         hsnCode: x.hsnCode || \"\",\r\n//         taxType: x.taxType || \"cgst_sgst\",\r\n//         status: x.status,\r\n//       }));\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       showAlert(\"✅ Bulk save successful\", \"success\");\r\n//       setBulkMode(false);\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk save error\", err);\r\n//       showAlert(\"❌ Bulk save failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkDelete = async () => {\r\n//     if (!selectedItems.length) {\r\n//       showAlert(\"No items selected\", \"warning\");\r\n//       return;\r\n//     }\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await Promise.all(\r\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\r\n//       );\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//       showAlert(\"✅ Bulk delete successful\", \"success\");\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       showAlert(\"❌ Bulk delete failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const updateBasePrice = async (item) => {\r\n//     const newBase = Number(quickBasePrices[item._id] ?? item.basePrice);\r\n//     if (isNaN(newBase)) {\r\n//       showAlert(\"Invalid Base Price\", \"error\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", item.name);\r\n//       fd.append(\"category\", item.category?._id);\r\n//       if (item.subcategory) {\r\n//         fd.append(\"subcategory\", JSON.stringify(item.subcategory));\r\n//       }\r\n//       fd.append(\"description\", item.description || \"\");\r\n//       fd.append(\"basePrice\", newBase);\r\n//       fd.append(\"profitLoss\", item.profitLoss);\r\n//       fd.append(\"status\", item.status);\r\n\r\n//       const res = await axios.put(`${API_URL}/${item._id}`, fd);\r\n//       if (res.data.success) {\r\n//         await fetchItems();\r\n//         setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\r\n//         showAlert(\"✅ Base price updated\", \"success\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       showAlert(\"❌ Update failed\", \"error\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const updateProfitLoss = async (item) => {\r\n//     const diff = Number(quickProfitLoss[item._id] ?? 0);\r\n//     if (isNaN(diff)) {\r\n//       showAlert(\"Invalid Profit/Loss\", \"error\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, {\r\n//         diff,\r\n//       });\r\n//       if (res.data.success) {\r\n//         await fetchItems();\r\n//         setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\r\n//         showAlert(\"✅ Profit/Loss updated\", \"success\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       showAlert(\"❌ Update failed\", \"error\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = search.toLowerCase();\r\n//     const matchText =\r\n//       (item.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n//     const matchCategory =\r\n//       !filterCategory || item.category?._id === filterCategory;\r\n//     const matchSub =\r\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n//     return matchText && matchCategory && matchSub;\r\n//   });\r\n\r\n//   let sortedItems = [...filteredItems];\r\n//   if (sortOrder === \"low\") {\r\n//     sortedItems.sort(\r\n//       (a, b) => (Number(a.salePrice) || 0) - (Number(b.salePrice) || 0)\r\n//     );\r\n//   } else if (sortOrder === \"high\") {\r\n//     sortedItems.sort(\r\n//       (a, b) => (Number(b.salePrice) || 0) - (Number(a.salePrice) || 0)\r\n//     );\r\n//   }\r\n\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = sortedItems.slice(\r\n//     indexOfLast - itemsPerPage,\r\n//     indexOfLast\r\n//   );\r\n//   const totalPages = Math.max(1, Math.ceil(sortedItems.length / itemsPerPage));\r\n\r\n//   return (\r\n//     <div className=\"dashboard-container\">\r\n//       {/* Header */}\r\n//       <div className=\"dashboard-header\">\r\n//         <div className=\"header-content\">\r\n//           <h1 className=\"header-title\">Product Management</h1>\r\n//           <p className=\"header-subtitle\">\r\n//             Manage your products, categories, and inventory\r\n//           </p>\r\n//         </div>\r\n//         <div className=\"header-actions\">\r\n//           <button\r\n//             className=\"btn btn-primary\"\r\n//             onClick={() => {\r\n//               setShowForm(!showForm);\r\n//               setEditId(null);\r\n//             }}\r\n//           >\r\n//             <PlusIcon size={18} />\r\n//             {showForm ? \"Close Form\" : \"Add Product\"}\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Stats Cards */}\r\n//       <div className=\"stats-grid\">\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-blue\">\r\n//             <Package size={24} />\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">{items.length}</h3>\r\n//             <p className=\"stat-label\">Total Products</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-green\">\r\n//             <CheckCircleIcon size={24} />\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">\r\n//               {items.filter((x) => x.status === \"active\").length}\r\n//             </h3>\r\n//             <p className=\"stat-label\">Active Products</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-orange\">\r\n//             <Category size={24} />\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">{categories.length}</h3>\r\n//             <p className=\"stat-label\">Categories</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-purple\">\r\n//             <Filter size={24} />\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">{filteredItems.length}</h3>\r\n//             <p className=\"stat-label\">Filtered Items</p>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Search and Filters */}\r\n//       <div className=\"search-filters-card\">\r\n//         <div className=\"search-section\">\r\n//           <div className=\"search-box\">\r\n//             <MagnifyingGlassIcon size={20} className=\"search-icon\" />\r\n//             <input\r\n//               type=\"text\"\r\n//               placeholder=\"Search products, categories...\"\r\n//               value={search}\r\n//               onChange={(e) => {\r\n//                 setSearch(e.target.value);\r\n//                 setCurrentPage(1);\r\n//               }}\r\n//               className=\"search-input\"\r\n//             />\r\n//           </div>\r\n//           <div className=\"filters-row\">\r\n//             <div className=\"filter-group\">\r\n//               <label>Category</label>\r\n//               <select\r\n//                 value={filterCategory}\r\n//                 onChange={(e) => setFilterCategory(e.target.value)}\r\n//                 className=\"filter-select\"\r\n//               >\r\n//                 <option value=\"\">All Categories</option>\r\n//                 {categories.map((c) => (\r\n//                   <option key={c._id} value={c._id}>\r\n//                     {c.name}\r\n//                   </option>\r\n//                 ))}\r\n//               </select>\r\n//             </div>\r\n//             <div className=\"filter-group\">\r\n//               <label>Subcategory</label>\r\n//               <select\r\n//                 value={filterSubcategory}\r\n//                 onChange={(e) => setFilterSubcategory(e.target.value)}\r\n//                 disabled={!filterSubs.length}\r\n//                 className=\"filter-select\"\r\n//               >\r\n//                 <option value=\"\">All Subcategories</option>\r\n//                 {filterSubs.map((s) => (\r\n//                   <option key={s._id} value={s._id}>\r\n//                     {s.name}\r\n//                   </option>\r\n//                 ))}\r\n//               </select>\r\n//             </div>\r\n//             <div className=\"filter-group\">\r\n//               <label>Sort By</label>\r\n//               <select\r\n//                 value={sortOrder}\r\n//                 onChange={(e) => setSortOrder(e.target.value)}\r\n//                 className=\"filter-select\"\r\n//               >\r\n//                 <option value=\"\">Default</option>\r\n//                 <option value=\"low\">Price: Low to High</option>\r\n//                 <option value=\"high\">Price: High to Low</option>\r\n//               </select>\r\n//             </div>\r\n//             <div className=\"filter-group\">\r\n//               <label>Actions</label>\r\n//               <div className=\"action-buttons\">\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\r\n//                 >\r\n//                   <Download size={16} /> Export CSV\r\n//                 </button>\r\n//                 <label className=\"btn btn-secondary\">\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\".csv\"\r\n//                     style={{ display: \"none\" }}\r\n//                     onChange={async (e) => {\r\n//                       try {\r\n//                         const fd = new FormData();\r\n//                         fd.append(\"file\", e.target.files[0]);\r\n//                         await axios.post(`${API_URL}/import`, fd);\r\n//                         showAlert(\"✅ Imported successfully\", \"success\");\r\n//                         fetchItems();\r\n//                       } catch (err) {\r\n//                         showAlert(\"❌ Import failed\", \"error\");\r\n//                       }\r\n//                     }}\r\n//                   />\r\n//                   <Upload size={16} /> Import CSV\r\n//                 </label>\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Bulk Actions */}\r\n//       {selectedItems.length > 0 && (\r\n//         <div className=\"bulk-actions-card\">\r\n//           <div className=\"bulk-header\">\r\n//             <h3>\r\n//               <CheckSquare size={20} />\r\n//               {selectedItems.length} item{selectedItems.length > 1 ? \"s\" : \"\"}{\" \"}\r\n//               selected\r\n//             </h3>\r\n//             <div className=\"bulk-buttons\">\r\n//               {!bulkMode ? (\r\n//                 <>\r\n//                   <button\r\n//                     className=\"btn btn-danger\"\r\n//                     onClick={handleBulkDelete}\r\n//                   >\r\n//                     <TrashIcon size={16} /> Bulk Delete\r\n//                   </button>\r\n//                   <button\r\n//                     className=\"btn btn-primary\"\r\n//                     onClick={() => setBulkMode(true)}\r\n//                   >\r\n//                     <Edit size={16} /> Bulk Edit\r\n//                   </button>\r\n//                 </>\r\n//               ) : (\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={() => setBulkMode(false)}\r\n//                 >\r\n//                   <XMarkIcon size={16} /> Cancel\r\n//                 </button>\r\n//               )}\r\n//             </div>\r\n//           </div>\r\n\r\n//           {bulkMode && (\r\n//             <div className=\"bulk-edit-panel\">\r\n//               <h4>Bulk Edit Products</h4>\r\n//               <div className=\"bulk-grid\">\r\n//                 {items\r\n//                   .filter((item) => selectedItems.includes(item._id))\r\n//                   .map((item) => (\r\n//                     <div key={item._id} className=\"bulk-item-card\">\r\n//                       <h5>{item.name}</h5>\r\n//                       <div className=\"bulk-fields\">\r\n//                         <div className=\"form-group\">\r\n//                           <label>Base Price</label>\r\n//                           <input\r\n//                             type=\"number\"\r\n//                             value={item.basePrice}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"basePrice\",\r\n//                                 Number(e.target.value)\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>Profit/Loss</label>\r\n//                           <input\r\n//                             type=\"number\"\r\n//                             value={item.profitLoss}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"profitLoss\",\r\n//                                 Number(e.target.value)\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>GST %</label>\r\n//                           <input\r\n//                             type=\"number\"\r\n//                             value={item.gstPercent || \"\"}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"gstPercent\",\r\n//                                 Number(e.target.value)\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>Status</label>\r\n//                           <select\r\n//                             value={item.status}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"status\",\r\n//                                 e.target.value\r\n//                               )\r\n//                             }\r\n//                             className=\"form-select\"\r\n//                           >\r\n//                             <option value=\"active\">Active</option>\r\n//                             <option value=\"inactive\">Inactive</option>\r\n//                           </select>\r\n//                         </div>\r\n//                       </div>\r\n//                     </div>\r\n//                   ))}\r\n//               </div>\r\n//               <div className=\"bulk-actions\">\r\n//                 <button className=\"btn btn-primary\" onClick={handleBulkSave}>\r\n//                   <Save size={16} /> Save All Changes\r\n//                 </button>\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={async () => {\r\n//                     if (!selectedItems.length) return;\r\n//                     for (let id of selectedItems)\r\n//                       await axios.post(`${API_URL}/copy/${id}`);\r\n//                     showAlert(\"✅ Selected items copied\", \"success\");\r\n//                     fetchItems();\r\n//                   }}\r\n//                 >\r\n//                   <Copy size={16} /> Copy Selected\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Add/Edit Form */}\r\n//       {showForm && (\r\n//         <div className=\"form-card\">\r\n//           <div className=\"form-header\">\r\n//             <h3>\r\n//               <Edit2 size={20} />\r\n//               {editId ? \"Edit Product\" : \"Add New Product\"}\r\n//             </h3>\r\n//             <button className=\"btn-icon\" onClick={resetForm}>\r\n//               <XMarkIcon size={20} />\r\n//             </button>\r\n//           </div>\r\n//           <form onSubmit={handleSubmit}>\r\n//             <div className=\"form-grid\">\r\n//               <div className=\"form-group\">\r\n//                 <label>Product Name *</label>\r\n//                 <input\r\n//                   type=\"text\"\r\n//                   name=\"name\"\r\n//                   value={form.name}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   required\r\n//                   placeholder=\"Enter product name\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Category *</label>\r\n//                 <div className=\"input-with-button\">\r\n//                   <select\r\n//                     name=\"category\"\r\n//                     value={form.category}\r\n//                     onChange={handleChange}\r\n//                     className=\"form-select\"\r\n//                     required\r\n//                   >\r\n//                     <option value=\"\">Select Category</option>\r\n//                     {categories.map((c) => (\r\n//                       <option key={c._id} value={c._id}>\r\n//                         {c.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n//                   <button\r\n//                     type=\"button\"\r\n//                     onClick={() => setShowCategoryModal(true)}\r\n//                     className=\"btn-icon-primary\"\r\n//                   >\r\n//                     <PlusIcon size={18} />\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Subcategory</label>\r\n//                 <select\r\n//                   name=\"subcategory\"\r\n//                   value={form.subcategory}\r\n//                   onChange={handleChange}\r\n//                   disabled={!subcategories.length}\r\n//                   className=\"form-select\"\r\n//                 >\r\n//                   <option value=\"\">Select Subcategory</option>\r\n//                   {subcategories.map((s) => (\r\n//                     <option key={s._id} value={s._id}>\r\n//                       {s.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Base Price *</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"basePrice\"\r\n//                   value={form.basePrice}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   required\r\n//                   placeholder=\"0.00\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Profit/Loss</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"profitLoss\"\r\n//                   value={form.profitLoss}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"0\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>GST %</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"gstPercent\"\r\n//                   value={form.gstPercent}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"18\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>HSN Code</label>\r\n//                 <input\r\n//                   type=\"text\"\r\n//                   name=\"hsnCode\"\r\n//                   value={form.hsnCode}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"Enter HSN code\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Tax Type</label>\r\n//                 <select\r\n//                   name=\"taxType\"\r\n//                   value={form.taxType}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-select\"\r\n//                 >\r\n//                   <option value=\"cgst_sgst\">CGST + SGST</option>\r\n//                   <option value=\"igst\">IGST</option>\r\n//                 </select>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Valid Till</label>\r\n//                 <input\r\n//                   type=\"date\"\r\n//                   name=\"validTill\"\r\n//                   value={form.validTill}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Status</label>\r\n//                 <select\r\n//                   name=\"status\"\r\n//                   value={form.status}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-select\"\r\n//                 >\r\n//                   <option value=\"active\">Active</option>\r\n//                   <option value=\"inactive\">Inactive</option>\r\n//                 </select>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Image</label>\r\n//                 <input\r\n//                   type=\"file\"\r\n//                   accept=\"image/*\"\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//             <div className=\"form-group\">\r\n//               <label>Description</label>\r\n//               <textarea\r\n//                 name=\"description\"\r\n//                 value={form.description}\r\n//                 onChange={handleChange}\r\n//                 className=\"form-textarea\"\r\n//                 rows=\"3\"\r\n//                 placeholder=\"Product description...\"\r\n//               ></textarea>\r\n//             </div>\r\n//             <div className=\"form-actions\">\r\n//               <button\r\n//                 type=\"submit\"\r\n//                 className=\"btn btn-primary\"\r\n//                 disabled={loading}\r\n//               >\r\n//                 {loading ? (\r\n//                   <>\r\n//                     <Loader2 size={18} className=\"spinner\" />\r\n//                     Saving...\r\n//                   </>\r\n//                 ) : editId ? (\r\n//                   <>\r\n//                     <Save size={16} />\r\n//                     Update Product\r\n//                   </>\r\n//                 ) : (\r\n//                   <>\r\n//                     <PlusIcon size={16} />\r\n//                     Add Product\r\n//                   </>\r\n//                 )}\r\n//               </button>\r\n//               <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\r\n//                 Cancel\r\n//               </button>\r\n//             </div>\r\n//           </form>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Products Table */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <div>\r\n//             <h3>Products List</h3>\r\n//             <p className=\"table-subtitle\">\r\n//               Showing {currentItems.length} of {filteredItems.length} products\r\n//             </p>\r\n//           </div>\r\n//           <div className=\"table-actions\">\r\n//             <div className=\"table-checkbox\">\r\n//               <input\r\n//                 type=\"checkbox\"\r\n//                 checked={\r\n//                   selectedItems.length === filteredItems.length &&\r\n//                   filteredItems.length > 0\r\n//                 }\r\n//                 onChange={() => {\r\n//                   if (selectedItems.length === filteredItems.length)\r\n//                     setSelectedItems([]);\r\n//                   else setSelectedItems(filteredItems.map((x) => x._id));\r\n//                 }}\r\n//               />\r\n//               <span>Select All</span>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div className=\"table-responsive\">\r\n//           <table className=\"data-table\">\r\n//             <thead>\r\n//               <tr>\r\n//                 <th></th>\r\n//                 <th>#</th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Base Price</th>\r\n//                 <th>Profit/Loss</th>\r\n//                 <th>Sale Price</th>\r\n//                 <th>GST</th>\r\n//                 <th>Status</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         setSelectedItems((prev) =>\r\n//                           prev.includes(item._id)\r\n//                             ? prev.filter((x) => x !== item._id)\r\n//                             : [...prev, item._id]\r\n//                         )\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n//                   <td>\r\n//                     <div className=\"table-image\">\r\n//                       {item.image ? (\r\n//                         <img src={item.image} alt={item.name} />\r\n//                       ) : (\r\n//                         <div className=\"image-placeholder\">\r\n//                           <Image size={20} />\r\n//                         </div>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"product-info\">\r\n//                       <strong>{item.name}</strong>\r\n//                       {item.description && (\r\n//                         <small>{item.description.substring(0, 50)}...</small>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"category-info\">\r\n//                       <span className=\"category-badge\">\r\n//                         {item.category?.name || \"-\"}\r\n//                       </span>\r\n//                       {item.subcategory?.name && (\r\n//                         <small>{item.subcategory.name}</small>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"editable-field\">\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         value={\r\n//                           quickBasePrices[item._id] !== undefined\r\n//                             ? quickBasePrices[item._id]\r\n//                             : item.basePrice\r\n//                         }\r\n//                         onChange={(e) =>\r\n//                           setQuickBasePrices((p) => ({\r\n//                             ...p,\r\n//                             [item._id]: e.target.value,\r\n//                           }))\r\n//                         }\r\n//                         className=\"quick-input\"\r\n//                       />\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={() => updateBasePrice(item)}\r\n//                         title=\"Save\"\r\n//                       >\r\n//                         <CheckIcon size={14} />\r\n//                       </button>\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"editable-field\">\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         placeholder=\"Change\"\r\n//                         value={quickProfitLoss[item._id] ?? \"\"}\r\n//                         onChange={(e) =>\r\n//                           setQuickProfitLoss((p) => ({\r\n//                             ...p,\r\n//                             [item._id]: e.target.value,\r\n//                           }))\r\n//                         }\r\n//                         className=\"quick-input\"\r\n//                       />\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={() => updateProfitLoss(item)}\r\n//                         title=\"Save\"\r\n//                       >\r\n//                         <CheckIcon size={14} />\r\n//                       </button>\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <span className=\"price-badge\">\r\n//                       ₹{item.salePrice || \"0.00\"}\r\n//                     </span>\r\n//                   </td>\r\n//                   <td>\r\n//                     {item.gstPercent ? (\r\n//                       <span className=\"gst-badge\">{item.gstPercent}%</span>\r\n//                     ) : (\r\n//                       \"-\"\r\n//                     )}\r\n//                   </td>\r\n//                   <td>\r\n//                     <button\r\n//                       className={`status-badge ${item.status === \"active\" ? \"active\" : \"inactive\"\r\n//                         }`}\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? (\r\n//                         <>\r\n//                           <Eye size={12} /> Active\r\n//                         </>\r\n//                       ) : (\r\n//                         <>\r\n//                           <EyeOff size={12} /> Inactive\r\n//                         </>\r\n//                       )}\r\n//                     </button>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"action-buttons\">\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={() => handleEdit(item)}\r\n//                         title=\"Edit\"\r\n//                       >\r\n//                         <Edit size={16} />\r\n//                       </button>\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={async () => {\r\n//                           await axios.post(`${API_URL}/copy/${item._id}`);\r\n//                           showAlert(\"✅ Product copied\", \"success\");\r\n//                           fetchItems();\r\n//                         }}\r\n//                         title=\"Duplicate\"\r\n//                       >\r\n//                         <Copy size={16} />\r\n//                       </button>\r\n//                       <button\r\n//                         className=\"btn-icon-small danger\"\r\n//                         onClick={() => handleDelete(item._id)}\r\n//                         title=\"Delete\"\r\n//                       >\r\n//                         <TrashIcon size={16} />\r\n//                       </button>\r\n//                     </div>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         </div>\r\n\r\n//         {/* Pagination */}\r\n//         {totalPages > 1 && (\r\n//           <div className=\"pagination\">\r\n//             <button\r\n//               className=\"pagination-btn\"\r\n//               disabled={currentPage === 1}\r\n//               onClick={() => setCurrentPage((p) => p - 1)}\r\n//             >\r\n//               <ChevronLeftIcon size={16} /> Previous\r\n//             </button>\r\n//             <div className=\"pagination-pages\">\r\n//               {Array.from({ length: Math.min(totalPages, 5) }, (_, i) => {\r\n//                 let pageNum;\r\n//                 if (totalPages <= 5) {\r\n//                   pageNum = i + 1;\r\n//                 } else if (currentPage <= 3) {\r\n//                   pageNum = i + 1;\r\n//                 } else if (currentPage >= totalPages - 2) {\r\n//                   pageNum = totalPages - 4 + i;\r\n//                 } else {\r\n//                   pageNum = currentPage - 2 + i;\r\n//                 }\r\n\r\n//                 if (pageNum < 1 || pageNum > totalPages) return null;\r\n\r\n//                 return (\r\n//                   <button\r\n//                     key={i}\r\n//                     className={`pagination-btn ${currentPage === pageNum ? \"active\" : \"\"\r\n//                       }`}\r\n//                     onClick={() => setCurrentPage(pageNum)}\r\n//                   >\r\n//                     {pageNum}\r\n//                   </button>\r\n//                 );\r\n//               })}\r\n//               {totalPages > 5 && <span className=\"pagination-dots\">...</span>}\r\n//             </div>\r\n//             <button\r\n//               className=\"pagination-btn\"\r\n//               disabled={currentPage === totalPages}\r\n//               onClick={() => setCurrentPage((p) => p + 1)}\r\n//             >\r\n//               Next <ChevronRightIcon size={16} />\r\n//             </button>\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       {/* Modals */}\r\n//       {showCategoryModal && (\r\n//         <div className=\"modal-overlay\" onClick={() => setShowCategoryModal(false)}>\r\n//           <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n//             <div className=\"modal-header\">\r\n//               <h3>Add New Category</h3>\r\n//               <button\r\n//                 className=\"btn-icon\"\r\n//                 onClick={() => setShowCategoryModal(false)}\r\n//               >\r\n//                 <XMarkIcon size={20} />\r\n//               </button>\r\n//             </div>\r\n//             <div className=\"modal-body\">\r\n//               <div className=\"form-group\">\r\n//                 <label>Category Name *</label>\r\n//                 <input\r\n//                   type=\"text\"\r\n//                   value={newCategoryName}\r\n//                   onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"Enter category name\"\r\n//                   autoFocus\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//             <div className=\"modal-footer\">\r\n//               <button\r\n//                 className=\"btn btn-secondary\"\r\n//                 onClick={() => setShowCategoryModal(false)}\r\n//               >\r\n//                 Cancel\r\n//               </button>\r\n//               <button\r\n//                 className=\"btn btn-primary\"\r\n//                 onClick={handleAddCategory}\r\n//                 disabled={categoryLoading || !newCategoryName.trim()}\r\n//               >\r\n//                 {categoryLoading ? (\r\n//                   <>\r\n//                     <Loader2 size={16} className=\"spinner\" />\r\n//                     Saving...\r\n//                   </>\r\n//                 ) : (\r\n//                   <>\r\n//                     <PlusIcon size={16} />\r\n//                     Add Category\r\n//                   </>\r\n//                 )}\r\n//               </button>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n\r\n//       {alertBox.show && (\r\n//         <div className={`alert alert-${alertBox.type}`}>\r\n//           <div className=\"alert-content\">\r\n//             {alertBox.type === \"success\" && <CheckCircleIcon size={20} className=\"alert-icon\" />}\r\n//             {alertBox.type === \"error\" && <AlertCircle size={20} className=\"alert-icon\" />}\r\n//             {alertBox.type === \"warning\" && <Info size={20} className=\"alert-icon\" />}\r\n//             <span>{alertBox.message}</span>\r\n//           </div>\r\n//           <button\r\n//             className=\"alert-close\"\r\n//             onClick={() => setAlertBox({ ...alertBox, show: false })}\r\n//           >\r\n//             <XMarkIcon size={16} />\r\n//           </button>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import React, { useEffect, useState } from \"react\";\r\n// import axios from \"axios\";\r\n// import \"./PriceList.css\";\r\n// import {\r\n//   Plus,\r\n//   Edit,\r\n//   Trash2,\r\n//   Copy,\r\n//   Search,\r\n//   Filter,\r\n//   Check,\r\n//   X,\r\n//   ChevronLeft,\r\n//   ChevronRight,\r\n//   Download,\r\n//   Upload,\r\n//   CheckSquare,\r\n//   Package,\r\n//   CheckCircle,\r\n//   Tag,\r\n//   Image,\r\n//   Loader2,\r\n//   AlertCircle,\r\n//   Info,\r\n//   Save,\r\n//   Edit2,\r\n//   Eye,\r\n//   EyeOff,\r\n//   Calendar,\r\n//   Layers,\r\n//   Scale,\r\n//   FileSpreadsheet,\r\n//   Database,\r\n//   Box,\r\n//   ShoppingCart,\r\n//   TrendingUp,\r\n//   TrendingDown,\r\n//   Percent,\r\n//   Hash,\r\n//   Receipt,\r\n// } from 'lucide-react';\r\n\r\n// const API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n//   const [search, setSearch] = useState(\"\");\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     subcategory: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     profitLoss: \"\",\r\n//     gstPercent: \"\",\r\n//     hsnCode: \"\",\r\n//     taxType: \"cgst_sgst\",\r\n//     weightValue: \"\",\r\n//     weightUnit: \"kg\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//     status: \"inactive\",\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [showForm, setShowForm] = useState(false);\r\n//   const [showModal, setShowModal] = useState(false);\r\n//   const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   const [filterCategory, setFilterCategory] = useState(\"\");\r\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n//   const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n//   const [quickBasePrices, setQuickBasePrices] = useState({});\r\n//   const [quickProfitLoss, setQuickProfitLoss] = useState({});\r\n\r\n//   const [sortOrder, setSortOrder] = useState(\"\");\r\n//   const [showCategoryModal, setShowCategoryModal] = useState(false);\r\n//   const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n//   const [categoryLoading, setCategoryLoading] = useState(false);\r\n//   const [alertBox, setAlertBox] = useState({\r\n//     show: false,\r\n//     message: \"\",\r\n//     type: \"success\",\r\n//   });\r\n\r\n//   useEffect(() => {\r\n//     if (alertBox.show) {\r\n//       const timer = setTimeout(() => {\r\n//         setAlertBox((prev) => ({ ...prev, show: false }));\r\n//       }, 2500);\r\n//       return () => clearTimeout(timer);\r\n//     }\r\n//   }, [alertBox.show]);\r\n\r\n//   useEffect(() => {\r\n//     fetchCategories();\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (categories.length > 0) fetchItems();\r\n//   }, [categories]);\r\n\r\n//   useEffect(() => {\r\n//     if (!filterCategory) {\r\n//       setFilterSubs([]);\r\n//       setFilterSubcategory(\"\");\r\n//       return;\r\n//     }\r\n//     const cat = categories.find((c) => c._id === filterCategory);\r\n//     setFilterSubs(cat?.subcategories || []);\r\n//     setFilterSubcategory(\"\");\r\n//   }, [filterCategory, categories]);\r\n\r\n//   useEffect(() => {\r\n//     if (!form.category) {\r\n//       setSubcategories([]);\r\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//       return;\r\n//     }\r\n//     const cat = categories.find((c) => c._id === form.category);\r\n//     setSubcategories(cat?.subcategories || []);\r\n//   }, [form.category, categories]);\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data?.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error\", err);\r\n//       showAlert(\"Could not fetch categories\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data?.success) {\r\n//         const raw = res.data.data || [];\r\n//         const flat = [];\r\n//         raw.forEach((cat) => {\r\n//           cat.subcategories.forEach((sub) => {\r\n//             sub.products.forEach((p) => {\r\n//               flat.push({\r\n//                 ...p,\r\n//                 category: {\r\n//                   _id: cat.id,\r\n//                   name: cat.name,\r\n//                   image: cat.image,\r\n//                 },\r\n//                 subcategory: {\r\n//                   _id: sub.id,\r\n//                   name: sub.name,\r\n//                   image: sub.image,\r\n//                 },\r\n//               });\r\n//             });\r\n//           });\r\n//         });\r\n//         flat.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n//         setItems(flat);\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error\", err);\r\n//       showAlert(\"Could not fetch items\", \"error\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files?.length) {\r\n//       setForm((p) => ({ ...p, file: files[0] }));\r\n//     } else {\r\n//       setForm((p) => ({ ...p, [name]: value }));\r\n//     }\r\n//   };\r\n\r\n//   const showAlert = (message, type = \"success\") => {\r\n//     setAlertBox({ show: true, message, type });\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     const nameExists = items.some(\r\n//       (p) =>\r\n//         p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\r\n//         p._id !== editId\r\n//     );\r\n\r\n//     if (nameExists) {\r\n//       showAlert(\"❌ Product name already exists!\", \"error\");\r\n//       setLoading(false);\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         showAlert(\"Name, category & base price are required\", \"error\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", form.name.trim());\r\n//       fd.append(\"category\", form.category);\r\n\r\n//       if (form.subcategory) {\r\n//         const sub = subcategories.find((s) => s._id === form.subcategory);\r\n//         if (sub) {\r\n//           fd.append(\r\n//             \"subcategory\",\r\n//             JSON.stringify({\r\n//               id: sub._id,\r\n//               name: sub.name,\r\n//               image: sub.image || \"\"\r\n//             })\r\n//           );\r\n//         }\r\n//       } else {\r\n//         fd.append(\"subcategory\", JSON.stringify(null));\r\n//       }\r\n\r\n//       fd.append(\"basePrice\", form.basePrice);\r\n//       fd.append(\"profitLoss\", form.profitLoss || 0);\r\n\r\n//       const weightValue =\r\n//         form.weightValue && Number(form.weightValue) > 0\r\n//           ? Number(form.weightValue)\r\n//           : 1;\r\n\r\n//       fd.append(\r\n//         \"weight\",\r\n//         JSON.stringify({\r\n//           value: weightValue,\r\n//           unit: form.weightUnit || \"kg\",\r\n//         })\r\n//       );\r\n\r\n//       fd.append(\"gstPercent\", form.gstPercent || 0);\r\n//       fd.append(\"hsnCode\", form.hsnCode || \"\");\r\n//       fd.append(\"taxType\", form.taxType);\r\n\r\n//       if (form.description) fd.append(\"description\", form.description);\r\n//       if (form.validTill) fd.append(\"validTill\", form.validTill);\r\n//       fd.append(\"status\", form.status);\r\n//       if (form.file) fd.append(\"file\", form.file);\r\n\r\n//       if (editId) {\r\n//         await axios.put(`${API_URL}/${editId}`, fd);\r\n//         showAlert(\"✅ Product updated successfully\", \"success\");\r\n//       } else {\r\n//         await axios.post(API_URL, fd);\r\n//         showAlert(\"✅ Product added successfully\", \"success\");\r\n//       }\r\n\r\n//       await fetchItems();\r\n//       resetForm();\r\n//     } catch (err) {\r\n//       console.error(\"Save error\", err);\r\n//       if (err.response?.data?.message === \"Product name already exists\") {\r\n//         showAlert(\"❌ Product name already exists!\", \"error\");\r\n//       } else {\r\n//         showAlert(\"❌ Save failed!\", \"error\");\r\n//       }\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const resetForm = () => {\r\n//     setForm({\r\n//       name: \"\",\r\n//       category: \"\",\r\n//       subcategory: \"\",\r\n//       description: \"\",\r\n//       basePrice: \"\",\r\n//       profitLoss: \"\",\r\n//       validTill: \"\",\r\n//       weightValue: \"\",\r\n//       weightUnit: \"kg\",\r\n//       file: null,\r\n//       status: \"inactive\",\r\n//     });\r\n//     setEditId(null);\r\n//     setShowModal(false);\r\n//     setShowForm(false);\r\n//   };\r\n\r\n//   const handleAddCategory = async () => {\r\n//     if (!newCategoryName.trim()) {\r\n//       showAlert(\"Category name is required\", \"error\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setCategoryLoading(true);\r\n//       const res = await axios.post(CATEGORY_URL, {\r\n//         name: newCategoryName.trim(),\r\n//       });\r\n\r\n//       if (res.data?.success) {\r\n//         showAlert(\"✅ Category added successfully\", \"success\");\r\n//         setNewCategoryName(\"\");\r\n//         setShowCategoryModal(false);\r\n//         await fetchCategories();\r\n//       } else {\r\n//         showAlert(\"❌ Category add failed\", \"error\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Add category error\", err);\r\n//       showAlert(\"❌ Error while adding category\", \"error\");\r\n//     } finally {\r\n//       setCategoryLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id || \"\",\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice || \"\",\r\n//       profitLoss: item.profitLoss || 0,\r\n//       weightValue: item.weight?.value || \"\",\r\n//       weightUnit: item.weight?.unit || \"kg\",\r\n//       gstPercent: item.gstPercent || \"\",\r\n//       hsnCode: item.hsnCode || \"\",\r\n//       taxType: item.taxType || \"cgst_sgst\",\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//       status: item.status || \"inactive\",\r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n//     setEditId(item._id);\r\n//     setShowModal(true);\r\n//     setActiveMenu(null);\r\n//   };\r\n\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete this item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       setItems((prev) => prev.filter((x) => x._id !== id));\r\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n//       setActiveMenu(null);\r\n//       showAlert(\"✅ Product deleted successfully\", \"success\");\r\n//     } catch (err) {\r\n//       console.error(\"Delete error\", err);\r\n//       showAlert(\"❌ Delete failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const handleStatusToggle = async (item) => {\r\n//     try {\r\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       setItems((prev) =>\r\n//         prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\r\n//       );\r\n//       showAlert(`✅ Status updated to ${newStatus}`, \"success\");\r\n//     } catch (err) {\r\n//       console.error(\"Status toggle error\", err);\r\n//       showAlert(\"❌ Status update failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const updateLocalItemField = (id, key, value) => {\r\n//     setItems((prev) =>\r\n//       prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\r\n//     );\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     if (!selectedItems.length) {\r\n//       showAlert(\"No items selected\", \"warning\");\r\n//       return;\r\n//     }\r\n\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         basePrice: Number(x.basePrice),\r\n//         profitLoss: Number(x.profitLoss),\r\n//         gstPercent: Number(x.gstPercent || 0),\r\n//         hsnCode: x.hsnCode || \"\",\r\n//         taxType: x.taxType || \"cgst_sgst\",\r\n//         status: x.status,\r\n//       }));\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       showAlert(\"✅ Bulk save successful\", \"success\");\r\n//       setBulkMode(false);\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk save error\", err);\r\n//       showAlert(\"❌ Bulk save failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkDelete = async () => {\r\n//     if (!selectedItems.length) {\r\n//       showAlert(\"No items selected\", \"warning\");\r\n//       return;\r\n//     }\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await Promise.all(\r\n//         selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\r\n//       );\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//       showAlert(\"✅ Bulk delete successful\", \"success\");\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       showAlert(\"❌ Bulk delete failed\", \"error\");\r\n//     }\r\n//   };\r\n\r\n//   const updateBasePrice = async (item) => {\r\n//     const newBase = Number(quickBasePrices[item._id] ?? item.basePrice);\r\n//     if (isNaN(newBase)) {\r\n//       showAlert(\"Invalid Base Price\", \"error\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", item.name);\r\n//       fd.append(\"category\", item.category?._id);\r\n\r\n//       if (item.subcategory) {\r\n//         fd.append(\"subcategory\", JSON.stringify(item.subcategory));\r\n//       }\r\n\r\n//       fd.append(\"description\", item.description || \"\");\r\n//       fd.append(\"basePrice\", newBase);\r\n//       fd.append(\"profitLoss\", item.profitLoss);\r\n//       fd.append(\"status\", item.status);\r\n//       fd.append(\"gstPercent\", item.gstPercent || 0);\r\n//       fd.append(\"hsnCode\", item.hsnCode || \"\");\r\n//       fd.append(\"taxType\", item.taxType || \"cgst_sgst\");\r\n//       fd.append(\"weight\", JSON.stringify(item.weight));\r\n\r\n//       const res = await axios.put(`${API_URL}/${item._id}`, fd);\r\n//       if (res.data.success) {\r\n//         await fetchItems();\r\n//         setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\r\n//         showAlert(\"✅ Base price updated\", \"success\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       showAlert(\"❌ Update failed\", \"error\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const updateProfitLoss = async (item) => {\r\n//     const diff = Number(quickProfitLoss[item._id] ?? 0);\r\n//     if (isNaN(diff)) {\r\n//       showAlert(\"Invalid Profit/Loss\", \"error\");\r\n//       return;\r\n//     }\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, { diff });\r\n//       if (res.data.success) {\r\n//         await fetchItems();\r\n//         setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\r\n//         showAlert(\"✅ Profit/Loss updated\", \"success\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       showAlert(\"❌ Update failed\", \"error\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = search.toLowerCase();\r\n//     const matchText =\r\n//       (item.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n//     const matchCategory =\r\n//       !filterCategory || item.category?._id === filterCategory;\r\n//     const matchSub =\r\n//       !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n//     return matchText && matchCategory && matchSub;\r\n//   });\r\n\r\n//   let sortedItems = [...filteredItems];\r\n//   if (sortOrder === \"low\") {\r\n//     sortedItems.sort(\r\n//       (a, b) => (Number(a.salePrice) || 0) - (Number(b.salePrice) || 0)\r\n//     );\r\n//   } else if (sortOrder === \"high\") {\r\n//     sortedItems.sort(\r\n//       (a, b) => (Number(b.salePrice) || 0) - (Number(a.salePrice) || 0)\r\n//     );\r\n//   }\r\n\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = sortedItems.slice(\r\n//     indexOfLast - itemsPerPage,\r\n//     indexOfLast\r\n//   );\r\n//   const totalPages = Math.max(1, Math.ceil(sortedItems.length / itemsPerPage));\r\n\r\n//   return (\r\n//     <div className=\"dashboard-container\">\r\n//       {/* Header */}\r\n//       <div className=\"dashboard-header\">\r\n//         <div className=\"header-content\">\r\n//           <h1 className=\"header-title\">Product Management</h1>\r\n//           <p className=\"header-subtitle\">\r\n//             Manage your products, categories, and inventory\r\n//           </p>\r\n//         </div>\r\n//         <div className=\"header-actions\">\r\n//           <button\r\n//             className=\"btn btn-primary\"\r\n//             onClick={() => {\r\n//               setShowForm(!showForm);\r\n//               setEditId(null);\r\n//             }}\r\n//           >\r\n//             <Plus size={18} />\r\n//             {showForm ? \"Close Form\" : \"Add Product\"}\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Stats Cards */}\r\n//       <div className=\"stats-grid\">\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-blue\">\r\n//             <Package size={24} />\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">{items.length}</h3>\r\n//             <p className=\"stat-label\">Total Products</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-green\">\r\n//             <CheckCircle size={24} />\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">\r\n//               {items.filter((x) => x.status === \"active\").length}\r\n//             </h3>\r\n//             <p className=\"stat-label\">Active Products</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-orange\">\r\n//             <Layers size={24} />\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">{categories.length}</h3>\r\n//             <p className=\"stat-label\">Categories</p>\r\n//           </div>\r\n//         </div>\r\n//         <div className=\"stat-card\">\r\n//           <div className=\"stat-icon bg-purple\">\r\n//             <Database size={24} />\r\n//           </div>\r\n//           <div className=\"stat-content\">\r\n//             <h3 className=\"stat-value\">{filteredItems.length}</h3>\r\n//             <p className=\"stat-label\">Filtered Items</p>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Search and Filters */}\r\n//       <div className=\"search-filters-card\">\r\n//         <div className=\"search-section\">\r\n//           <div className=\"search-box\">\r\n//             <Search size={20} className=\"search-icon\" />\r\n//             <input\r\n//               type=\"text\"\r\n//               placeholder=\"Search products, categories...\"\r\n//               value={search}\r\n//               onChange={(e) => {\r\n//                 setSearch(e.target.value);\r\n//                 setCurrentPage(1);\r\n//               }}\r\n//               className=\"search-input\"\r\n//             />\r\n//           </div>\r\n//           <div className=\"filters-row\">\r\n//             <div className=\"filter-group\">\r\n//               <label>Category</label>\r\n//               <select\r\n//                 value={filterCategory}\r\n//                 onChange={(e) => setFilterCategory(e.target.value)}\r\n//                 className=\"filter-select\"\r\n//               >\r\n//                 <option value=\"\">All Categories</option>\r\n//                 {categories.map((c) => (\r\n//                   <option key={c._id} value={c._id}>\r\n//                     {c.name}\r\n//                   </option>\r\n//                 ))}\r\n//               </select>\r\n//             </div>\r\n//             <div className=\"filter-group\">\r\n//               <label>Subcategory</label>\r\n//               <select\r\n//                 value={filterSubcategory}\r\n//                 onChange={(e) => setFilterSubcategory(e.target.value)}\r\n//                 disabled={!filterSubs.length}\r\n//                 className=\"filter-select\"\r\n//               >\r\n//                 <option value=\"\">All Subcategories</option>\r\n//                 {filterSubs.map((s) => (\r\n//                   <option key={s._id} value={s._id}>\r\n//                     {s.name}\r\n//                   </option>\r\n//                 ))}\r\n//               </select>\r\n//             </div>\r\n//             <div className=\"filter-group\">\r\n//               <label>Sort By</label>\r\n//               <select\r\n//                 value={sortOrder}\r\n//                 onChange={(e) => setSortOrder(e.target.value)}\r\n//                 className=\"filter-select\"\r\n//               >\r\n//                 <option value=\"\">Default</option>\r\n//                 <option value=\"low\">Price: Low to High</option>\r\n//                 <option value=\"high\">Price: High to Low</option>\r\n//               </select>\r\n//             </div>\r\n//             <div className=\"filter-group\">\r\n//               <label>Actions</label>\r\n//               <div className=\"action-buttons\">\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\r\n//                 >\r\n//                   <Download size={16} /> Export CSV\r\n//                 </button>\r\n//                 <label className=\"btn btn-secondary\">\r\n//                   <input\r\n//                     type=\"file\"\r\n//                     accept=\".csv\"\r\n//                     style={{ display: \"none\" }}\r\n//                     onChange={async (e) => {\r\n//                       try {\r\n//                         const fd = new FormData();\r\n//                         fd.append(\"file\", e.target.files[0]);\r\n//                         await axios.post(`${API_URL}/import`, fd);\r\n//                         showAlert(\"✅ Imported successfully\", \"success\");\r\n//                         fetchItems();\r\n//                       } catch (err) {\r\n//                         showAlert(\"❌ Import failed\", \"error\");\r\n//                       }\r\n//                     }}\r\n//                   />\r\n//                   <Upload size={16} /> Import CSV\r\n//                 </label>\r\n//               </div>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {/* Bulk Actions */}\r\n//       {selectedItems.length > 0 && (\r\n//         <div className=\"bulk-actions-card\">\r\n//           <div className=\"bulk-header\">\r\n//             <h3>\r\n//               <CheckSquare size={20} />\r\n//               {selectedItems.length} item{selectedItems.length > 1 ? \"s\" : \"\"}{\" \"}\r\n//               selected\r\n//             </h3>\r\n//             <div className=\"bulk-buttons\">\r\n//               {!bulkMode ? (\r\n//                 <>\r\n//                   <button\r\n//                     className=\"btn btn-danger\"\r\n//                     onClick={handleBulkDelete}\r\n//                   >\r\n//                     <Trash2 size={16} /> Bulk Delete\r\n//                   </button>\r\n//                   <button\r\n//                     className=\"btn btn-primary\"\r\n//                     onClick={() => setBulkMode(true)}\r\n//                   >\r\n//                     <Edit size={16} /> Bulk Edit\r\n//                   </button>\r\n//                 </>\r\n//               ) : (\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={() => setBulkMode(false)}\r\n//                 >\r\n//                   <X size={16} /> Cancel\r\n//                 </button>\r\n//               )}\r\n//             </div>\r\n//           </div>\r\n\r\n//           {bulkMode && (\r\n//             <div className=\"bulk-edit-panel\">\r\n//               <h4>Bulk Edit Products</h4>\r\n//               <div className=\"bulk-grid\">\r\n//                 {items\r\n//                   .filter((item) => selectedItems.includes(item._id))\r\n//                   .map((item) => (\r\n//                     <div key={item._id} className=\"bulk-item-card\">\r\n//                       <h5>{item.name}</h5>\r\n//                       <div className=\"bulk-fields\">\r\n//                         <div className=\"form-group\">\r\n//                           <label>Base Price</label>\r\n//                           <input\r\n//                             type=\"number\"\r\n//                             value={item.basePrice}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"basePrice\",\r\n//                                 Number(e.target.value)\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>Profit/Loss</label>\r\n//                           <input\r\n//                             type=\"number\"\r\n//                             value={item.profitLoss}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"profitLoss\",\r\n//                                 Number(e.target.value)\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>GST %</label>\r\n//                           <input\r\n//                             type=\"number\"\r\n//                             value={item.gstPercent || \"\"}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"gstPercent\",\r\n//                                 Number(e.target.value)\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>HSN Code</label>\r\n//                           <input\r\n//                             value={item.hsnCode || \"\"}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"hsnCode\",\r\n//                                 e.target.value\r\n//                               )\r\n//                             }\r\n//                             className=\"form-input\"\r\n//                           />\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>Tax Type</label>\r\n//                           <select\r\n//                             value={item.taxType || \"cgst_sgst\"}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"taxType\",\r\n//                                 e.target.value\r\n//                               )\r\n//                             }\r\n//                             className=\"form-select\"\r\n//                           >\r\n//                             <option value=\"cgst_sgst\">CGST + SGST</option>\r\n//                             <option value=\"igst\">IGST</option>\r\n//                           </select>\r\n//                         </div>\r\n//                         <div className=\"form-group\">\r\n//                           <label>Status</label>\r\n//                           <select\r\n//                             value={item.status}\r\n//                             onChange={(e) =>\r\n//                               updateLocalItemField(\r\n//                                 item._id,\r\n//                                 \"status\",\r\n//                                 e.target.value\r\n//                               )\r\n//                             }\r\n//                             className=\"form-select\"\r\n//                           >\r\n//                             <option value=\"active\">Active</option>\r\n//                             <option value=\"inactive\">Inactive</option>\r\n//                           </select>\r\n//                         </div>\r\n//                       </div>\r\n//                     </div>\r\n//                   ))}\r\n//               </div>\r\n//               <div className=\"bulk-actions\">\r\n//                 <button className=\"btn btn-primary\" onClick={handleBulkSave}>\r\n//                   <Save size={16} /> Save All Changes\r\n//                 </button>\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={async () => {\r\n//                     if (!selectedItems.length) {\r\n//                       showAlert(\"No items selected\", \"warning\");\r\n//                       return;\r\n//                     }\r\n//                     for (let id of selectedItems)\r\n//                       await axios.post(`${API_URL}/copy/${id}`);\r\n//                     showAlert(\"✅ Selected items copied\", \"success\");\r\n//                     fetchItems();\r\n//                   }}\r\n//                 >\r\n//                   <Copy size={16} /> Copy Selected\r\n//                 </button>\r\n//                 <button\r\n//                   className=\"btn btn-secondary\"\r\n//                   onClick={async () => {\r\n//                     if (!selectedItems.length) {\r\n//                       showAlert(\"No items selected\", \"warning\");\r\n//                       return;\r\n//                     }\r\n//                     const res = await axios.post(\r\n//                       `${API_URL}/export-selected`,\r\n//                       { ids: selectedItems },\r\n//                       { responseType: \"blob\" }\r\n//                     );\r\n//                     const url = window.URL.createObjectURL(new Blob([res.data]));\r\n//                     const a = document.createElement(\"a\");\r\n//                     a.href = url;\r\n//                     a.download = \"selected.csv\";\r\n//                     a.click();\r\n//                   }}\r\n//                 >\r\n//                   <FileSpreadsheet size={16} /> Export Selected\r\n//                 </button>\r\n//               </div>\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Add/Edit Form */}\r\n//       {showForm && (\r\n//         <div className=\"form-card\">\r\n//           <div className=\"form-header\">\r\n//             <h3>\r\n//               <Edit2 size={20} />\r\n//               {editId ? \"Edit Product\" : \"Add New Product\"}\r\n//             </h3>\r\n//             <button className=\"btn-icon\" onClick={resetForm}>\r\n//               <X size={20} />\r\n//             </button>\r\n//           </div>\r\n//           <form onSubmit={handleSubmit}>\r\n//             <div className=\"form-grid\">\r\n//               <div className=\"form-group\">\r\n//                 <label>Product Name *</label>\r\n//                 <input\r\n//                   type=\"text\"\r\n//                   name=\"name\"\r\n//                   value={form.name}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   required\r\n//                   placeholder=\"Enter product name\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Category *</label>\r\n//                 <div className=\"input-with-button\">\r\n//                   <select\r\n//                     name=\"category\"\r\n//                     value={form.category}\r\n//                     onChange={handleChange}\r\n//                     className=\"form-select\"\r\n//                     required\r\n//                   >\r\n//                     <option value=\"\">Select Category</option>\r\n//                     {categories.map((c) => (\r\n//                       <option key={c._id} value={c._id}>\r\n//                         {c.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n//                   <button\r\n//                     type=\"button\"\r\n//                     onClick={() => setShowCategoryModal(true)}\r\n//                     className=\"btn-icon-primary\"\r\n//                   >\r\n//                     <Plus size={18} />\r\n//                   </button>\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Subcategory</label>\r\n//                 <select\r\n//                   name=\"subcategory\"\r\n//                   value={form.subcategory}\r\n//                   onChange={handleChange}\r\n//                   disabled={!subcategories.length}\r\n//                   className=\"form-select\"\r\n//                 >\r\n//                   <option value=\"\">Select Subcategory</option>\r\n//                   {subcategories.map((s) => (\r\n//                     <option key={s._id} value={s._id}>\r\n//                       {s.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Base Price *</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"basePrice\"\r\n//                   value={form.basePrice}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   required\r\n//                   placeholder=\"0.00\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Weight</label>\r\n//                 <div className=\"input-with-button\">\r\n//                   <input\r\n//                     type=\"number\"\r\n//                     name=\"weightValue\"\r\n//                     value={form.weightValue}\r\n//                     onChange={handleChange}\r\n//                     placeholder=\"Value\"\r\n//                     className=\"form-input\"\r\n//                     style={{ flex: 1 }}\r\n//                   />\r\n//                   <select\r\n//                     name=\"weightUnit\"\r\n//                     value={form.weightUnit}\r\n//                     onChange={handleChange}\r\n//                     className=\"form-select\"\r\n//                     style={{ width: \"100px\" }}\r\n//                   >\r\n//                     <option value=\"kg\">Kg</option>\r\n//                     <option value=\"gm\">Gram</option>\r\n//                     <option value=\"ltr\">Litre</option>\r\n//                     <option value=\"ml\">ML</option>\r\n//                     <option value=\"pcs\">Pcs</option>\r\n//                   </select>\r\n//                 </div>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Profit/Loss</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"profitLoss\"\r\n//                   value={form.profitLoss}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"0\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>GST %</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"gstPercent\"\r\n//                   value={form.gstPercent}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"e.g. 5, 12, 18\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>HSN Code</label>\r\n//                 <input\r\n//                   name=\"hsnCode\"\r\n//                   value={form.hsnCode}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"Enter HSN\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Tax Type</label>\r\n//                 <select\r\n//                   name=\"taxType\"\r\n//                   value={form.taxType}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-select\"\r\n//                 >\r\n//                   <option value=\"cgst_sgst\">CGST + SGST</option>\r\n//                   <option value=\"igst\">IGST</option>\r\n//                 </select>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Valid Till</label>\r\n//                 <input\r\n//                   type=\"date\"\r\n//                   name=\"validTill\"\r\n//                   value={form.validTill}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                 />\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Status</label>\r\n//                 <select\r\n//                   name=\"status\"\r\n//                   value={form.status}\r\n//                   onChange={handleChange}\r\n//                   className=\"form-select\"\r\n//                 >\r\n//                   <option value=\"active\">Active</option>\r\n//                   <option value=\"inactive\">Inactive</option>\r\n//                 </select>\r\n//               </div>\r\n//               <div className=\"form-group\">\r\n//                 <label>Image</label>\r\n//                 <input\r\n//                   type=\"file\"\r\n//                   accept=\"image/*\"\r\n//                   onChange={handleChange}\r\n//                   className=\"form-input\"\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//             <div className=\"form-group\">\r\n//               <label>Description</label>\r\n//               <textarea\r\n//                 name=\"description\"\r\n//                 value={form.description}\r\n//                 onChange={handleChange}\r\n//                 className=\"form-textarea\"\r\n//                 rows=\"3\"\r\n//                 placeholder=\"Product description...\"\r\n//               ></textarea>\r\n//             </div>\r\n//             <div className=\"form-actions\">\r\n//               <button\r\n//                 type=\"submit\"\r\n//                 className=\"btn btn-primary\"\r\n//                 disabled={loading}\r\n//               >\r\n//                 {loading ? (\r\n//                   <>\r\n//                     <Loader2 size={18} className=\"spinner\" />\r\n//                     Saving...\r\n//                   </>\r\n//                 ) : editId ? (\r\n//                   <>\r\n//                     <Save size={16} />\r\n//                     Update Product\r\n//                   </>\r\n//                 ) : (\r\n//                   <>\r\n//                     <Plus size={16} />\r\n//                     Add Product\r\n//                   </>\r\n//                 )}\r\n//               </button>\r\n//               <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\r\n//                 Cancel\r\n//               </button>\r\n//             </div>\r\n//           </form>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Products Table */}\r\n//       <div className=\"table-card\">\r\n//         <div className=\"table-header\">\r\n//           <div>\r\n//             <h3>Products List</h3>\r\n//             <p className=\"table-subtitle\">\r\n//               Showing {currentItems.length} of {filteredItems.length} products\r\n//             </p>\r\n//           </div>\r\n//           <div className=\"table-actions\">\r\n//             <div className=\"table-checkbox\">\r\n//               <input\r\n//                 type=\"checkbox\"\r\n//                 checked={\r\n//                   selectedItems.length === filteredItems.length &&\r\n//                   filteredItems.length > 0\r\n//                 }\r\n//                 onChange={() => {\r\n//                   if (selectedItems.length === filteredItems.length)\r\n//                     setSelectedItems([]);\r\n//                   else setSelectedItems(filteredItems.map((x) => x._id));\r\n//                 }}\r\n//               />\r\n//               <span>Select All</span>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n\r\n//         <div className=\"table-responsive\">\r\n//           <table className=\"data-table\">\r\n//             <thead>\r\n//               <tr>\r\n//                 <th></th>\r\n//                 <th>#</th>\r\n//                 <th>Image</th>\r\n//                 <th>Name</th>\r\n//                 <th>Category</th>\r\n//                 <th>Base Price</th>\r\n//                 <th>Weight</th>\r\n//                 <th>Profit/Loss</th>\r\n//                 <th>Sale Price</th>\r\n//                 <th>HSN</th>\r\n//                 <th>GST</th>\r\n//                 <th>Price Lock</th>\r\n//                 <th>Teji/Maddi</th>\r\n//                 <th>Status</th>\r\n//                 <th>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id}>\r\n//                   <td>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         setSelectedItems((prev) =>\r\n//                           prev.includes(item._id)\r\n//                             ? prev.filter((x) => x !== item._id)\r\n//                             : [...prev, item._id]\r\n//                         )\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n//                   <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n//                   <td>\r\n//                     <div className=\"table-image\">\r\n//                       {item.image ? (\r\n//                         <img src={item.image} alt={item.name} />\r\n//                       ) : (\r\n//                         <div className=\"image-placeholder\">\r\n//                           <Image size={20} />\r\n//                         </div>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"product-info\">\r\n//                       <strong>{item.name}</strong>\r\n//                       {item.description && (\r\n//                         <small>{item.description.substring(0, 50)}...</small>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"category-info\">\r\n//                       <span className=\"category-badge\">\r\n//                         {item.category?.name || \"-\"}\r\n//                       </span>\r\n//                       {item.subcategory?.name && (\r\n//                         <small>{item.subcategory.name}</small>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"editable-field\">\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         value={\r\n//                           quickBasePrices[item._id] !== undefined\r\n//                             ? quickBasePrices[item._id]\r\n//                             : item.basePrice\r\n//                         }\r\n//                         onChange={(e) =>\r\n//                           setQuickBasePrices((p) => ({\r\n//                             ...p,\r\n//                             [item._id]: e.target.value,\r\n//                           }))\r\n//                         }\r\n//                         className=\"quick-input\"\r\n//                       />\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={() => updateBasePrice(item)}\r\n//                         title=\"Save\"\r\n//                       >\r\n//                         <Check size={14} />\r\n//                       </button>\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"weight-info\">\r\n//                       <Scale size={14} style={{ marginRight: 4 }} />\r\n//                       {item.weight\r\n//                         ? `${item.weight.value} ${item.weight.unit}`\r\n//                         : \"1 kg\"}\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"editable-field\">\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         placeholder=\"Change\"\r\n//                         value={quickProfitLoss[item._id] ?? \"\"}\r\n//                         onChange={(e) =>\r\n//                           setQuickProfitLoss((p) => ({\r\n//                             ...p,\r\n//                             [item._id]: e.target.value,\r\n//                           }))\r\n//                         }\r\n//                         className=\"quick-input\"\r\n//                       />\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={() => updateProfitLoss(item)}\r\n//                         title=\"Save\"\r\n//                       >\r\n//                         <Check size={14} />\r\n//                       </button>\r\n//                     </div>\r\n//                   </td>\r\n//                   <td>\r\n//                     <span className=\"price-badge\">\r\n//                       ₹{item.salePrice || \"0.00\"}\r\n//                     </span>\r\n//                   </td>\r\n//                   <td>\r\n//                     {item.hsnCode ? (\r\n//                       <span className=\"hsn-badge\">{item.hsnCode}</span>\r\n//                     ) : (\r\n//                       \"-\"\r\n//                     )}\r\n//                   </td>\r\n//                   <td>\r\n//                     {item.gstPercent ? (\r\n//                       <span className=\"gst-badge\">{item.gstPercent}%</span>\r\n//                     ) : (\r\n//                       \"-\"\r\n//                     )}\r\n//                   </td>\r\n//                   <td>\r\n//                     <span className={`price-lock-badge ${item.lockedPrice > 0 ? \"locked\" : \"unlocked\"}`}>\r\n//                       ₹{item.lockedPrice || \"0\"}\r\n//                     </span>\r\n//                   </td>\r\n//                   <td>\r\n//                     {item.lockedPrice === 0 ? (\r\n//                       <span className=\"teji-maddi neutral\">0</span>\r\n//                     ) : (\r\n//                       (() => {\r\n//                         const teji = item.salePrice - item.lockedPrice;\r\n//                         return (\r\n//                           <span className={`teji-maddi ${teji >= 0 ? \"profit\" : \"loss\"}`}>\r\n//                             {teji >= 0 ? <TrendingUp size={12} /> : <TrendingDown size={12} />}\r\n//                             {Math.abs(teji)}\r\n//                           </span>\r\n//                         );\r\n//                       })()\r\n//                     )}\r\n//                   </td>\r\n//                   <td>\r\n//                     <button\r\n//                       className={`status-badge ${item.status === \"active\" ? \"active\" : \"inactive\"\r\n//                         }`}\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? (\r\n//                         <>\r\n//                           <Eye size={12} /> Active\r\n//                         </>\r\n//                       ) : (\r\n//                         <>\r\n//                           <EyeOff size={12} /> Inactive\r\n//                         </>\r\n//                       )}\r\n//                     </button>\r\n//                   </td>\r\n//                   <td>\r\n//                     <div className=\"action-buttons\">\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={() => handleEdit(item)}\r\n//                         title=\"Edit\"\r\n//                       >\r\n//                         <Edit size={16} />\r\n//                       </button>\r\n//                       <button\r\n//                         className=\"btn-icon-small\"\r\n//                         onClick={async () => {\r\n//                           await axios.post(`${API_URL}/copy/${item._id}`);\r\n//                           showAlert(\"✅ Product copied\", \"success\");\r\n//                           fetchItems();\r\n//                         }}\r\n//                         title=\"Duplicate\"\r\n//                       >\r\n//                         <Copy size={16} />\r\n//                       </button>\r\n//                       <button\r\n//                         className=\"btn-icon-small danger\"\r\n//                         onClick={() => handleDelete(item._id)}\r\n//                         title=\"Delete\"\r\n//                       >\r\n//                         <Trash2 size={16} />\r\n//                       </button>\r\n//                     </div>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         </div>\r\n\r\n//         {/* Pagination */}\r\n//         {totalPages > 1 && (\r\n//           <div className=\"pagination\">\r\n//             <button\r\n//               className=\"pagination-btn\"\r\n//               disabled={currentPage === 1}\r\n//               onClick={() => setCurrentPage((p) => p - 1)}\r\n//             >\r\n//               <ChevronLeft size={16} /> Previous\r\n//             </button>\r\n//             <div className=\"pagination-pages\">\r\n//               {Array.from({ length: Math.min(totalPages, 5) }, (_, i) => {\r\n//                 let pageNum;\r\n//                 if (totalPages <= 5) {\r\n//                   pageNum = i + 1;\r\n//                 } else if (currentPage <= 3) {\r\n//                   pageNum = i + 1;\r\n//                 } else if (currentPage >= totalPages - 2) {\r\n//                   pageNum = totalPages - 4 + i;\r\n//                 } else {\r\n//                   pageNum = currentPage - 2 + i;\r\n//                 }\r\n\r\n//                 if (pageNum < 1 || pageNum > totalPages) return null;\r\n\r\n//                 return (\r\n//                   <button\r\n//                     key={i}\r\n//                     className={`pagination-btn ${currentPage === pageNum ? \"active\" : \"\"\r\n//                       }`}\r\n//                     onClick={() => setCurrentPage(pageNum)}\r\n//                   >\r\n//                     {pageNum}\r\n//                   </button>\r\n//                 );\r\n//               })}\r\n//               {totalPages > 5 && <span className=\"pagination-dots\">...</span>}\r\n//             </div>\r\n//             <button\r\n//               className=\"pagination-btn\"\r\n//               disabled={currentPage === totalPages}\r\n//               onClick={() => setCurrentPage((p) => p + 1)}\r\n//             >\r\n//               Next <ChevronRight size={16} />\r\n//             </button>\r\n//           </div>\r\n//         )}\r\n//       </div>\r\n\r\n//       {/* Modals */}\r\n//       {showCategoryModal && (\r\n//         <div className=\"modal-overlay\" onClick={() => setShowCategoryModal(false)}>\r\n//           <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n//             <div className=\"modal-header\">\r\n//               <h3>Add New Category</h3>\r\n//               <button\r\n//                 className=\"btn-icon\"\r\n//                 onClick={() => setShowCategoryModal(false)}\r\n//               >\r\n//                 <X size={20} />\r\n//               </button>\r\n//             </div>\r\n//             <div className=\"modal-body\">\r\n//               <div className=\"form-group\">\r\n//                 <label>Category Name *</label>\r\n//                 <input\r\n//                   type=\"text\"\r\n//                   value={newCategoryName}\r\n//                   onChange={(e) => setNewCategoryName(e.target.value)}\r\n//                   className=\"form-input\"\r\n//                   placeholder=\"Enter category name\"\r\n//                   autoFocus\r\n//                 />\r\n//               </div>\r\n//             </div>\r\n//             <div className=\"modal-footer\">\r\n//               <button\r\n//                 className=\"btn btn-secondary\"\r\n//                 onClick={() => setShowCategoryModal(false)}\r\n//               >\r\n//                 Cancel\r\n//               </button>\r\n//               <button\r\n//                 className=\"btn btn-primary\"\r\n//                 onClick={handleAddCategory}\r\n//                 disabled={categoryLoading || !newCategoryName.trim()}\r\n//               >\r\n//                 {categoryLoading ? (\r\n//                   <>\r\n//                     <Loader2 size={16} className=\"spinner\" />\r\n//                     Saving...\r\n//                   </>\r\n//                 ) : (\r\n//                   <>\r\n//                     <Plus size={16} />\r\n//                     Add Category\r\n//                   </>\r\n//                 )}\r\n//               </button>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n\r\n//       {/* Edit Modal */}\r\n//       {showModal && (\r\n//         <div className=\"modal-overlay\" onClick={() => setShowModal(false)}>\r\n//           <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n//             <div className=\"modal-header\">\r\n//               <h3>Edit Product</h3>\r\n//               <button\r\n//                 className=\"btn-icon\"\r\n//                 onClick={() => setShowModal(false)}\r\n//               >\r\n//                 <X size={20} />\r\n//               </button>\r\n//             </div>\r\n//             <div className=\"modal-body\">\r\n//               <form onSubmit={handleSubmit}>\r\n//                 <div className=\"form-grid\">\r\n//                   <div className=\"form-group\">\r\n//                     <label>Product Name *</label>\r\n//                     <input\r\n//                       type=\"text\"\r\n//                       name=\"name\"\r\n//                       value={form.name}\r\n//                       onChange={handleChange}\r\n//                       className=\"form-input\"\r\n//                       required\r\n//                     />\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>Category *</label>\r\n//                     <select\r\n//                       name=\"category\"\r\n//                       value={form.category}\r\n//                       onChange={handleChange}\r\n//                       className=\"form-select\"\r\n//                       required\r\n//                     >\r\n//                       <option value=\"\">Select Category</option>\r\n//                       {categories.map((c) => (\r\n//                         <option key={c._id} value={c._id}>\r\n//                           {c.name}\r\n//                         </option>\r\n//                       ))}\r\n//                     </select>\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>Subcategory</label>\r\n//                     <select\r\n//                       name=\"subcategory\"\r\n//                       value={form.subcategory}\r\n//                       onChange={handleChange}\r\n//                       disabled={!subcategories.length}\r\n//                       className=\"form-select\"\r\n//                     >\r\n//                       <option value=\"\">Select Subcategory</option>\r\n//                       {subcategories.map((s) => (\r\n//                         <option key={s._id} value={s._id}>\r\n//                           {s.name}\r\n//                         </option>\r\n//                       ))}\r\n//                     </select>\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>Base Price *</label>\r\n//                     <input\r\n//                       type=\"number\"\r\n//                       name=\"basePrice\"\r\n//                       value={form.basePrice}\r\n//                       onChange={handleChange}\r\n//                       className=\"form-input\"\r\n//                       required\r\n//                     />\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>Weight</label>\r\n//                     <div className=\"input-with-button\">\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         name=\"weightValue\"\r\n//                         value={form.weightValue}\r\n//                         onChange={handleChange}\r\n//                         placeholder=\"Value\"\r\n//                         className=\"form-input\"\r\n//                         style={{ flex: 1 }}\r\n//                       />\r\n//                       <select\r\n//                         name=\"weightUnit\"\r\n//                         value={form.weightUnit}\r\n//                         onChange={handleChange}\r\n//                         className=\"form-select\"\r\n//                         style={{ width: \"100px\" }}\r\n//                       >\r\n//                         <option value=\"kg\">Kg</option>\r\n//                         <option value=\"gm\">Gram</option>\r\n//                         <option value=\"ltr\">Litre</option>\r\n//                         <option value=\"ml\">ML</option>\r\n//                         <option value=\"pcs\">Pcs</option>\r\n//                       </select>\r\n//                     </div>\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>Profit/Loss</label>\r\n//                     <input\r\n//                       type=\"number\"\r\n//                       name=\"profitLoss\"\r\n//                       value={form.profitLoss}\r\n//                       onChange={handleChange}\r\n//                       className=\"form-input\"\r\n//                     />\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>GST %</label>\r\n//                     <input\r\n//                       type=\"number\"\r\n//                       name=\"gstPercent\"\r\n//                       value={form.gstPercent}\r\n//                       onChange={handleChange}\r\n//                       className=\"form-input\"\r\n//                     />\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>HSN Code</label>\r\n//                     <input\r\n//                       name=\"hsnCode\"\r\n//                       value={form.hsnCode}\r\n//                       onChange={handleChange}\r\n//                       className=\"form-input\"\r\n//                     />\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>Tax Type</label>\r\n//                     <select\r\n//                       name=\"taxType\"\r\n//                       value={form.taxType}\r\n//                       onChange={handleChange}\r\n//                       className=\"form-select\"\r\n//                     >\r\n//                       <option value=\"cgst_sgst\">CGST + SGST</option>\r\n//                       <option value=\"igst\">IGST</option>\r\n//                     </select>\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>Valid Till</label>\r\n//                     <input\r\n//                       type=\"date\"\r\n//                       name=\"validTill\"\r\n//                       value={form.validTill}\r\n//                       onChange={handleChange}\r\n//                       className=\"form-input\"\r\n//                     />\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>Status</label>\r\n//                     <select\r\n//                       name=\"status\"\r\n//                       value={form.status}\r\n//                       onChange={handleChange}\r\n//                       className=\"form-select\"\r\n//                     >\r\n//                       <option value=\"active\">Active</option>\r\n//                       <option value=\"inactive\">Inactive</option>\r\n//                     </select>\r\n//                   </div>\r\n//                   <div className=\"form-group\">\r\n//                     <label>Image</label>\r\n//                     <input\r\n//                       type=\"file\"\r\n//                       accept=\"image/*\"\r\n//                       onChange={handleChange}\r\n//                       className=\"form-input\"\r\n//                     />\r\n//                   </div>\r\n//                 </div>\r\n//                 <div className=\"form-group\">\r\n//                   <label>Description</label>\r\n//                   <textarea\r\n//                     name=\"description\"\r\n//                     value={form.description}\r\n//                     onChange={handleChange}\r\n//                     className=\"form-textarea\"\r\n//                     rows=\"3\"\r\n//                   ></textarea>\r\n//                 </div>\r\n//                 <div className=\"form-actions\">\r\n//                   <button\r\n//                     type=\"submit\"\r\n//                     className=\"btn btn-primary\"\r\n//                     disabled={loading}\r\n//                   >\r\n//                     {loading ? (\r\n//                       <>\r\n//                         <Loader2 size={16} className=\"spinner\" />\r\n//                         Saving...\r\n//                       </>\r\n//                     ) : (\r\n//                       <>\r\n//                         <Save size={16} />\r\n//                         Update Product\r\n//                       </>\r\n//                     )}\r\n//                   </button>\r\n//                   <button\r\n//                     type=\"button\"\r\n//                     className=\"btn btn-secondary\"\r\n//                     onClick={() => setShowModal(false)}\r\n//                   >\r\n//                     Cancel\r\n//                   </button>\r\n//                 </div>\r\n//               </form>\r\n//             </div>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n\r\n//       {alertBox.show && (\r\n//         <div className={`alert alert-${alertBox.type}`}>\r\n//           <div className=\"alert-content\">\r\n//             {alertBox.type === \"success\" && <CheckCircle size={20} className=\"alert-icon\" />}\r\n//             {alertBox.type === \"error\" && <AlertCircle size={20} className=\"alert-icon\" />}\r\n//             {alertBox.type === \"warning\" && <Info size={20} className=\"alert-icon\" />}\r\n//             <span>{alertBox.message}</span>\r\n//           </div>\r\n//           <button\r\n//             className=\"alert-close\"\r\n//             onClick={() => setAlertBox({ ...alertBox, show: false })}\r\n//           >\r\n//             <X size={16} />\r\n//           </button>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./PriceList.css\";\r\nimport {\r\n  Plus,\r\n  Edit,\r\n  Trash2,\r\n  Copy,\r\n  Search,\r\n  Filter,\r\n  Check,\r\n  X,\r\n  ChevronLeft,\r\n  ChevronRight,\r\n  Download,\r\n  Upload,\r\n  CheckSquare,\r\n  Package,\r\n  CheckCircle,\r\n  Tag,\r\n  Image,\r\n  Loader2,\r\n  AlertCircle,\r\n  Info,\r\n  Save,\r\n  Edit2,\r\n  Eye,\r\n  EyeOff,\r\n  Calendar,\r\n  Layers,\r\n  Scale,\r\n  FileSpreadsheet,\r\n  Database,\r\n  Box,\r\n  ShoppingCart,\r\n  TrendingUp,\r\n  TrendingDown,\r\n  Percent,\r\n  Hash,\r\n  Receipt,\r\n} from 'lucide-react';\r\n\r\nconst API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\r\nconst CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\r\n\r\nexport default function PriceList() {\r\n  const [items, setItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    subcategory: \"\",\r\n    description: \"\",\r\n    basePrice: \"\",\r\n    profitLoss: \"\",\r\n    gstPercent: \"\",\r\n    hsnCode: \"\",\r\n    taxType: \"cgst_sgst\",\r\n    weightValue: \"\",\r\n    weightUnit: \"kg\",\r\n    validTill: \"\",\r\n    file: null,\r\n    status: \"inactive\",\r\n  });\r\n\r\n  const [editId, setEditId] = useState(null);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [bulkMode, setBulkMode] = useState(false);\r\n\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 30;\r\n\r\n  const [filterCategory, setFilterCategory] = useState(\"\");\r\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n  const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n  const [quickBasePrices, setQuickBasePrices] = useState({});\r\n  const [quickProfitLoss, setQuickProfitLoss] = useState({});\r\n\r\n  const [sortOrder, setSortOrder] = useState(\"\");\r\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\r\n  const [newCategoryName, setNewCategoryName] = useState(\"\");\r\n  const [categoryLoading, setCategoryLoading] = useState(false);\r\n  const [alertBox, setAlertBox] = useState({\r\n    show: false,\r\n    message: \"\",\r\n    type: \"success\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (alertBox.show) {\r\n      const timer = setTimeout(() => {\r\n        setAlertBox((prev) => ({ ...prev, show: false }));\r\n      }, 2500);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [alertBox.show]);\r\n\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (categories.length > 0) fetchItems();\r\n  }, [categories]);\r\n\r\n  useEffect(() => {\r\n    if (!filterCategory) {\r\n      setFilterSubs([]);\r\n      setFilterSubcategory(\"\");\r\n      return;\r\n    }\r\n    const cat = categories.find((c) => c._id === filterCategory);\r\n    setFilterSubs(cat?.subcategories || []);\r\n    setFilterSubcategory(\"\");\r\n  }, [filterCategory, categories]);\r\n\r\n  useEffect(() => {\r\n    if (!form.category) {\r\n      setSubcategories([]);\r\n      setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n      return;\r\n    }\r\n    const cat = categories.find((c) => c._id === form.category);\r\n    setSubcategories(cat?.subcategories || []);\r\n  }, [form.category, categories]);\r\n\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const res = await axios.get(CATEGORY_URL);\r\n      if (res.data?.success) setCategories(res.data.categories || []);\r\n    } catch (err) {\r\n      console.error(\"Fetch categories error\", err);\r\n      showAlert(\"Could not fetch categories\", \"error\");\r\n    }\r\n  };\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(API_URL);\r\n      if (res.data?.success) {\r\n        const raw = res.data.data || [];\r\n        const flat = [];\r\n        raw.forEach((cat) => {\r\n          cat.subcategories.forEach((sub) => {\r\n            sub.products.forEach((p) => {\r\n              // Format numbers to 2 decimal places\r\n              const formattedProduct = {\r\n                ...p,\r\n                basePrice: p.basePrice ? parseFloat(p.basePrice).toFixed(2) : \"0.00\",\r\n                salePrice: p.salePrice ? parseFloat(p.salePrice).toFixed(2) : \"0.00\",\r\n                profitLoss: p.profitLoss ? parseFloat(p.profitLoss).toFixed(2) : \"0.00\",\r\n                lockedPrice: p.lockedPrice ? parseFloat(p.lockedPrice).toFixed(2) : \"0.00\",\r\n                gstPercent: p.gstPercent ? parseFloat(p.gstPercent).toFixed(2) : \"0.00\",\r\n                category: {\r\n                  _id: cat.id,\r\n                  name: cat.name,\r\n                  image: cat.image,\r\n                },\r\n                subcategory: {\r\n                  _id: sub.id,\r\n                  name: sub.name,\r\n                  image: sub.image,\r\n                },\r\n              };\r\n              flat.push(formattedProduct);\r\n            });\r\n          });\r\n        });\r\n        flat.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n        setItems(flat);\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Fetch items error\", err);\r\n      showAlert(\"Could not fetch items\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (files?.length) {\r\n      setForm((p) => ({ ...p, file: files[0] }));\r\n    } else {\r\n      // Format numbers to 2 decimal places\r\n      if (['basePrice', 'profitLoss', 'gstPercent', 'weightValue'].includes(name)) {\r\n        const numValue = parseFloat(value);\r\n        if (!isNaN(numValue)) {\r\n          setForm((p) => ({ ...p, [name]: numValue.toFixed(2) }));\r\n        } else {\r\n          setForm((p) => ({ ...p, [name]: value }));\r\n        }\r\n      } else {\r\n        setForm((p) => ({ ...p, [name]: value }));\r\n      }\r\n    }\r\n  };\r\n\r\n  const showAlert = (message, type = \"success\") => {\r\n    setAlertBox({ show: true, message, type });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    const nameExists = items.some(\r\n      (p) =>\r\n        p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\r\n        p._id !== editId\r\n    );\r\n\r\n    if (nameExists) {\r\n      showAlert(\"❌ Product name already exists!\", \"error\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      if (!form.name || !form.category || !form.basePrice) {\r\n        showAlert(\"Name, category & base price are required\", \"error\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const fd = new FormData();\r\n      fd.append(\"name\", form.name.trim());\r\n      fd.append(\"category\", form.category);\r\n\r\n      if (form.subcategory) {\r\n        const sub = subcategories.find((s) => s._id === form.subcategory);\r\n        if (sub) {\r\n          fd.append(\r\n            \"subcategory\",\r\n            JSON.stringify({\r\n              id: sub._id,\r\n              name: sub.name,\r\n              image: sub.image || \"\"\r\n            })\r\n          );\r\n        }\r\n      } else {\r\n        fd.append(\"subcategory\", JSON.stringify(null));\r\n      }\r\n\r\n      // Format numbers before sending\r\n      const basePrice = parseFloat(form.basePrice).toFixed(2);\r\n      const profitLoss = parseFloat(form.profitLoss || 0).toFixed(2);\r\n      const gstPercent = parseFloat(form.gstPercent || 0).toFixed(2);\r\n\r\n      fd.append(\"basePrice\", basePrice);\r\n      fd.append(\"profitLoss\", profitLoss);\r\n      fd.append(\"gstPercent\", gstPercent);\r\n\r\n      const weightValue =\r\n        form.weightValue && Number(form.weightValue) > 0\r\n          ? parseFloat(form.weightValue).toFixed(2)\r\n          : \"1.00\";\r\n\r\n      fd.append(\r\n        \"weight\",\r\n        JSON.stringify({\r\n          value: weightValue,\r\n          unit: form.weightUnit || \"kg\",\r\n        })\r\n      );\r\n\r\n      fd.append(\"hsnCode\", form.hsnCode || \"\");\r\n      fd.append(\"taxType\", form.taxType);\r\n\r\n      if (form.description) fd.append(\"description\", form.description);\r\n      if (form.validTill) fd.append(\"validTill\", form.validTill);\r\n      fd.append(\"status\", form.status);\r\n      if (form.file) fd.append(\"file\", form.file);\r\n\r\n      if (editId) {\r\n        await axios.put(`${API_URL}/${editId}`, fd);\r\n        showAlert(\"✅ Product updated successfully\", \"success\");\r\n      } else {\r\n        await axios.post(API_URL, fd);\r\n        showAlert(\"✅ Product added successfully\", \"success\");\r\n      }\r\n\r\n      await fetchItems();\r\n      resetForm();\r\n    } catch (err) {\r\n      console.error(\"Save error\", err);\r\n      if (err.response?.data?.message === \"Product name already exists\") {\r\n        showAlert(\"❌ Product name already exists!\", \"error\");\r\n      } else {\r\n        showAlert(\"❌ Save failed!\", \"error\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setForm({\r\n      name: \"\",\r\n      category: \"\",\r\n      subcategory: \"\",\r\n      description: \"\",\r\n      basePrice: \"\",\r\n      profitLoss: \"\",\r\n      validTill: \"\",\r\n      weightValue: \"\",\r\n      weightUnit: \"kg\",\r\n      file: null,\r\n      status: \"inactive\",\r\n    });\r\n    setEditId(null);\r\n    setShowModal(false);\r\n    setShowForm(false);\r\n  };\r\n\r\n  const handleAddCategory = async () => {\r\n    if (!newCategoryName.trim()) {\r\n      showAlert(\"Category name is required\", \"error\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setCategoryLoading(true);\r\n      const res = await axios.post(CATEGORY_URL, {\r\n        name: newCategoryName.trim(),\r\n      });\r\n\r\n      if (res.data?.success) {\r\n        showAlert(\"✅ Category added successfully\", \"success\");\r\n        setNewCategoryName(\"\");\r\n        setShowCategoryModal(false);\r\n        await fetchCategories();\r\n      } else {\r\n        showAlert(\"❌ Category add failed\", \"error\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Add category error\", err);\r\n      showAlert(\"❌ Error while adding category\", \"error\");\r\n    } finally {\r\n      setCategoryLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEdit = (item) => {\r\n    setForm({\r\n      name: item.name || \"\",\r\n      category: item.category?._id?.toString() || \"\",\r\n      subcategory: item.subcategory?._id || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice || \"\",\r\n      profitLoss: item.profitLoss || 0,\r\n      weightValue: item.weight?.value || \"\",\r\n      weightUnit: item.weight?.unit || \"kg\",\r\n      gstPercent: item.gstPercent || \"\",\r\n      hsnCode: item.hsnCode || \"\",\r\n      taxType: item.taxType || \"cgst_sgst\",\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n      status: item.status || \"inactive\",\r\n    });\r\n\r\n    const cat = categories.find((c) => c._id === item.category?._id);\r\n    setSubcategories(cat?.subcategories || []);\r\n    setEditId(item._id);\r\n    setShowModal(true);\r\n    setActiveMenu(null);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete this item?\")) return;\r\n    try {\r\n      await axios.delete(`${API_URL}/${id}`);\r\n      setItems((prev) => prev.filter((x) => x._id !== id));\r\n      setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n      setActiveMenu(null);\r\n      showAlert(\"✅ Product deleted successfully\", \"success\");\r\n    } catch (err) {\r\n      console.error(\"Delete error\", err);\r\n      showAlert(\"❌ Delete failed\", \"error\");\r\n    }\r\n  };\r\n\r\n  const handleStatusToggle = async (item) => {\r\n    try {\r\n      const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n      await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n      setItems((prev) =>\r\n        prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x))\r\n      );\r\n      showAlert(`✅ Status updated to ${newStatus}`, \"success\");\r\n    } catch (err) {\r\n      console.error(\"Status toggle error\", err);\r\n      showAlert(\"❌ Status update failed\", \"error\");\r\n    }\r\n  };\r\n\r\n  const updateLocalItemField = (id, key, value) => {\r\n    setItems((prev) =>\r\n      prev.map((x) => (x._id === id ? { ...x, [key]: value } : x))\r\n    );\r\n  };\r\n\r\n  const handleBulkSave = async () => {\r\n    if (!selectedItems.length) {\r\n      showAlert(\"No items selected\", \"warning\");\r\n      return;\r\n    }\r\n\r\n    const updates = items\r\n      .filter((x) => selectedItems.includes(x._id))\r\n      .map((x) => ({\r\n        id: x._id,\r\n        basePrice: parseFloat(x.basePrice).toFixed(2),\r\n        profitLoss: parseFloat(x.profitLoss).toFixed(2),\r\n        gstPercent: parseFloat(x.gstPercent || 0).toFixed(2),\r\n        hsnCode: x.hsnCode || \"\",\r\n        taxType: x.taxType || \"cgst_sgst\",\r\n        status: x.status,\r\n      }));\r\n\r\n    try {\r\n      await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n      showAlert(\"✅ Bulk save successful\", \"success\");\r\n      setBulkMode(false);\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n    } catch (err) {\r\n      console.error(\"Bulk save error\", err);\r\n      showAlert(\"❌ Bulk save failed\", \"error\");\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (!selectedItems.length) {\r\n      showAlert(\"No items selected\", \"warning\");\r\n      return;\r\n    }\r\n    if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n    try {\r\n      await Promise.all(\r\n        selectedItems.map((id) => axios.delete(`${API_URL}/${id}`))\r\n      );\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n      setBulkMode(false);\r\n      showAlert(\"✅ Bulk delete successful\", \"success\");\r\n    } catch (err) {\r\n      console.error(\"Bulk delete error\", err);\r\n      showAlert(\"❌ Bulk delete failed\", \"error\");\r\n    }\r\n  };\r\n\r\n  const updateBasePrice = async (item) => {\r\n    const newBase = parseFloat(quickBasePrices[item._id] ?? item.basePrice).toFixed(2);\r\n    if (isNaN(newBase)) {\r\n      showAlert(\"Invalid Base Price\", \"error\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const fd = new FormData();\r\n      fd.append(\"name\", item.name);\r\n      fd.append(\"category\", item.category?._id);\r\n\r\n      if (item.subcategory) {\r\n        fd.append(\"subcategory\", JSON.stringify(item.subcategory));\r\n      }\r\n\r\n      fd.append(\"description\", item.description || \"\");\r\n      fd.append(\"basePrice\", newBase);\r\n      fd.append(\"profitLoss\", item.profitLoss);\r\n      fd.append(\"status\", item.status);\r\n      fd.append(\"gstPercent\", item.gstPercent || 0);\r\n      fd.append(\"hsnCode\", item.hsnCode || \"\");\r\n      fd.append(\"taxType\", item.taxType || \"cgst_sgst\");\r\n      fd.append(\"weight\", JSON.stringify(item.weight));\r\n\r\n      const res = await axios.put(`${API_URL}/${item._id}`, fd);\r\n      if (res.data.success) {\r\n        await fetchItems();\r\n        setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\r\n        showAlert(\"✅ Base price updated\", \"success\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showAlert(\"❌ Update failed\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateProfitLoss = async (item) => {\r\n    const diff = parseFloat(quickProfitLoss[item._id] ?? 0).toFixed(2);\r\n    if (isNaN(diff)) {\r\n      showAlert(\"Invalid Profit/Loss\", \"error\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, { diff });\r\n      if (res.data.success) {\r\n        await fetchItems();\r\n        setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\r\n        showAlert(\"✅ Profit/Loss updated\", \"success\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      showAlert(\"❌ Update failed\", \"error\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredItems = items.filter((item) => {\r\n    const t = search.toLowerCase();\r\n    const matchText =\r\n      (item.name || \"\").toLowerCase().includes(t) ||\r\n      (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n      (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n    const matchCategory =\r\n      !filterCategory || item.category?._id === filterCategory;\r\n    const matchSub =\r\n      !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n    return matchText && matchCategory && matchSub;\r\n  });\r\n\r\n  let sortedItems = [...filteredItems];\r\n  if (sortOrder === \"low\") {\r\n    sortedItems.sort(\r\n      (a, b) => (parseFloat(a.salePrice) || 0) - (parseFloat(b.salePrice) || 0)\r\n    );\r\n  } else if (sortOrder === \"high\") {\r\n    sortedItems.sort(\r\n      (a, b) => (parseFloat(b.salePrice) || 0) - (parseFloat(a.salePrice) || 0)\r\n    );\r\n  }\r\n\r\n  const indexOfLast = currentPage * itemsPerPage;\r\n  const currentItems = sortedItems.slice(\r\n    indexOfLast - itemsPerPage,\r\n    indexOfLast\r\n  );\r\n  const totalPages = Math.max(1, Math.ceil(sortedItems.length / itemsPerPage));\r\n\r\n  return (\r\n    <div className=\"dashboard-container\">\r\n      {/* Header */}\r\n      <div className=\"dashboard-header\">\r\n        <div className=\"header-content\">\r\n          <h1 className=\"header-title\">Product Management</h1>\r\n          <p className=\"header-subtitle\">\r\n            Manage your products, categories, and inventory\r\n          </p>\r\n        </div>\r\n        <div className=\"header-actions\">\r\n          <button\r\n            className=\"btn btn-primary\"\r\n            onClick={() => {\r\n              setShowForm(!showForm);\r\n              setEditId(null);\r\n              resetForm();\r\n            }}\r\n          >\r\n            <Plus size={18} />\r\n            {showForm ? \"Close Form\" : \"Add Product\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"stats-grid\">\r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-icon bg-blue\">\r\n            <Package size={24} />\r\n          </div>\r\n          <div className=\"stat-content\">\r\n            <h3 className=\"stat-value\">{items.length}</h3>\r\n            <p className=\"stat-label\">Total Products</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-icon bg-green\">\r\n            <CheckCircle size={24} />\r\n          </div>\r\n          <div className=\"stat-content\">\r\n            <h3 className=\"stat-value\">\r\n              {items.filter((x) => x.status === \"active\").length}\r\n            </h3>\r\n            <p className=\"stat-label\">Active Products</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-icon bg-orange\">\r\n            <Layers size={24} />\r\n          </div>\r\n          <div className=\"stat-content\">\r\n            <h3 className=\"stat-value\">{categories.length}</h3>\r\n            <p className=\"stat-label\">Categories</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"stat-card\">\r\n          <div className=\"stat-icon bg-purple\">\r\n            <Database size={24} />\r\n          </div>\r\n          <div className=\"stat-content\">\r\n            <h3 className=\"stat-value\">{filteredItems.length}</h3>\r\n            <p className=\"stat-label\">Filtered Items</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search and Filters */}\r\n      <div className=\"search-filters-card\">\r\n        <div className=\"search-section\">\r\n          <div className=\"search-box\">\r\n            <Search size={20} className=\"search-icon\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search products, categories...\"\r\n              value={search}\r\n              onChange={(e) => {\r\n                setSearch(e.target.value);\r\n                setCurrentPage(1);\r\n              }}\r\n              className=\"search-input\"\r\n            />\r\n          </div>\r\n          <div className=\"filters-row\">\r\n            <div className=\"filter-group\">\r\n              <label>Category</label>\r\n              <select\r\n                value={filterCategory}\r\n                onChange={(e) => setFilterCategory(e.target.value)}\r\n                className=\"filter-select\"\r\n              >\r\n                <option value=\"\">All Categories</option>\r\n                {categories.map((c) => (\r\n                  <option key={c._id} value={c._id}>\r\n                    {c.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"filter-group\">\r\n              <label>Subcategory</label>\r\n              <select\r\n                value={filterSubcategory}\r\n                onChange={(e) => setFilterSubcategory(e.target.value)}\r\n                disabled={!filterSubs.length}\r\n                className=\"filter-select\"\r\n              >\r\n                <option value=\"\">All Subcategories</option>\r\n                {filterSubs.map((s) => (\r\n                  <option key={s._id} value={s._id}>\r\n                    {s.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n            <div className=\"filter-group\">\r\n              <label>Sort By</label>\r\n              <select\r\n                value={sortOrder}\r\n                onChange={(e) => setSortOrder(e.target.value)}\r\n                className=\"filter-select\"\r\n              >\r\n                <option value=\"\">Default</option>\r\n                <option value=\"low\">Price: Low to High</option>\r\n                <option value=\"high\">Price: High to Low</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"filter-group\">\r\n              <label>Actions</label>\r\n              <div className=\"action-buttons\">\r\n                <button\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\r\n                >\r\n                  <Download size={16} /> Export CSV\r\n                </button>\r\n                <label className=\"btn btn-secondary\">\r\n                  <input\r\n                    type=\"file\"\r\n                    accept=\".csv\"\r\n                    style={{ display: \"none\" }}\r\n                    onChange={async (e) => {\r\n                      try {\r\n                        const fd = new FormData();\r\n                        fd.append(\"file\", e.target.files[0]);\r\n                        await axios.post(`${API_URL}/import`, fd);\r\n                        showAlert(\"✅ Imported successfully\", \"success\");\r\n                        fetchItems();\r\n                      } catch (err) {\r\n                        showAlert(\"❌ Import failed\", \"error\");\r\n                      }\r\n                    }}\r\n                  />\r\n                  <Upload size={16} /> Import CSV\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Bulk Actions */}\r\n      {selectedItems.length > 0 && (\r\n        <div className=\"bulk-actions-card\">\r\n          <div className=\"bulk-header\">\r\n            <h3>\r\n              <CheckSquare size={20} />\r\n              {selectedItems.length} item{selectedItems.length > 1 ? \"s\" : \"\"}{\" \"}\r\n              selected\r\n            </h3>\r\n            <div className=\"bulk-buttons\">\r\n              {!bulkMode ? (\r\n                <>\r\n                  <button\r\n                    className=\"btn btn-danger\"\r\n                    onClick={handleBulkDelete}\r\n                  >\r\n                    <Trash2 size={16} /> Bulk Delete\r\n                  </button>\r\n                  <button\r\n                    className=\"btn btn-primary\"\r\n                    onClick={() => setBulkMode(true)}\r\n                  >\r\n                    <Edit size={16} /> Bulk Edit\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <button\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={() => setBulkMode(false)}\r\n                >\r\n                  <X size={16} /> Cancel\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {bulkMode && (\r\n            <div className=\"bulk-edit-panel\">\r\n              <h4>Bulk Edit Products</h4>\r\n              <div className=\"bulk-grid\">\r\n                {items\r\n                  .filter((item) => selectedItems.includes(item._id))\r\n                  .map((item) => (\r\n                    <div key={item._id} className=\"bulk-item-card\">\r\n                      <h5>{item.name}</h5>\r\n                      <div className=\"bulk-fields\">\r\n                        <div className=\"form-group\">\r\n                          <label>Base Price</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.basePrice}\r\n                            onChange={(e) =>\r\n                              updateLocalItemField(\r\n                                item._id,\r\n                                \"basePrice\",\r\n                                parseFloat(e.target.value).toFixed(2)\r\n                              )\r\n                            }\r\n                            className=\"form-input\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                          <label>Profit/Loss</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.profitLoss}\r\n                            onChange={(e) =>\r\n                              updateLocalItemField(\r\n                                item._id,\r\n                                \"profitLoss\",\r\n                                parseFloat(e.target.value).toFixed(2)\r\n                              )\r\n                            }\r\n                            className=\"form-input\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                          <label>GST %</label>\r\n                          <input\r\n                            type=\"number\"\r\n                            step=\"0.01\"\r\n                            value={item.gstPercent || \"\"}\r\n                            onChange={(e) =>\r\n                              updateLocalItemField(\r\n                                item._id,\r\n                                \"gstPercent\",\r\n                                parseFloat(e.target.value).toFixed(2)\r\n                              )\r\n                            }\r\n                            className=\"form-input\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                          <label>HSN Code</label>\r\n                          <input\r\n                            value={item.hsnCode || \"\"}\r\n                            onChange={(e) =>\r\n                              updateLocalItemField(\r\n                                item._id,\r\n                                \"hsnCode\",\r\n                                e.target.value\r\n                              )\r\n                            }\r\n                            className=\"form-input\"\r\n                          />\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                          <label>Tax Type</label>\r\n                          <select\r\n                            value={item.taxType || \"cgst_sgst\"}\r\n                            onChange={(e) =>\r\n                              updateLocalItemField(\r\n                                item._id,\r\n                                \"taxType\",\r\n                                e.target.value\r\n                              )\r\n                            }\r\n                            className=\"form-select\"\r\n                          >\r\n                            <option value=\"cgst_sgst\">CGST + SGST</option>\r\n                            <option value=\"igst\">IGST</option>\r\n                          </select>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                          <label>Status</label>\r\n                          <select\r\n                            value={item.status}\r\n                            onChange={(e) =>\r\n                              updateLocalItemField(\r\n                                item._id,\r\n                                \"status\",\r\n                                e.target.value\r\n                              )\r\n                            }\r\n                            className=\"form-select\"\r\n                          >\r\n                            <option value=\"active\">Active</option>\r\n                            <option value=\"inactive\">Inactive</option>\r\n                          </select>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n              <div className=\"bulk-actions\">\r\n                <button className=\"btn btn-primary\" onClick={handleBulkSave}>\r\n                  <Save size={16} /> Save All Changes\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={async () => {\r\n                    if (!selectedItems.length) {\r\n                      showAlert(\"No items selected\", \"warning\");\r\n                      return;\r\n                    }\r\n                    for (let id of selectedItems)\r\n                      await axios.post(`${API_URL}/copy/${id}`);\r\n                    showAlert(\"✅ Selected items copied\", \"success\");\r\n                    fetchItems();\r\n                  }}\r\n                >\r\n                  <Copy size={16} /> Copy Selected\r\n                </button>\r\n                <button\r\n                  className=\"btn btn-secondary\"\r\n                  onClick={async () => {\r\n                    if (!selectedItems.length) {\r\n                      showAlert(\"No items selected\", \"warning\");\r\n                      return;\r\n                    }\r\n                    const res = await axios.post(\r\n                      `${API_URL}/export-selected`,\r\n                      { ids: selectedItems },\r\n                      { responseType: \"blob\" }\r\n                    );\r\n                    const url = window.URL.createObjectURL(new Blob([res.data]));\r\n                    const a = document.createElement(\"a\");\r\n                    a.href = url;\r\n                    a.download = \"selected.csv\";\r\n                    a.click();\r\n                  }}\r\n                >\r\n                  <FileSpreadsheet size={16} /> Export Selected\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Add/Edit Form */}\r\n      {showForm && (\r\n        <div className=\"form-card\">\r\n          <div className=\"form-header\">\r\n            <h3>\r\n              <Edit2 size={20} />\r\n              {editId ? \"Edit Product\" : \"Add New Product\"}\r\n            </h3>\r\n            <button className=\"btn-icon\" onClick={resetForm}>\r\n              <X size={20} />\r\n            </button>\r\n          </div>\r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-grid\">\r\n              <div className=\"form-group\">\r\n                <label>Product Name *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={form.name}\r\n                  onChange={handleChange}\r\n                  className=\"form-input\"\r\n                  required\r\n                  placeholder=\"Enter product name\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Category *</label>\r\n                <div className=\"input-with-button\">\r\n                  <select\r\n                    name=\"category\"\r\n                    value={form.category}\r\n                    onChange={handleChange}\r\n                    className=\"form-select\"\r\n                    required\r\n                  >\r\n                    <option value=\"\">Select Category</option>\r\n                    {categories.map((c) => (\r\n                      <option key={c._id} value={c._id}>\r\n                        {c.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setShowCategoryModal(true)}\r\n                    className=\"btn-icon-primary\"\r\n                    style={{ background: 'var(--primary)', color: 'white', border: 'none', borderRadius: '8px', padding: '8px', cursor: 'pointer' }}\r\n                  >\r\n                    <Plus size={18} />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Subcategory</label>\r\n                <select\r\n                  name=\"subcategory\"\r\n                  value={form.subcategory}\r\n                  onChange={handleChange}\r\n                  disabled={!subcategories.length}\r\n                  className=\"form-select\"\r\n                >\r\n                  <option value=\"\">Select Subcategory</option>\r\n                  {subcategories.map((s) => (\r\n                    <option key={s._id} value={s._id}>\r\n                      {s.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Base Price *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  name=\"basePrice\"\r\n                  value={form.basePrice}\r\n                  onChange={handleChange}\r\n                  className=\"form-input\"\r\n                  required\r\n                  placeholder=\"0.00\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Weight</label>\r\n                <div className=\"input-with-button\">\r\n                  <input\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    name=\"weightValue\"\r\n                    value={form.weightValue}\r\n                    onChange={handleChange}\r\n                    placeholder=\"Value\"\r\n                    className=\"form-input\"\r\n                    style={{ flex: 1 }}\r\n                  />\r\n                  <select\r\n                    name=\"weightUnit\"\r\n                    value={form.weightUnit}\r\n                    onChange={handleChange}\r\n                    className=\"form-select\"\r\n                    style={{ width: \"100px\" }}\r\n                  >\r\n                    <option value=\"kg\">Kg</option>\r\n                    <option value=\"gm\">Gram</option>\r\n                    <option value=\"ltr\">Litre</option>\r\n                    <option value=\"ml\">ML</option>\r\n                    <option value=\"pcs\">Pcs</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Profit/Loss</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  name=\"profitLoss\"\r\n                  value={form.profitLoss}\r\n                  onChange={handleChange}\r\n                  className=\"form-input\"\r\n                  placeholder=\"0\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>GST %</label>\r\n                <input\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  name=\"gstPercent\"\r\n                  value={form.gstPercent}\r\n                  onChange={handleChange}\r\n                  className=\"form-input\"\r\n                  placeholder=\"e.g. 5, 12, 18\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>HSN Code</label>\r\n                <input\r\n                  name=\"hsnCode\"\r\n                  value={form.hsnCode}\r\n                  onChange={handleChange}\r\n                  className=\"form-input\"\r\n                  placeholder=\"Enter HSN\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Tax Type</label>\r\n                <select\r\n                  name=\"taxType\"\r\n                  value={form.taxType}\r\n                  onChange={handleChange}\r\n                  className=\"form-select\"\r\n                >\r\n                  <option value=\"cgst_sgst\">CGST + SGST</option>\r\n                  <option value=\"igst\">IGST</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Valid Till</label>\r\n                <input\r\n                  type=\"date\"\r\n                  name=\"validTill\"\r\n                  value={form.validTill}\r\n                  onChange={handleChange}\r\n                  className=\"form-input\"\r\n                />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Status</label>\r\n                <select\r\n                  name=\"status\"\r\n                  value={form.status}\r\n                  onChange={handleChange}\r\n                  className=\"form-select\"\r\n                >\r\n                  <option value=\"active\">Active</option>\r\n                  <option value=\"inactive\">Inactive</option>\r\n                </select>\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Image</label>\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"image/*\"\r\n                  onChange={handleChange}\r\n                  className=\"form-input\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label>Description</label>\r\n              <textarea\r\n                name=\"description\"\r\n                value={form.description}\r\n                onChange={handleChange}\r\n                className=\"form-textarea\"\r\n                rows=\"3\"\r\n                placeholder=\"Product description...\"\r\n              ></textarea>\r\n            </div>\r\n            <div className=\"form-actions\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary\"\r\n                disabled={loading}\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <Loader2 size={18} className=\"spinner\" />\r\n                    Saving...\r\n                  </>\r\n                ) : editId ? (\r\n                  <>\r\n                    <Save size={16} />\r\n                    Update Product\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Plus size={16} />\r\n                    Add Product\r\n                  </>\r\n                )}\r\n              </button>\r\n              <button type=\"button\" className=\"btn btn-secondary\" onClick={resetForm}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      {/* Products Table */}\r\n      <div className=\"table-card\">\r\n        <div className=\"table-header\">\r\n          <div>\r\n            <h3>Products List</h3>\r\n            <p className=\"table-subtitle\">\r\n              Showing {currentItems.length} of {filteredItems.length} products\r\n            </p>\r\n          </div>\r\n          <div className=\"table-actions\">\r\n            <div className=\"table-checkbox\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={\r\n                  selectedItems.length === filteredItems.length &&\r\n                  filteredItems.length > 0\r\n                }\r\n                onChange={() => {\r\n                  if (selectedItems.length === filteredItems.length)\r\n                    setSelectedItems([]);\r\n                  else setSelectedItems(filteredItems.map((x) => x._id));\r\n                }}\r\n              />\r\n              <span>Select All</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"table-responsive\">\r\n          <table className=\"data-table\">\r\n            <thead>\r\n              <tr>\r\n                <th></th>\r\n                <th>#</th>\r\n                <th>Image</th>\r\n                <th>Name</th>\r\n                <th>Category</th>\r\n                <th>Base Price</th>\r\n                <th>Weight</th>\r\n                <th>Profit/Loss</th>\r\n                <th>Sale Price</th>\r\n                <th>HSN</th>\r\n                <th>GST</th>\r\n                <th>Price Lock</th>\r\n                <th>Teji/Maddi</th>\r\n                <th>Status</th>\r\n                <th>Actions</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {currentItems.map((item, i) => (\r\n                <tr key={item._id}>\r\n                  <td>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedItems.includes(item._id)}\r\n                      onChange={() =>\r\n                        setSelectedItems((prev) =>\r\n                          prev.includes(item._id)\r\n                            ? prev.filter((x) => x !== item._id)\r\n                            : [...prev, item._id]\r\n                        )\r\n                      }\r\n                    />\r\n                  </td>\r\n                  <td>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n                  <td>\r\n                    <div className=\"table-image\">\r\n                      {item.image ? (\r\n                        <img src={item.image} alt={item.name} />\r\n                      ) : (\r\n                        <div className=\"image-placeholder\">\r\n                          <Image size={20} />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"product-info\">\r\n                      <strong>{item.name}</strong>\r\n                      {item.description && (\r\n                        <small>{item.description.substring(0, 50)}...</small>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"category-info\">\r\n                      <span className=\"category-badge\">\r\n                        {item.category?.name || \"-\"}\r\n                      </span>\r\n                      {item.subcategory?.name && (\r\n                        <small>{item.subcategory.name}</small>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"editable-field\">\r\n                      <input\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        value={\r\n                          quickBasePrices[item._id] !== undefined\r\n                            ? quickBasePrices[item._id]\r\n                            : item.basePrice\r\n                        }\r\n                        onChange={(e) =>\r\n                          setQuickBasePrices((p) => ({\r\n                            ...p,\r\n                            [item._id]: e.target.value,\r\n                          }))\r\n                        }\r\n                        className=\"quick-input\"\r\n                      />\r\n                      <button\r\n                        className=\"btn-icon-small\"\r\n                        onClick={() => updateBasePrice(item)}\r\n                        title=\"Save\"\r\n                      >\r\n                        <Check size={14} />\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"weight-info\">\r\n                      <Scale size={14} style={{ marginRight: 4 }} />\r\n                      {item.weight\r\n                        ? `${parseFloat(item.weight.value).toFixed(2)} ${item.weight.unit}`\r\n                        : \"1.00 kg\"}\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"editable-field\">\r\n                      <input\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        placeholder=\"Change\"\r\n                        value={quickProfitLoss[item._id] ?? \"\"}\r\n                        onChange={(e) =>\r\n                          setQuickProfitLoss((p) => ({\r\n                            ...p,\r\n                            [item._id]: e.target.value,\r\n                          }))\r\n                        }\r\n                        className=\"quick-input\"\r\n                      />\r\n                      <button\r\n                        className=\"btn-icon-small\"\r\n                        onClick={() => updateProfitLoss(item)}\r\n                        title=\"Save\"\r\n                      >\r\n                        <Check size={14} />\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                  <td>\r\n                    <span className=\"price-badge\">\r\n                      ₹{parseFloat(item.salePrice || \"0\").toFixed(2)}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    {item.hsnCode ? (\r\n                      <span className=\"hsn-badge\">{item.hsnCode}</span>\r\n                    ) : (\r\n                      \"-\"\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    {item.gstPercent ? (\r\n                      <span className=\"gst-badge\">{parseFloat(item.gstPercent).toFixed(2)}%</span>\r\n                    ) : (\r\n                      \"-\"\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <span className={`price-lock-badge ${item.lockedPrice > 0 ? \"locked\" : \"unlocked\"}`}>\r\n                      ₹{parseFloat(item.lockedPrice || \"0\").toFixed(2)}\r\n                    </span>\r\n                  </td>\r\n                  <td>\r\n                    {item.lockedPrice === 0 || parseFloat(item.lockedPrice) === 0 ? (\r\n                      <span className=\"teji-maddi neutral\">0.00</span>\r\n                    ) : (\r\n                      (() => {\r\n                        const teji = parseFloat(item.salePrice) - parseFloat(item.lockedPrice);\r\n                        return (\r\n                          <span className={`teji-maddi ${teji >= 0 ? \"profit\" : \"loss\"}`}>\r\n                            {teji >= 0 ? <TrendingUp size={12} /> : <TrendingDown size={12} />}\r\n                            {Math.abs(teji).toFixed(2)}\r\n                          </span>\r\n                        );\r\n                      })()\r\n                    )}\r\n                  </td>\r\n                  <td>\r\n                    <button\r\n                      className={`status-badge ${item.status === \"active\" ? \"active\" : \"inactive\"\r\n                        }`}\r\n                      onClick={() => handleStatusToggle(item)}\r\n                    >\r\n                      {item.status === \"active\" ? (\r\n                        <>\r\n                          <Eye size={12} /> Active\r\n                        </>\r\n                      ) : (\r\n                        <>\r\n                          <EyeOff size={12} /> Inactive\r\n                        </>\r\n                      )}\r\n                    </button>\r\n                  </td>\r\n                  <td>\r\n                    <div className=\"action-buttons\">\r\n                      <button\r\n                        className=\"btn-icon-small\"\r\n                        onClick={() => handleEdit(item)}\r\n                        title=\"Edit\"\r\n                      >\r\n                        <Edit size={16} />\r\n                      </button>\r\n                      <button\r\n                        className=\"btn-icon-small\"\r\n                        onClick={async () => {\r\n                          await axios.post(`${API_URL}/copy/${item._id}`);\r\n                          showAlert(\"✅ Product copied\", \"success\");\r\n                          fetchItems();\r\n                        }}\r\n                        title=\"Duplicate\"\r\n                      >\r\n                        <Copy size={16} />\r\n                      </button>\r\n                      <button\r\n                        className=\"btn-icon-small danger\"\r\n                        onClick={() => handleDelete(item._id)}\r\n                        title=\"Delete\"\r\n                      >\r\n                        <Trash2 size={16} />\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        {/* Pagination */}\r\n        {totalPages > 1 && (\r\n          <div className=\"pagination\">\r\n            <button\r\n              className=\"pagination-btn\"\r\n              disabled={currentPage === 1}\r\n              onClick={() => setCurrentPage((p) => p - 1)}\r\n            >\r\n              <ChevronLeft size={16} /> Previous\r\n            </button>\r\n            <div className=\"pagination-pages\">\r\n              {Array.from({ length: Math.min(totalPages, 5) }, (_, i) => {\r\n                let pageNum;\r\n                if (totalPages <= 5) {\r\n                  pageNum = i + 1;\r\n                } else if (currentPage <= 3) {\r\n                  pageNum = i + 1;\r\n                } else if (currentPage >= totalPages - 2) {\r\n                  pageNum = totalPages - 4 + i;\r\n                } else {\r\n                  pageNum = currentPage - 2 + i;\r\n                }\r\n\r\n                if (pageNum < 1 || pageNum > totalPages) return null;\r\n\r\n                return (\r\n                  <button\r\n                    key={i}\r\n                    className={`pagination-btn ${currentPage === pageNum ? \"active\" : \"\"\r\n                      }`}\r\n                    onClick={() => setCurrentPage(pageNum)}\r\n                  >\r\n                    {pageNum}\r\n                  </button>\r\n                );\r\n              })}\r\n              {totalPages > 5 && <span className=\"pagination-dots\">...</span>}\r\n            </div>\r\n            <button\r\n              className=\"pagination-btn\"\r\n              disabled={currentPage === totalPages}\r\n              onClick={() => setCurrentPage((p) => p + 1)}\r\n            >\r\n              Next <ChevronRight size={16} />\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Modals */}\r\n      {showCategoryModal && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowCategoryModal(false)}>\r\n          <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h3>Add New Category</h3>\r\n              <button\r\n                className=\"btn-icon\"\r\n                onClick={() => setShowCategoryModal(false)}\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <div className=\"form-group\">\r\n                <label>Category Name *</label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={newCategoryName}\r\n                  onChange={(e) => setNewCategoryName(e.target.value)}\r\n                  className=\"form-input\"\r\n                  placeholder=\"Enter category name\"\r\n                  autoFocus\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                className=\"btn btn-secondary\"\r\n                onClick={() => setShowCategoryModal(false)}\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                className=\"btn btn-primary\"\r\n                onClick={handleAddCategory}\r\n                disabled={categoryLoading || !newCategoryName.trim()}\r\n              >\r\n                {categoryLoading ? (\r\n                  <>\r\n                    <Loader2 size={16} className=\"spinner\" />\r\n                    Saving...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Plus size={16} />\r\n                    Add Category\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Edit Modal */}\r\n      {showModal && (\r\n        <div className=\"modal-overlay\" onClick={() => setShowModal(false)}>\r\n          <div className=\"modal\" onClick={(e) => e.stopPropagation()}>\r\n            <div className=\"modal-header\">\r\n              <h3>\r\n                <Edit2 size={20} />\r\n                Edit Product\r\n              </h3>\r\n              <button\r\n                className=\"btn-icon\"\r\n                onClick={() => setShowModal(false)}\r\n              >\r\n                <X size={20} />\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <form onSubmit={handleSubmit}>\r\n                <div className=\"form-grid\">\r\n                  <div className=\"form-group\">\r\n                    <label>Product Name *</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      value={form.name}\r\n                      onChange={handleChange}\r\n                      className=\"form-input\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Category *</label>\r\n                    <select\r\n                      name=\"category\"\r\n                      value={form.category}\r\n                      onChange={handleChange}\r\n                      className=\"form-select\"\r\n                      required\r\n                    >\r\n                      <option value=\"\">Select Category</option>\r\n                      {categories.map((c) => (\r\n                        <option key={c._id} value={c._id}>\r\n                          {c.name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Subcategory</label>\r\n                    <select\r\n                      name=\"subcategory\"\r\n                      value={form.subcategory}\r\n                      onChange={handleChange}\r\n                      disabled={!subcategories.length}\r\n                      className=\"form-select\"\r\n                    >\r\n                      <option value=\"\">Select Subcategory</option>\r\n                      {subcategories.map((s) => (\r\n                        <option key={s._id} value={s._id}>\r\n                          {s.name}\r\n                        </option>\r\n                      ))}\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Base Price *</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.01\"\r\n                      name=\"basePrice\"\r\n                      value={form.basePrice}\r\n                      onChange={handleChange}\r\n                      className=\"form-input\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Weight</label>\r\n                    <div className=\"input-with-button\">\r\n                      <input\r\n                        type=\"number\"\r\n                        step=\"0.01\"\r\n                        name=\"weightValue\"\r\n                        value={form.weightValue}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Value\"\r\n                        className=\"form-input\"\r\n                        style={{ flex: 1 }}\r\n                      />\r\n                      <select\r\n                        name=\"weightUnit\"\r\n                        value={form.weightUnit}\r\n                        onChange={handleChange}\r\n                        className=\"form-select\"\r\n                        style={{ width: \"100px\" }}\r\n                      >\r\n                        <option value=\"kg\">Kg</option>\r\n                        <option value=\"gm\">Gram</option>\r\n                        <option value=\"ltr\">Litre</option>\r\n                        <option value=\"ml\">ML</option>\r\n                        <option value=\"pcs\">Pcs</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Profit/Loss</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.01\"\r\n                      name=\"profitLoss\"\r\n                      value={form.profitLoss}\r\n                      onChange={handleChange}\r\n                      className=\"form-input\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>GST %</label>\r\n                    <input\r\n                      type=\"number\"\r\n                      step=\"0.01\"\r\n                      name=\"gstPercent\"\r\n                      value={form.gstPercent}\r\n                      onChange={handleChange}\r\n                      className=\"form-input\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>HSN Code</label>\r\n                    <input\r\n                      name=\"hsnCode\"\r\n                      value={form.hsnCode}\r\n                      onChange={handleChange}\r\n                      className=\"form-input\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Tax Type</label>\r\n                    <select\r\n                      name=\"taxType\"\r\n                      value={form.taxType}\r\n                      onChange={handleChange}\r\n                      className=\"form-select\"\r\n                    >\r\n                      <option value=\"cgst_sgst\">CGST + SGST</option>\r\n                      <option value=\"igst\">IGST</option>\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Valid Till</label>\r\n                    <input\r\n                      type=\"date\"\r\n                      name=\"validTill\"\r\n                      value={form.validTill}\r\n                      onChange={handleChange}\r\n                      className=\"form-input\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Status</label>\r\n                    <select\r\n                      name=\"status\"\r\n                      value={form.status}\r\n                      onChange={handleChange}\r\n                      className=\"form-select\"\r\n                    >\r\n                      <option value=\"active\">Active</option>\r\n                      <option value=\"inactive\">Inactive</option>\r\n                    </select>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Image</label>\r\n                    <input\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleChange}\r\n                      className=\"form-input\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                  <label>Description</label>\r\n                  <textarea\r\n                    name=\"description\"\r\n                    value={form.description}\r\n                    onChange={handleChange}\r\n                    className=\"form-textarea\"\r\n                    rows=\"3\"\r\n                  ></textarea>\r\n                </div>\r\n                <div className=\"form-actions\">\r\n                  <button\r\n                    type=\"submit\"\r\n                    className=\"btn btn-primary\"\r\n                    disabled={loading}\r\n                  >\r\n                    {loading ? (\r\n                      <>\r\n                        <Loader2 size={16} className=\"spinner\" />\r\n                        Saving...\r\n                      </>\r\n                    ) : (\r\n                      <>\r\n                        <Save size={16} />\r\n                        Update Product\r\n                      </>\r\n                    )}\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    className=\"btn btn-secondary\"\r\n                    onClick={() => setShowModal(false)}\r\n                  >\r\n                    Cancel\r\n                  </button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Alert */}\r\n      {alertBox.show && (\r\n        <div className={`alert alert-${alertBox.type}`}>\r\n          <div className=\"alert-content\">\r\n            {alertBox.type === \"success\" && <CheckCircle size={20} className=\"alert-icon\" />}\r\n            {alertBox.type === \"error\" && <AlertCircle size={20} className=\"alert-icon\" />}\r\n            {alertBox.type === \"warning\" && <Info size={20} className=\"alert-icon\" />}\r\n            <span>{alertBox.message}</span>\r\n          </div>\r\n          <button\r\n            className=\"alert-close\"\r\n            onClick={() => setAlertBox({ ...alertBox, show: false })}\r\n          >\r\n            <X size={16} />\r\n          </button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":";;AAAA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AA4BA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAO,iBAAiB;AACxB,SACEC,IAAI,EACJC,IAAI,EACJC,MAAM,EACNC,IAAI,EACJC,MAAM,EACNC,MAAM,EACNC,KAAK,EACLC,CAAC,EACDC,WAAW,EACXC,YAAY,EACZC,QAAQ,EACRC,MAAM,EACNC,WAAW,EACXC,OAAO,EACPC,WAAW,EACXC,GAAG,EACHC,KAAK,EACLC,OAAO,EACPC,WAAW,EACXC,IAAI,EACJC,IAAI,EACJC,KAAK,EACLC,GAAG,EACHC,MAAM,EACNC,QAAQ,EACRC,MAAM,EACNC,KAAK,EACLC,eAAe,EACfC,QAAQ,EACRC,GAAG,EACHC,YAAY,EACZC,UAAU,EACVC,YAAY,EACZC,OAAO,EACPC,IAAI,EACJC,OAAO,QACF,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAEtB,MAAMC,OAAO,GAAG,iDAAiD;AACjE,MAAMC,YAAY,GAAG,qDAAqD;AAE1E,eAAe,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EAClC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG/C,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACgD,UAAU,EAAEC,aAAa,CAAC,GAAGjD,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACkD,aAAa,EAAEC,gBAAgB,CAAC,GAAGnD,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACoD,MAAM,EAAEC,SAAS,CAAC,GAAGrD,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACsD,OAAO,EAAEC,UAAU,CAAC,GAAGvD,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAM,CAACwD,IAAI,EAAEC,OAAO,CAAC,GAAGzD,QAAQ,CAAC;IAC/B0D,IAAI,EAAE,EAAE;IACRC,QAAQ,EAAE,EAAE;IACZC,WAAW,EAAE,EAAE;IACfC,WAAW,EAAE,EAAE;IACfC,SAAS,EAAE,EAAE;IACbC,UAAU,EAAE,EAAE;IACdC,UAAU,EAAE,EAAE;IACdC,OAAO,EAAE,EAAE;IACXC,OAAO,EAAE,WAAW;IACpBC,WAAW,EAAE,EAAE;IACfC,UAAU,EAAE,IAAI;IAChBC,SAAS,EAAE,EAAE;IACbC,IAAI,EAAE,IAAI;IACVC,MAAM,EAAE;EACV,CAAC,CAAC;EAEF,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGzE,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAAC0E,QAAQ,EAAEC,WAAW,CAAC,GAAG3E,QAAQ,CAAC,KAAK,CAAC;EAC/C,MAAM,CAAC4E,SAAS,EAAEC,YAAY,CAAC,GAAG7E,QAAQ,CAAC,KAAK,CAAC;EACjD,MAAM,CAAC8E,UAAU,EAAEC,aAAa,CAAC,GAAG/E,QAAQ,CAAC,IAAI,CAAC;EAElD,MAAM,CAACgF,aAAa,EAAEC,gBAAgB,CAAC,GAAGjF,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACkF,QAAQ,EAAEC,WAAW,CAAC,GAAGnF,QAAQ,CAAC,KAAK,CAAC;EAE/C,MAAM,CAACoF,WAAW,EAAEC,cAAc,CAAC,GAAGrF,QAAQ,CAAC,CAAC,CAAC;EACjD,MAAMsF,YAAY,GAAG,EAAE;EAEvB,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGxF,QAAQ,CAAC,EAAE,CAAC;EACxD,MAAM,CAACyF,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG1F,QAAQ,CAAC,EAAE,CAAC;EAC9D,MAAM,CAAC2F,UAAU,EAAEC,aAAa,CAAC,GAAG5F,QAAQ,CAAC,EAAE,CAAC;EAEhD,MAAM,CAAC6F,eAAe,EAAEC,kBAAkB,CAAC,GAAG9F,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC1D,MAAM,CAAC+F,eAAe,EAAEC,kBAAkB,CAAC,GAAGhG,QAAQ,CAAC,CAAC,CAAC,CAAC;EAE1D,MAAM,CAACiG,SAAS,EAAEC,YAAY,CAAC,GAAGlG,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACmG,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGpG,QAAQ,CAAC,KAAK,CAAC;EACjE,MAAM,CAACqG,eAAe,EAAEC,kBAAkB,CAAC,GAAGtG,QAAQ,CAAC,EAAE,CAAC;EAC1D,MAAM,CAACuG,eAAe,EAAEC,kBAAkB,CAAC,GAAGxG,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACyG,QAAQ,EAAEC,WAAW,CAAC,GAAG1G,QAAQ,CAAC;IACvC2G,IAAI,EAAE,KAAK;IACXC,OAAO,EAAE,EAAE;IACXC,IAAI,EAAE;EACR,CAAC,CAAC;EAEF9G,SAAS,CAAC,MAAM;IACd,IAAI0G,QAAQ,CAACE,IAAI,EAAE;MACjB,MAAMG,KAAK,GAAGC,UAAU,CAAC,MAAM;QAC7BL,WAAW,CAAEM,IAAI,KAAM;UAAE,GAAGA,IAAI;UAAEL,IAAI,EAAE;QAAM,CAAC,CAAC,CAAC;MACnD,CAAC,EAAE,IAAI,CAAC;MACR,OAAO,MAAMM,YAAY,CAACH,KAAK,CAAC;IAClC;EACF,CAAC,EAAE,CAACL,QAAQ,CAACE,IAAI,CAAC,CAAC;EAEnB5G,SAAS,CAAC,MAAM;IACdmH,eAAe,CAAC,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;EAENnH,SAAS,CAAC,MAAM;IACd,IAAIiD,UAAU,CAACmE,MAAM,GAAG,CAAC,EAAEC,UAAU,CAAC,CAAC;EACzC,CAAC,EAAE,CAACpE,UAAU,CAAC,CAAC;EAEhBjD,SAAS,CAAC,MAAM;IACd,IAAI,CAACwF,cAAc,EAAE;MACnBK,aAAa,CAAC,EAAE,CAAC;MACjBF,oBAAoB,CAAC,EAAE,CAAC;MACxB;IACF;IACA,MAAM2B,GAAG,GAAGrE,UAAU,CAACsE,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,GAAG,KAAKjC,cAAc,CAAC;IAC5DK,aAAa,CAAC,CAAAyB,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEnE,aAAa,KAAI,EAAE,CAAC;IACvCwC,oBAAoB,CAAC,EAAE,CAAC;EAC1B,CAAC,EAAE,CAACH,cAAc,EAAEvC,UAAU,CAAC,CAAC;EAEhCjD,SAAS,CAAC,MAAM;IACd,IAAI,CAACyD,IAAI,CAACG,QAAQ,EAAE;MAClBR,gBAAgB,CAAC,EAAE,CAAC;MACpBM,OAAO,CAAEuD,IAAI,KAAM;QAAE,GAAGA,IAAI;QAAEpD,WAAW,EAAE;MAAG,CAAC,CAAC,CAAC;MACjD;IACF;IACA,MAAMyD,GAAG,GAAGrE,UAAU,CAACsE,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,GAAG,KAAKhE,IAAI,CAACG,QAAQ,CAAC;IAC3DR,gBAAgB,CAAC,CAAAkE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEnE,aAAa,KAAI,EAAE,CAAC;EAC5C,CAAC,EAAE,CAACM,IAAI,CAACG,QAAQ,EAAEX,UAAU,CAAC,CAAC;EAE/B,MAAMkE,eAAe,GAAG,MAAAA,CAAA,KAAY;IAClC,IAAI;MAAA,IAAAO,SAAA;MACF,MAAMC,GAAG,GAAG,MAAMzH,KAAK,CAAC0H,GAAG,CAAChF,YAAY,CAAC;MACzC,KAAA8E,SAAA,GAAIC,GAAG,CAACE,IAAI,cAAAH,SAAA,eAARA,SAAA,CAAUI,OAAO,EAAE5E,aAAa,CAACyE,GAAG,CAACE,IAAI,CAAC5E,UAAU,IAAI,EAAE,CAAC;IACjE,CAAC,CAAC,OAAO8E,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,wBAAwB,EAAEF,GAAG,CAAC;MAC5CG,SAAS,CAAC,4BAA4B,EAAE,OAAO,CAAC;IAClD;EACF,CAAC;EAED,MAAMb,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MAAA,IAAAc,UAAA;MACF3E,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMmE,GAAG,GAAG,MAAMzH,KAAK,CAAC0H,GAAG,CAACjF,OAAO,CAAC;MACpC,KAAAwF,UAAA,GAAIR,GAAG,CAACE,IAAI,cAAAM,UAAA,eAARA,UAAA,CAAUL,OAAO,EAAE;QACrB,MAAMM,GAAG,GAAGT,GAAG,CAACE,IAAI,CAACA,IAAI,IAAI,EAAE;QAC/B,MAAMQ,IAAI,GAAG,EAAE;QACfD,GAAG,CAACE,OAAO,CAAEhB,GAAG,IAAK;UACnBA,GAAG,CAACnE,aAAa,CAACmF,OAAO,CAAEC,GAAG,IAAK;YACjCA,GAAG,CAACC,QAAQ,CAACF,OAAO,CAAEG,CAAC,IAAK;cAC1B;cACA,MAAMC,gBAAgB,GAAG;gBACvB,GAAGD,CAAC;gBACJ1E,SAAS,EAAE0E,CAAC,CAAC1E,SAAS,GAAG4E,UAAU,CAACF,CAAC,CAAC1E,SAAS,CAAC,CAAC6E,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM;gBACpEC,SAAS,EAAEJ,CAAC,CAACI,SAAS,GAAGF,UAAU,CAACF,CAAC,CAACI,SAAS,CAAC,CAACD,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM;gBACpE5E,UAAU,EAAEyE,CAAC,CAACzE,UAAU,GAAG2E,UAAU,CAACF,CAAC,CAACzE,UAAU,CAAC,CAAC4E,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM;gBACvEE,WAAW,EAAEL,CAAC,CAACK,WAAW,GAAGH,UAAU,CAACF,CAAC,CAACK,WAAW,CAAC,CAACF,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM;gBAC1E3E,UAAU,EAAEwE,CAAC,CAACxE,UAAU,GAAG0E,UAAU,CAACF,CAAC,CAACxE,UAAU,CAAC,CAAC2E,OAAO,CAAC,CAAC,CAAC,GAAG,MAAM;gBACvEhF,QAAQ,EAAE;kBACR6D,GAAG,EAAEH,GAAG,CAACyB,EAAE;kBACXpF,IAAI,EAAE2D,GAAG,CAAC3D,IAAI;kBACdqF,KAAK,EAAE1B,GAAG,CAAC0B;gBACb,CAAC;gBACDnF,WAAW,EAAE;kBACX4D,GAAG,EAAEc,GAAG,CAACQ,EAAE;kBACXpF,IAAI,EAAE4E,GAAG,CAAC5E,IAAI;kBACdqF,KAAK,EAAET,GAAG,CAACS;gBACb;cACF,CAAC;cACDX,IAAI,CAACY,IAAI,CAACP,gBAAgB,CAAC;YAC7B,CAAC,CAAC;UACJ,CAAC,CAAC;QACJ,CAAC,CAAC;QACFL,IAAI,CAACa,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK,IAAIC,IAAI,CAACD,CAAC,CAACE,SAAS,CAAC,GAAG,IAAID,IAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CAAC;QAClEtG,QAAQ,CAACqF,IAAI,CAAC;MAChB;IACF,CAAC,CAAC,OAAON,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEF,GAAG,CAAC;MACvCG,SAAS,CAAC,uBAAuB,EAAE,OAAO,CAAC;IAC7C,CAAC,SAAS;MACR1E,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM+F,YAAY,GAAIC,CAAC,IAAK;IAC1B,MAAM;MAAE7F,IAAI;MAAE8F,KAAK;MAAEC;IAAM,CAAC,GAAGF,CAAC,CAACG,MAAM;IACvC,IAAID,KAAK,aAALA,KAAK,eAALA,KAAK,CAAEtC,MAAM,EAAE;MACjB1D,OAAO,CAAE+E,CAAC,KAAM;QAAE,GAAGA,CAAC;QAAElE,IAAI,EAAEmF,KAAK,CAAC,CAAC;MAAE,CAAC,CAAC,CAAC;IAC5C,CAAC,MAAM;MACL;MACA,IAAI,CAAC,WAAW,EAAE,YAAY,EAAE,YAAY,EAAE,aAAa,CAAC,CAACE,QAAQ,CAACjG,IAAI,CAAC,EAAE;QAC3E,MAAMkG,QAAQ,GAAGlB,UAAU,CAACc,KAAK,CAAC;QAClC,IAAI,CAACK,KAAK,CAACD,QAAQ,CAAC,EAAE;UACpBnG,OAAO,CAAE+E,CAAC,KAAM;YAAE,GAAGA,CAAC;YAAE,CAAC9E,IAAI,GAAGkG,QAAQ,CAACjB,OAAO,CAAC,CAAC;UAAE,CAAC,CAAC,CAAC;QACzD,CAAC,MAAM;UACLlF,OAAO,CAAE+E,CAAC,KAAM;YAAE,GAAGA,CAAC;YAAE,CAAC9E,IAAI,GAAG8F;UAAM,CAAC,CAAC,CAAC;QAC3C;MACF,CAAC,MAAM;QACL/F,OAAO,CAAE+E,CAAC,KAAM;UAAE,GAAGA,CAAC;UAAE,CAAC9E,IAAI,GAAG8F;QAAM,CAAC,CAAC,CAAC;MAC3C;IACF;EACF,CAAC;EAED,MAAMvB,SAAS,GAAGA,CAACrB,OAAO,EAAEC,IAAI,GAAG,SAAS,KAAK;IAC/CH,WAAW,CAAC;MAAEC,IAAI,EAAE,IAAI;MAAEC,OAAO;MAAEC;IAAK,CAAC,CAAC;EAC5C,CAAC;EAED,MAAMiD,YAAY,GAAG,MAAOP,CAAC,IAAK;IAChCA,CAAC,CAACQ,cAAc,CAAC,CAAC;IAClBxG,UAAU,CAAC,IAAI,CAAC;IAEhB,MAAMyG,UAAU,GAAGlH,KAAK,CAACmH,IAAI,CAC1BzB,CAAC,IACAA,CAAC,CAAC9E,IAAI,CAACwG,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,KAAK3G,IAAI,CAACE,IAAI,CAACwG,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC,IAC9D3B,CAAC,CAAChB,GAAG,KAAKhD,MACd,CAAC;IAED,IAAIwF,UAAU,EAAE;MACd/B,SAAS,CAAC,gCAAgC,EAAE,OAAO,CAAC;MACpD1E,UAAU,CAAC,KAAK,CAAC;MACjB;IACF;IAEA,IAAI;MACF,IAAI,CAACC,IAAI,CAACE,IAAI,IAAI,CAACF,IAAI,CAACG,QAAQ,IAAI,CAACH,IAAI,CAACM,SAAS,EAAE;QACnDmE,SAAS,CAAC,0CAA0C,EAAE,OAAO,CAAC;QAC9D1E,UAAU,CAAC,KAAK,CAAC;QACjB;MACF;MAEA,MAAM6G,EAAE,GAAG,IAAIC,QAAQ,CAAC,CAAC;MACzBD,EAAE,CAACE,MAAM,CAAC,MAAM,EAAE9G,IAAI,CAACE,IAAI,CAACwG,IAAI,CAAC,CAAC,CAAC;MACnCE,EAAE,CAACE,MAAM,CAAC,UAAU,EAAE9G,IAAI,CAACG,QAAQ,CAAC;MAEpC,IAAIH,IAAI,CAACI,WAAW,EAAE;QACpB,MAAM0E,GAAG,GAAGpF,aAAa,CAACoE,IAAI,CAAEiD,CAAC,IAAKA,CAAC,CAAC/C,GAAG,KAAKhE,IAAI,CAACI,WAAW,CAAC;QACjE,IAAI0E,GAAG,EAAE;UACP8B,EAAE,CAACE,MAAM,CACP,aAAa,EACbE,IAAI,CAACC,SAAS,CAAC;YACb3B,EAAE,EAAER,GAAG,CAACd,GAAG;YACX9D,IAAI,EAAE4E,GAAG,CAAC5E,IAAI;YACdqF,KAAK,EAAET,GAAG,CAACS,KAAK,IAAI;UACtB,CAAC,CACH,CAAC;QACH;MACF,CAAC,MAAM;QACLqB,EAAE,CAACE,MAAM,CAAC,aAAa,EAAEE,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;MAChD;;MAEA;MACA,MAAM3G,SAAS,GAAG4E,UAAU,CAAClF,IAAI,CAACM,SAAS,CAAC,CAAC6E,OAAO,CAAC,CAAC,CAAC;MACvD,MAAM5E,UAAU,GAAG2E,UAAU,CAAClF,IAAI,CAACO,UAAU,IAAI,CAAC,CAAC,CAAC4E,OAAO,CAAC,CAAC,CAAC;MAC9D,MAAM3E,UAAU,GAAG0E,UAAU,CAAClF,IAAI,CAACQ,UAAU,IAAI,CAAC,CAAC,CAAC2E,OAAO,CAAC,CAAC,CAAC;MAE9DyB,EAAE,CAACE,MAAM,CAAC,WAAW,EAAExG,SAAS,CAAC;MACjCsG,EAAE,CAACE,MAAM,CAAC,YAAY,EAAEvG,UAAU,CAAC;MACnCqG,EAAE,CAACE,MAAM,CAAC,YAAY,EAAEtG,UAAU,CAAC;MAEnC,MAAMG,WAAW,GACfX,IAAI,CAACW,WAAW,IAAIuG,MAAM,CAAClH,IAAI,CAACW,WAAW,CAAC,GAAG,CAAC,GAC5CuE,UAAU,CAAClF,IAAI,CAACW,WAAW,CAAC,CAACwE,OAAO,CAAC,CAAC,CAAC,GACvC,MAAM;MAEZyB,EAAE,CAACE,MAAM,CACP,QAAQ,EACRE,IAAI,CAACC,SAAS,CAAC;QACbjB,KAAK,EAAErF,WAAW;QAClBwG,IAAI,EAAEnH,IAAI,CAACY,UAAU,IAAI;MAC3B,CAAC,CACH,CAAC;MAEDgG,EAAE,CAACE,MAAM,CAAC,SAAS,EAAE9G,IAAI,CAACS,OAAO,IAAI,EAAE,CAAC;MACxCmG,EAAE,CAACE,MAAM,CAAC,SAAS,EAAE9G,IAAI,CAACU,OAAO,CAAC;MAElC,IAAIV,IAAI,CAACK,WAAW,EAAEuG,EAAE,CAACE,MAAM,CAAC,aAAa,EAAE9G,IAAI,CAACK,WAAW,CAAC;MAChE,IAAIL,IAAI,CAACa,SAAS,EAAE+F,EAAE,CAACE,MAAM,CAAC,WAAW,EAAE9G,IAAI,CAACa,SAAS,CAAC;MAC1D+F,EAAE,CAACE,MAAM,CAAC,QAAQ,EAAE9G,IAAI,CAACe,MAAM,CAAC;MAChC,IAAIf,IAAI,CAACc,IAAI,EAAE8F,EAAE,CAACE,MAAM,CAAC,MAAM,EAAE9G,IAAI,CAACc,IAAI,CAAC;MAE3C,IAAIE,MAAM,EAAE;QACV,MAAMvE,KAAK,CAAC2K,GAAG,CAAC,GAAGlI,OAAO,IAAI8B,MAAM,EAAE,EAAE4F,EAAE,CAAC;QAC3CnC,SAAS,CAAC,gCAAgC,EAAE,SAAS,CAAC;MACxD,CAAC,MAAM;QACL,MAAMhI,KAAK,CAAC4K,IAAI,CAACnI,OAAO,EAAE0H,EAAE,CAAC;QAC7BnC,SAAS,CAAC,8BAA8B,EAAE,SAAS,CAAC;MACtD;MAEA,MAAMb,UAAU,CAAC,CAAC;MAClB0D,SAAS,CAAC,CAAC;IACb,CAAC,CAAC,OAAOhD,GAAG,EAAE;MAAA,IAAAiD,aAAA,EAAAC,kBAAA;MACZjD,OAAO,CAACC,KAAK,CAAC,YAAY,EAAEF,GAAG,CAAC;MAChC,IAAI,EAAAiD,aAAA,GAAAjD,GAAG,CAACmD,QAAQ,cAAAF,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcnD,IAAI,cAAAoD,kBAAA,uBAAlBA,kBAAA,CAAoBpE,OAAO,MAAK,6BAA6B,EAAE;QACjEqB,SAAS,CAAC,gCAAgC,EAAE,OAAO,CAAC;MACtD,CAAC,MAAM;QACLA,SAAS,CAAC,gBAAgB,EAAE,OAAO,CAAC;MACtC;IACF,CAAC,SAAS;MACR1E,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMuH,SAAS,GAAGA,CAAA,KAAM;IACtBrH,OAAO,CAAC;MACNC,IAAI,EAAE,EAAE;MACRC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE,EAAE;MACfC,WAAW,EAAE,EAAE;MACfC,SAAS,EAAE,EAAE;MACbC,UAAU,EAAE,EAAE;MACdM,SAAS,EAAE,EAAE;MACbF,WAAW,EAAE,EAAE;MACfC,UAAU,EAAE,IAAI;MAChBE,IAAI,EAAE,IAAI;MACVC,MAAM,EAAE;IACV,CAAC,CAAC;IACFE,SAAS,CAAC,IAAI,CAAC;IACfI,YAAY,CAAC,KAAK,CAAC;IACnBF,WAAW,CAAC,KAAK,CAAC;EACpB,CAAC;EAED,MAAMuG,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAAC7E,eAAe,CAAC6D,IAAI,CAAC,CAAC,EAAE;MAC3BjC,SAAS,CAAC,2BAA2B,EAAE,OAAO,CAAC;MAC/C;IACF;IAEA,IAAI;MAAA,IAAAkD,UAAA;MACF3E,kBAAkB,CAAC,IAAI,CAAC;MACxB,MAAMkB,GAAG,GAAG,MAAMzH,KAAK,CAAC4K,IAAI,CAAClI,YAAY,EAAE;QACzCe,IAAI,EAAE2C,eAAe,CAAC6D,IAAI,CAAC;MAC7B,CAAC,CAAC;MAEF,KAAAiB,UAAA,GAAIzD,GAAG,CAACE,IAAI,cAAAuD,UAAA,eAARA,UAAA,CAAUtD,OAAO,EAAE;QACrBI,SAAS,CAAC,+BAA+B,EAAE,SAAS,CAAC;QACrD3B,kBAAkB,CAAC,EAAE,CAAC;QACtBF,oBAAoB,CAAC,KAAK,CAAC;QAC3B,MAAMc,eAAe,CAAC,CAAC;MACzB,CAAC,MAAM;QACLe,SAAS,CAAC,uBAAuB,EAAE,OAAO,CAAC;MAC7C;IACF,CAAC,CAAC,OAAOH,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,oBAAoB,EAAEF,GAAG,CAAC;MACxCG,SAAS,CAAC,+BAA+B,EAAE,OAAO,CAAC;IACrD,CAAC,SAAS;MACRzB,kBAAkB,CAAC,KAAK,CAAC;IAC3B;EACF,CAAC;EAED,MAAM4E,UAAU,GAAIC,IAAI,IAAK;IAAA,IAAAC,cAAA,EAAAC,kBAAA,EAAAC,iBAAA,EAAAC,YAAA,EAAAC,aAAA;IAC3BjI,OAAO,CAAC;MACNC,IAAI,EAAE2H,IAAI,CAAC3H,IAAI,IAAI,EAAE;MACrBC,QAAQ,EAAE,EAAA2H,cAAA,GAAAD,IAAI,CAAC1H,QAAQ,cAAA2H,cAAA,wBAAAC,kBAAA,GAAbD,cAAA,CAAe9D,GAAG,cAAA+D,kBAAA,uBAAlBA,kBAAA,CAAoBI,QAAQ,CAAC,CAAC,KAAI,EAAE;MAC9C/H,WAAW,EAAE,EAAA4H,iBAAA,GAAAH,IAAI,CAACzH,WAAW,cAAA4H,iBAAA,uBAAhBA,iBAAA,CAAkBhE,GAAG,KAAI,EAAE;MACxC3D,WAAW,EAAEwH,IAAI,CAACxH,WAAW,IAAI,EAAE;MACnCC,SAAS,EAAEuH,IAAI,CAACvH,SAAS,IAAI,EAAE;MAC/BC,UAAU,EAAEsH,IAAI,CAACtH,UAAU,IAAI,CAAC;MAChCI,WAAW,EAAE,EAAAsH,YAAA,GAAAJ,IAAI,CAACO,MAAM,cAAAH,YAAA,uBAAXA,YAAA,CAAajC,KAAK,KAAI,EAAE;MACrCpF,UAAU,EAAE,EAAAsH,aAAA,GAAAL,IAAI,CAACO,MAAM,cAAAF,aAAA,uBAAXA,aAAA,CAAaf,IAAI,KAAI,IAAI;MACrC3G,UAAU,EAAEqH,IAAI,CAACrH,UAAU,IAAI,EAAE;MACjCC,OAAO,EAAEoH,IAAI,CAACpH,OAAO,IAAI,EAAE;MAC3BC,OAAO,EAAEmH,IAAI,CAACnH,OAAO,IAAI,WAAW;MACpCG,SAAS,EAAEgH,IAAI,CAAChH,SAAS,GAAGgH,IAAI,CAAChH,SAAS,CAACwH,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;MAC7DvH,IAAI,EAAE,IAAI;MACVC,MAAM,EAAE8G,IAAI,CAAC9G,MAAM,IAAI;IACzB,CAAC,CAAC;IAEF,MAAM8C,GAAG,GAAGrE,UAAU,CAACsE,IAAI,CAAEC,CAAC;MAAA,IAAAuE,eAAA;MAAA,OAAKvE,CAAC,CAACC,GAAG,OAAAsE,eAAA,GAAKT,IAAI,CAAC1H,QAAQ,cAAAmI,eAAA,uBAAbA,eAAA,CAAetE,GAAG;IAAA,EAAC;IAChErE,gBAAgB,CAAC,CAAAkE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEnE,aAAa,KAAI,EAAE,CAAC;IAC1CuB,SAAS,CAAC4G,IAAI,CAAC7D,GAAG,CAAC;IACnB3C,YAAY,CAAC,IAAI,CAAC;IAClBE,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,MAAMgH,YAAY,GAAG,MAAOjD,EAAE,IAAK;IACjC,IAAI,CAACkD,MAAM,CAACC,OAAO,CAAC,mBAAmB,CAAC,EAAE;IAC1C,IAAI;MACF,MAAMhM,KAAK,CAACiM,MAAM,CAAC,GAAGxJ,OAAO,IAAIoG,EAAE,EAAE,CAAC;MACtC/F,QAAQ,CAAEiE,IAAI,IAAKA,IAAI,CAACmF,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAAC5E,GAAG,KAAKsB,EAAE,CAAC,CAAC;MACpD7D,gBAAgB,CAAE+B,IAAI,IAAKA,IAAI,CAACmF,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKtD,EAAE,CAAC,CAAC;MACxD/D,aAAa,CAAC,IAAI,CAAC;MACnBkD,SAAS,CAAC,gCAAgC,EAAE,SAAS,CAAC;IACxD,CAAC,CAAC,OAAOH,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEF,GAAG,CAAC;MAClCG,SAAS,CAAC,iBAAiB,EAAE,OAAO,CAAC;IACvC;EACF,CAAC;EAED,MAAMoE,kBAAkB,GAAG,MAAOhB,IAAI,IAAK;IACzC,IAAI;MACF,MAAMiB,SAAS,GAAGjB,IAAI,CAAC9G,MAAM,KAAK,QAAQ,GAAG,UAAU,GAAG,QAAQ;MAClE,MAAMtE,KAAK,CAAC2K,GAAG,CAAC,GAAGlI,OAAO,WAAW2I,IAAI,CAAC7D,GAAG,EAAE,EAAE;QAAEjD,MAAM,EAAE+H;MAAU,CAAC,CAAC;MACvEvJ,QAAQ,CAAEiE,IAAI,IACZA,IAAI,CAACuF,GAAG,CAAEH,CAAC,IAAMA,CAAC,CAAC5E,GAAG,KAAK6D,IAAI,CAAC7D,GAAG,GAAG;QAAE,GAAG4E,CAAC;QAAE7H,MAAM,EAAE+H;MAAU,CAAC,GAAGF,CAAE,CACxE,CAAC;MACDnE,SAAS,CAAC,uBAAuBqE,SAAS,EAAE,EAAE,SAAS,CAAC;IAC1D,CAAC,CAAC,OAAOxE,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,qBAAqB,EAAEF,GAAG,CAAC;MACzCG,SAAS,CAAC,wBAAwB,EAAE,OAAO,CAAC;IAC9C;EACF,CAAC;EAED,MAAMuE,oBAAoB,GAAGA,CAAC1D,EAAE,EAAE2D,GAAG,EAAEjD,KAAK,KAAK;IAC/CzG,QAAQ,CAAEiE,IAAI,IACZA,IAAI,CAACuF,GAAG,CAAEH,CAAC,IAAMA,CAAC,CAAC5E,GAAG,KAAKsB,EAAE,GAAG;MAAE,GAAGsD,CAAC;MAAE,CAACK,GAAG,GAAGjD;IAAM,CAAC,GAAG4C,CAAE,CAC7D,CAAC;EACH,CAAC;EAED,MAAMM,cAAc,GAAG,MAAAA,CAAA,KAAY;IACjC,IAAI,CAAC1H,aAAa,CAACmC,MAAM,EAAE;MACzBc,SAAS,CAAC,mBAAmB,EAAE,SAAS,CAAC;MACzC;IACF;IAEA,MAAM0E,OAAO,GAAG7J,KAAK,CAClBqJ,MAAM,CAAEC,CAAC,IAAKpH,aAAa,CAAC2E,QAAQ,CAACyC,CAAC,CAAC5E,GAAG,CAAC,CAAC,CAC5C+E,GAAG,CAAEH,CAAC,KAAM;MACXtD,EAAE,EAAEsD,CAAC,CAAC5E,GAAG;MACT1D,SAAS,EAAE4E,UAAU,CAAC0D,CAAC,CAACtI,SAAS,CAAC,CAAC6E,OAAO,CAAC,CAAC,CAAC;MAC7C5E,UAAU,EAAE2E,UAAU,CAAC0D,CAAC,CAACrI,UAAU,CAAC,CAAC4E,OAAO,CAAC,CAAC,CAAC;MAC/C3E,UAAU,EAAE0E,UAAU,CAAC0D,CAAC,CAACpI,UAAU,IAAI,CAAC,CAAC,CAAC2E,OAAO,CAAC,CAAC,CAAC;MACpD1E,OAAO,EAAEmI,CAAC,CAACnI,OAAO,IAAI,EAAE;MACxBC,OAAO,EAAEkI,CAAC,CAAClI,OAAO,IAAI,WAAW;MACjCK,MAAM,EAAE6H,CAAC,CAAC7H;IACZ,CAAC,CAAC,CAAC;IAEL,IAAI;MACF,MAAMtE,KAAK,CAAC4K,IAAI,CAAC,GAAGnI,OAAO,cAAc,EAAE;QAAE6F,QAAQ,EAAEoE;MAAQ,CAAC,CAAC;MACjE1E,SAAS,CAAC,wBAAwB,EAAE,SAAS,CAAC;MAC9C9C,WAAW,CAAC,KAAK,CAAC;MAClBF,gBAAgB,CAAC,EAAE,CAAC;MACpBmC,UAAU,CAAC,CAAC;IACd,CAAC,CAAC,OAAOU,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,iBAAiB,EAAEF,GAAG,CAAC;MACrCG,SAAS,CAAC,oBAAoB,EAAE,OAAO,CAAC;IAC1C;EACF,CAAC;EAED,MAAM2E,gBAAgB,GAAG,MAAAA,CAAA,KAAY;IACnC,IAAI,CAAC5H,aAAa,CAACmC,MAAM,EAAE;MACzBc,SAAS,CAAC,mBAAmB,EAAE,SAAS,CAAC;MACzC;IACF;IACA,IAAI,CAAC+D,MAAM,CAACC,OAAO,CAAC,wBAAwB,CAAC,EAAE;IAE/C,IAAI;MACF,MAAMY,OAAO,CAACC,GAAG,CACf9H,aAAa,CAACuH,GAAG,CAAEzD,EAAE,IAAK7I,KAAK,CAACiM,MAAM,CAAC,GAAGxJ,OAAO,IAAIoG,EAAE,EAAE,CAAC,CAC5D,CAAC;MACD7D,gBAAgB,CAAC,EAAE,CAAC;MACpBmC,UAAU,CAAC,CAAC;MACZjC,WAAW,CAAC,KAAK,CAAC;MAClB8C,SAAS,CAAC,0BAA0B,EAAE,SAAS,CAAC;IAClD,CAAC,CAAC,OAAOH,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,mBAAmB,EAAEF,GAAG,CAAC;MACvCG,SAAS,CAAC,sBAAsB,EAAE,OAAO,CAAC;IAC5C;EACF,CAAC;EAED,MAAM8E,eAAe,GAAG,MAAO1B,IAAI,IAAK;IAAA,IAAA2B,qBAAA;IACtC,MAAMC,OAAO,GAAGvE,UAAU,EAAAsE,qBAAA,GAACnH,eAAe,CAACwF,IAAI,CAAC7D,GAAG,CAAC,cAAAwF,qBAAA,cAAAA,qBAAA,GAAI3B,IAAI,CAACvH,SAAS,CAAC,CAAC6E,OAAO,CAAC,CAAC,CAAC;IAClF,IAAIkB,KAAK,CAACoD,OAAO,CAAC,EAAE;MAClBhF,SAAS,CAAC,oBAAoB,EAAE,OAAO,CAAC;MACxC;IACF;IAEA,IAAI;MAAA,IAAAiF,eAAA;MACF3J,UAAU,CAAC,IAAI,CAAC;MAChB,MAAM6G,EAAE,GAAG,IAAIC,QAAQ,CAAC,CAAC;MACzBD,EAAE,CAACE,MAAM,CAAC,MAAM,EAAEe,IAAI,CAAC3H,IAAI,CAAC;MAC5B0G,EAAE,CAACE,MAAM,CAAC,UAAU,GAAA4C,eAAA,GAAE7B,IAAI,CAAC1H,QAAQ,cAAAuJ,eAAA,uBAAbA,eAAA,CAAe1F,GAAG,CAAC;MAEzC,IAAI6D,IAAI,CAACzH,WAAW,EAAE;QACpBwG,EAAE,CAACE,MAAM,CAAC,aAAa,EAAEE,IAAI,CAACC,SAAS,CAACY,IAAI,CAACzH,WAAW,CAAC,CAAC;MAC5D;MAEAwG,EAAE,CAACE,MAAM,CAAC,aAAa,EAAEe,IAAI,CAACxH,WAAW,IAAI,EAAE,CAAC;MAChDuG,EAAE,CAACE,MAAM,CAAC,WAAW,EAAE2C,OAAO,CAAC;MAC/B7C,EAAE,CAACE,MAAM,CAAC,YAAY,EAAEe,IAAI,CAACtH,UAAU,CAAC;MACxCqG,EAAE,CAACE,MAAM,CAAC,QAAQ,EAAEe,IAAI,CAAC9G,MAAM,CAAC;MAChC6F,EAAE,CAACE,MAAM,CAAC,YAAY,EAAEe,IAAI,CAACrH,UAAU,IAAI,CAAC,CAAC;MAC7CoG,EAAE,CAACE,MAAM,CAAC,SAAS,EAAEe,IAAI,CAACpH,OAAO,IAAI,EAAE,CAAC;MACxCmG,EAAE,CAACE,MAAM,CAAC,SAAS,EAAEe,IAAI,CAACnH,OAAO,IAAI,WAAW,CAAC;MACjDkG,EAAE,CAACE,MAAM,CAAC,QAAQ,EAAEE,IAAI,CAACC,SAAS,CAACY,IAAI,CAACO,MAAM,CAAC,CAAC;MAEhD,MAAMlE,GAAG,GAAG,MAAMzH,KAAK,CAAC2K,GAAG,CAAC,GAAGlI,OAAO,IAAI2I,IAAI,CAAC7D,GAAG,EAAE,EAAE4C,EAAE,CAAC;MACzD,IAAI1C,GAAG,CAACE,IAAI,CAACC,OAAO,EAAE;QACpB,MAAMT,UAAU,CAAC,CAAC;QAClBtB,kBAAkB,CAAE0C,CAAC,KAAM;UAAE,GAAGA,CAAC;UAAE,CAAC6C,IAAI,CAAC7D,GAAG,GAAG2F;QAAU,CAAC,CAAC,CAAC;QAC5DlF,SAAS,CAAC,sBAAsB,EAAE,SAAS,CAAC;MAC9C;IACF,CAAC,CAAC,OAAOH,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAClBG,SAAS,CAAC,iBAAiB,EAAE,OAAO,CAAC;IACvC,CAAC,SAAS;MACR1E,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAM6J,gBAAgB,GAAG,MAAO/B,IAAI,IAAK;IAAA,IAAAgC,qBAAA;IACvC,MAAMC,IAAI,GAAG5E,UAAU,EAAA2E,qBAAA,GAACtH,eAAe,CAACsF,IAAI,CAAC7D,GAAG,CAAC,cAAA6F,qBAAA,cAAAA,qBAAA,GAAI,CAAC,CAAC,CAAC1E,OAAO,CAAC,CAAC,CAAC;IAClE,IAAIkB,KAAK,CAACyD,IAAI,CAAC,EAAE;MACfrF,SAAS,CAAC,qBAAqB,EAAE,OAAO,CAAC;MACzC;IACF;IAEA,IAAI;MACF1E,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMmE,GAAG,GAAG,MAAMzH,KAAK,CAAC2K,GAAG,CAAC,GAAGlI,OAAO,eAAe2I,IAAI,CAAC7D,GAAG,EAAE,EAAE;QAAE8F;MAAK,CAAC,CAAC;MAC1E,IAAI5F,GAAG,CAACE,IAAI,CAACC,OAAO,EAAE;QACpB,MAAMT,UAAU,CAAC,CAAC;QAClBpB,kBAAkB,CAAEwC,CAAC,KAAM;UAAE,GAAGA,CAAC;UAAE,CAAC6C,IAAI,CAAC7D,GAAG,GAAG2F;QAAU,CAAC,CAAC,CAAC;QAC5DlF,SAAS,CAAC,uBAAuB,EAAE,SAAS,CAAC;MAC/C;IACF,CAAC,CAAC,OAAOH,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;MAClBG,SAAS,CAAC,iBAAiB,EAAE,OAAO,CAAC;IACvC,CAAC,SAAS;MACR1E,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMgK,aAAa,GAAGzK,KAAK,CAACqJ,MAAM,CAAEd,IAAI,IAAK;IAAA,IAAAmC,eAAA,EAAAC,kBAAA,EAAAC,eAAA,EAAAC,kBAAA;IAC3C,MAAMC,CAAC,GAAGxK,MAAM,CAAC+G,WAAW,CAAC,CAAC;IAC9B,MAAM0D,SAAS,GACb,CAACxC,IAAI,CAAC3H,IAAI,IAAI,EAAE,EAAEyG,WAAW,CAAC,CAAC,CAACR,QAAQ,CAACiE,CAAC,CAAC,IAC3C,CAAC,EAAAJ,eAAA,GAAAnC,IAAI,CAAC1H,QAAQ,cAAA6J,eAAA,uBAAbA,eAAA,CAAe9J,IAAI,KAAI,EAAE,EAAEyG,WAAW,CAAC,CAAC,CAACR,QAAQ,CAACiE,CAAC,CAAC,IACrD,CAAC,EAAAH,kBAAA,GAAApC,IAAI,CAACzH,WAAW,cAAA6J,kBAAA,uBAAhBA,kBAAA,CAAkB/J,IAAI,KAAI,EAAE,EAAEyG,WAAW,CAAC,CAAC,CAACR,QAAQ,CAACiE,CAAC,CAAC;IAE1D,MAAME,aAAa,GACjB,CAACvI,cAAc,IAAI,EAAAmI,eAAA,GAAArC,IAAI,CAAC1H,QAAQ,cAAA+J,eAAA,uBAAbA,eAAA,CAAelG,GAAG,MAAKjC,cAAc;IAC1D,MAAMwI,QAAQ,GACZ,CAACtI,iBAAiB,IAAI,EAAAkI,kBAAA,GAAAtC,IAAI,CAACzH,WAAW,cAAA+J,kBAAA,uBAAhBA,kBAAA,CAAkBnG,GAAG,MAAK/B,iBAAiB;IAEnE,OAAOoI,SAAS,IAAIC,aAAa,IAAIC,QAAQ;EAC/C,CAAC,CAAC;EAEF,IAAIC,WAAW,GAAG,CAAC,GAAGT,aAAa,CAAC;EACpC,IAAItH,SAAS,KAAK,KAAK,EAAE;IACvB+H,WAAW,CAAC/E,IAAI,CACd,CAACC,CAAC,EAAEC,CAAC,KAAK,CAACT,UAAU,CAACQ,CAAC,CAACN,SAAS,CAAC,IAAI,CAAC,KAAKF,UAAU,CAACS,CAAC,CAACP,SAAS,CAAC,IAAI,CAAC,CAC1E,CAAC;EACH,CAAC,MAAM,IAAI3C,SAAS,KAAK,MAAM,EAAE;IAC/B+H,WAAW,CAAC/E,IAAI,CACd,CAACC,CAAC,EAAEC,CAAC,KAAK,CAACT,UAAU,CAACS,CAAC,CAACP,SAAS,CAAC,IAAI,CAAC,KAAKF,UAAU,CAACQ,CAAC,CAACN,SAAS,CAAC,IAAI,CAAC,CAC1E,CAAC;EACH;EAEA,MAAMqF,WAAW,GAAG7I,WAAW,GAAGE,YAAY;EAC9C,MAAM4I,YAAY,GAAGF,WAAW,CAACG,KAAK,CACpCF,WAAW,GAAG3I,YAAY,EAC1B2I,WACF,CAAC;EACD,MAAMG,UAAU,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,IAAI,CAACP,WAAW,CAAC7G,MAAM,GAAG7B,YAAY,CAAC,CAAC;EAE5E,oBACE/C,OAAA;IAAKiM,SAAS,EAAC,qBAAqB;IAAAC,QAAA,gBAElClM,OAAA;MAAKiM,SAAS,EAAC,kBAAkB;MAAAC,QAAA,gBAC/BlM,OAAA;QAAKiM,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BlM,OAAA;UAAIiM,SAAS,EAAC,cAAc;UAAAC,QAAA,EAAC;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACpDtM,OAAA;UAAGiM,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAAC;QAE/B;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eACNtM,OAAA;QAAKiM,SAAS,EAAC,gBAAgB;QAAAC,QAAA,eAC7BlM,OAAA;UACEiM,SAAS,EAAC,iBAAiB;UAC3BM,OAAO,EAAEA,CAAA,KAAM;YACbnK,WAAW,CAAC,CAACD,QAAQ,CAAC;YACtBD,SAAS,CAAC,IAAI,CAAC;YACfqG,SAAS,CAAC,CAAC;UACb,CAAE;UAAA2D,QAAA,gBAEFlM,OAAA,CAACrC,IAAI;YAAC6O,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EACjBnK,QAAQ,GAAG,YAAY,GAAG,aAAa;QAAA;UAAAgK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNtM,OAAA;MAAKiM,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzBlM,OAAA;QAAKiM,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBlM,OAAA;UAAKiM,SAAS,EAAC,mBAAmB;UAAAC,QAAA,eAChClM,OAAA,CAACxB,OAAO;YAACgO,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClB,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BlM,OAAA;YAAIiM,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAE3L,KAAK,CAACqE;UAAM;YAAAuH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAC9CtM,OAAA;YAAGiM,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAC;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACNtM,OAAA;QAAKiM,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBlM,OAAA;UAAKiM,SAAS,EAAC,oBAAoB;UAAAC,QAAA,eACjClM,OAAA,CAACvB,WAAW;YAAC+N,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtB,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BlM,OAAA;YAAIiM,SAAS,EAAC,YAAY;YAAAC,QAAA,EACvB3L,KAAK,CAACqJ,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAAC7H,MAAM,KAAK,QAAQ,CAAC,CAAC4C;UAAM;YAAAuH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAChD,CAAC,eACLtM,OAAA;YAAGiM,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAC;UAAe;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACNtM,OAAA;QAAKiM,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBlM,OAAA;UAAKiM,SAAS,EAAC,qBAAqB;UAAAC,QAAA,eAClClM,OAAA,CAACZ,MAAM;YAACoN,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjB,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BlM,OAAA;YAAIiM,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAEzL,UAAU,CAACmE;UAAM;YAAAuH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACnDtM,OAAA;YAAGiM,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAC;UAAU;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACrC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eACNtM,OAAA;QAAKiM,SAAS,EAAC,WAAW;QAAAC,QAAA,gBACxBlM,OAAA;UAAKiM,SAAS,EAAC,qBAAqB;UAAAC,QAAA,eAClClM,OAAA,CAACT,QAAQ;YAACiN,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnB,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BlM,OAAA;YAAIiM,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAElB,aAAa,CAACpG;UAAM;YAAAuH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eACtDtM,OAAA;YAAGiM,SAAS,EAAC,YAAY;YAAAC,QAAA,EAAC;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,eAGNtM,OAAA;MAAKiM,SAAS,EAAC,qBAAqB;MAAAC,QAAA,eAClClM,OAAA;QAAKiM,SAAS,EAAC,gBAAgB;QAAAC,QAAA,gBAC7BlM,OAAA;UAAKiM,SAAS,EAAC,YAAY;UAAAC,QAAA,gBACzBlM,OAAA,CAACjC,MAAM;YAACyO,IAAI,EAAE,EAAG;YAACP,SAAS,EAAC;UAAa;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eAC5CtM,OAAA;YACEsE,IAAI,EAAC,MAAM;YACXmI,WAAW,EAAC,gCAAgC;YAC5CxF,KAAK,EAAEpG,MAAO;YACd6L,QAAQ,EAAG1F,CAAC,IAAK;cACflG,SAAS,CAACkG,CAAC,CAACG,MAAM,CAACF,KAAK,CAAC;cACzBnE,cAAc,CAAC,CAAC,CAAC;YACnB,CAAE;YACFmJ,SAAS,EAAC;UAAc;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACzB,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,aAAa;UAAAC,QAAA,gBAC1BlM,OAAA;YAAKiM,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3BlM,OAAA;cAAAkM,QAAA,EAAO;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACvBtM,OAAA;cACEiH,KAAK,EAAEjE,cAAe;cACtB0J,QAAQ,EAAG1F,CAAC,IAAK/D,iBAAiB,CAAC+D,CAAC,CAACG,MAAM,CAACF,KAAK,CAAE;cACnDgF,SAAS,EAAC,eAAe;cAAAC,QAAA,gBAEzBlM,OAAA;gBAAQiH,KAAK,EAAC,EAAE;gBAAAiF,QAAA,EAAC;cAAc;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,EACvC7L,UAAU,CAACuJ,GAAG,CAAEhF,CAAC,iBAChBhF,OAAA;gBAAoBiH,KAAK,EAAEjC,CAAC,CAACC,GAAI;gBAAAiH,QAAA,EAC9BlH,CAAC,CAAC7D;cAAI,GADI6D,CAAC,CAACC,GAAG;gBAAAkH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAEV,CACT,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3BlM,OAAA;cAAAkM,QAAA,EAAO;YAAW;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC1BtM,OAAA;cACEiH,KAAK,EAAE/D,iBAAkB;cACzBwJ,QAAQ,EAAG1F,CAAC,IAAK7D,oBAAoB,CAAC6D,CAAC,CAACG,MAAM,CAACF,KAAK,CAAE;cACtD0F,QAAQ,EAAE,CAACvJ,UAAU,CAACwB,MAAO;cAC7BqH,SAAS,EAAC,eAAe;cAAAC,QAAA,gBAEzBlM,OAAA;gBAAQiH,KAAK,EAAC,EAAE;gBAAAiF,QAAA,EAAC;cAAiB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,EAC1ClJ,UAAU,CAAC4G,GAAG,CAAEhC,CAAC,iBAChBhI,OAAA;gBAAoBiH,KAAK,EAAEe,CAAC,CAAC/C,GAAI;gBAAAiH,QAAA,EAC9BlE,CAAC,CAAC7G;cAAI,GADI6G,CAAC,CAAC/C,GAAG;gBAAAkH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAEV,CACT,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3BlM,OAAA;cAAAkM,QAAA,EAAO;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACtBtM,OAAA;cACEiH,KAAK,EAAEvD,SAAU;cACjBgJ,QAAQ,EAAG1F,CAAC,IAAKrD,YAAY,CAACqD,CAAC,CAACG,MAAM,CAACF,KAAK,CAAE;cAC9CgF,SAAS,EAAC,eAAe;cAAAC,QAAA,gBAEzBlM,OAAA;gBAAQiH,KAAK,EAAC,EAAE;gBAAAiF,QAAA,EAAC;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACjCtM,OAAA;gBAAQiH,KAAK,EAAC,KAAK;gBAAAiF,QAAA,EAAC;cAAkB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAC/CtM,OAAA;gBAAQiH,KAAK,EAAC,MAAM;gBAAAiF,QAAA,EAAC;cAAkB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1C,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,cAAc;YAAAC,QAAA,gBAC3BlM,OAAA;cAAAkM,QAAA,EAAO;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACtBtM,OAAA;cAAKiM,SAAS,EAAC,gBAAgB;cAAAC,QAAA,gBAC7BlM,OAAA;gBACEiM,SAAS,EAAC,mBAAmB;gBAC7BM,OAAO,EAAEA,CAAA,KAAM9C,MAAM,CAACmD,IAAI,CAAC,GAAGzM,OAAO,SAAS,EAAE,QAAQ,CAAE;gBAAA+L,QAAA,gBAE1DlM,OAAA,CAAC3B,QAAQ;kBAACmO,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACxB;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTtM,OAAA;gBAAOiM,SAAS,EAAC,mBAAmB;gBAAAC,QAAA,gBAClClM,OAAA;kBACEsE,IAAI,EAAC,MAAM;kBACXuI,MAAM,EAAC,MAAM;kBACbC,KAAK,EAAE;oBAAEC,OAAO,EAAE;kBAAO,CAAE;kBAC3BL,QAAQ,EAAE,MAAO1F,CAAC,IAAK;oBACrB,IAAI;sBACF,MAAMa,EAAE,GAAG,IAAIC,QAAQ,CAAC,CAAC;sBACzBD,EAAE,CAACE,MAAM,CAAC,MAAM,EAAEf,CAAC,CAACG,MAAM,CAACD,KAAK,CAAC,CAAC,CAAC,CAAC;sBACpC,MAAMxJ,KAAK,CAAC4K,IAAI,CAAC,GAAGnI,OAAO,SAAS,EAAE0H,EAAE,CAAC;sBACzCnC,SAAS,CAAC,yBAAyB,EAAE,SAAS,CAAC;sBAC/Cb,UAAU,CAAC,CAAC;oBACd,CAAC,CAAC,OAAOU,GAAG,EAAE;sBACZG,SAAS,CAAC,iBAAiB,EAAE,OAAO,CAAC;oBACvC;kBACF;gBAAE;kBAAAyG,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACH,CAAC,eACFtM,OAAA,CAAC1B,MAAM;kBAACkO,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE,CAAC,eACtB;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGL7J,aAAa,CAACmC,MAAM,GAAG,CAAC,iBACvB5E,OAAA;MAAKiM,SAAS,EAAC,mBAAmB;MAAAC,QAAA,gBAChClM,OAAA;QAAKiM,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BlM,OAAA;UAAAkM,QAAA,gBACElM,OAAA,CAACzB,WAAW;YAACiO,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EACxB7J,aAAa,CAACmC,MAAM,EAAC,OAAK,EAACnC,aAAa,CAACmC,MAAM,GAAG,CAAC,GAAG,GAAG,GAAG,EAAE,EAAE,GAAG,EAAC,UAEvE;QAAA;UAAAuH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACLtM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,EAC1B,CAACvJ,QAAQ,gBACR3C,OAAA,CAAAE,SAAA;YAAAgM,QAAA,gBACElM,OAAA;cACEiM,SAAS,EAAC,gBAAgB;cAC1BM,OAAO,EAAElC,gBAAiB;cAAA6B,QAAA,gBAE1BlM,OAAA,CAACnC,MAAM;gBAAC2O,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBACtB;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTtM,OAAA;cACEiM,SAAS,EAAC,iBAAiB;cAC3BM,OAAO,EAAEA,CAAA,KAAM3J,WAAW,CAAC,IAAI,CAAE;cAAAsJ,QAAA,gBAEjClM,OAAA,CAACpC,IAAI;gBAAC4O,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,cACpB;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA,eACT,CAAC,gBAEHtM,OAAA;YACEiM,SAAS,EAAC,mBAAmB;YAC7BM,OAAO,EAAEA,CAAA,KAAM3J,WAAW,CAAC,KAAK,CAAE;YAAAsJ,QAAA,gBAElClM,OAAA,CAAC9B,CAAC;cAACsO,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,WACjB;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QACT;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,EAEL3J,QAAQ,iBACP3C,OAAA;QAAKiM,SAAS,EAAC,iBAAiB;QAAAC,QAAA,gBAC9BlM,OAAA;UAAAkM,QAAA,EAAI;QAAkB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC3BtM,OAAA;UAAKiM,SAAS,EAAC,WAAW;UAAAC,QAAA,EACvB3L,KAAK,CACHqJ,MAAM,CAAEd,IAAI,IAAKrG,aAAa,CAAC2E,QAAQ,CAAC0B,IAAI,CAAC7D,GAAG,CAAC,CAAC,CAClD+E,GAAG,CAAElB,IAAI,iBACR9I,OAAA;YAAoBiM,SAAS,EAAC,gBAAgB;YAAAC,QAAA,gBAC5ClM,OAAA;cAAAkM,QAAA,EAAKpD,IAAI,CAAC3H;YAAI;cAAAgL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAK,CAAC,eACpBtM,OAAA;cAAKiM,SAAS,EAAC,aAAa;cAAAC,QAAA,gBAC1BlM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAU;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACzBtM,OAAA;kBACEsE,IAAI,EAAC,QAAQ;kBACb0I,IAAI,EAAC,MAAM;kBACX/F,KAAK,EAAE6B,IAAI,CAACvH,SAAU;kBACtBmL,QAAQ,EAAG1F,CAAC,IACViD,oBAAoB,CAClBnB,IAAI,CAAC7D,GAAG,EACR,WAAW,EACXkB,UAAU,CAACa,CAAC,CAACG,MAAM,CAACF,KAAK,CAAC,CAACb,OAAO,CAAC,CAAC,CACtC,CACD;kBACD6F,SAAS,EAAC;gBAAY;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAW;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC1BtM,OAAA;kBACEsE,IAAI,EAAC,QAAQ;kBACb0I,IAAI,EAAC,MAAM;kBACX/F,KAAK,EAAE6B,IAAI,CAACtH,UAAW;kBACvBkL,QAAQ,EAAG1F,CAAC,IACViD,oBAAoB,CAClBnB,IAAI,CAAC7D,GAAG,EACR,YAAY,EACZkB,UAAU,CAACa,CAAC,CAACG,MAAM,CAACF,KAAK,CAAC,CAACb,OAAO,CAAC,CAAC,CACtC,CACD;kBACD6F,SAAS,EAAC;gBAAY;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAK;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACpBtM,OAAA;kBACEsE,IAAI,EAAC,QAAQ;kBACb0I,IAAI,EAAC,MAAM;kBACX/F,KAAK,EAAE6B,IAAI,CAACrH,UAAU,IAAI,EAAG;kBAC7BiL,QAAQ,EAAG1F,CAAC,IACViD,oBAAoB,CAClBnB,IAAI,CAAC7D,GAAG,EACR,YAAY,EACZkB,UAAU,CAACa,CAAC,CAACG,MAAM,CAACF,KAAK,CAAC,CAACb,OAAO,CAAC,CAAC,CACtC,CACD;kBACD6F,SAAS,EAAC;gBAAY;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACvBtM,OAAA;kBACEiH,KAAK,EAAE6B,IAAI,CAACpH,OAAO,IAAI,EAAG;kBAC1BgL,QAAQ,EAAG1F,CAAC,IACViD,oBAAoB,CAClBnB,IAAI,CAAC7D,GAAG,EACR,SAAS,EACT+B,CAAC,CAACG,MAAM,CAACF,KACX,CACD;kBACDgF,SAAS,EAAC;gBAAY;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACvBtM,OAAA;kBACEiH,KAAK,EAAE6B,IAAI,CAACnH,OAAO,IAAI,WAAY;kBACnC+K,QAAQ,EAAG1F,CAAC,IACViD,oBAAoB,CAClBnB,IAAI,CAAC7D,GAAG,EACR,SAAS,EACT+B,CAAC,CAACG,MAAM,CAACF,KACX,CACD;kBACDgF,SAAS,EAAC,aAAa;kBAAAC,QAAA,gBAEvBlM,OAAA;oBAAQiH,KAAK,EAAC,WAAW;oBAAAiF,QAAA,EAAC;kBAAW;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eAC9CtM,OAAA;oBAAQiH,KAAK,EAAC,MAAM;oBAAAiF,QAAA,EAAC;kBAAI;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5B,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACrBtM,OAAA;kBACEiH,KAAK,EAAE6B,IAAI,CAAC9G,MAAO;kBACnB0K,QAAQ,EAAG1F,CAAC,IACViD,oBAAoB,CAClBnB,IAAI,CAAC7D,GAAG,EACR,QAAQ,EACR+B,CAAC,CAACG,MAAM,CAACF,KACX,CACD;kBACDgF,SAAS,EAAC,aAAa;kBAAAC,QAAA,gBAEvBlM,OAAA;oBAAQiH,KAAK,EAAC,QAAQ;oBAAAiF,QAAA,EAAC;kBAAM;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eACtCtM,OAAA;oBAAQiH,KAAK,EAAC,UAAU;oBAAAiF,QAAA,EAAC;kBAAQ;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACpC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC;UAAA,GAnGExD,IAAI,CAAC7D,GAAG;YAAAkH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAoGb,CACN;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BlM,OAAA;YAAQiM,SAAS,EAAC,iBAAiB;YAACM,OAAO,EAAEpC,cAAe;YAAA+B,QAAA,gBAC1DlM,OAAA,CAACjB,IAAI;cAACyN,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,qBACpB;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACTtM,OAAA;YACEiM,SAAS,EAAC,mBAAmB;YAC7BM,OAAO,EAAE,MAAAA,CAAA,KAAY;cACnB,IAAI,CAAC9J,aAAa,CAACmC,MAAM,EAAE;gBACzBc,SAAS,CAAC,mBAAmB,EAAE,SAAS,CAAC;gBACzC;cACF;cACA,KAAK,IAAIa,EAAE,IAAI9D,aAAa,EAC1B,MAAM/E,KAAK,CAAC4K,IAAI,CAAC,GAAGnI,OAAO,SAASoG,EAAE,EAAE,CAAC;cAC3Cb,SAAS,CAAC,yBAAyB,EAAE,SAAS,CAAC;cAC/Cb,UAAU,CAAC,CAAC;YACd,CAAE;YAAAqH,QAAA,gBAEFlM,OAAA,CAAClC,IAAI;cAAC0O,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,kBACpB;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACTtM,OAAA;YACEiM,SAAS,EAAC,mBAAmB;YAC7BM,OAAO,EAAE,MAAAA,CAAA,KAAY;cACnB,IAAI,CAAC9J,aAAa,CAACmC,MAAM,EAAE;gBACzBc,SAAS,CAAC,mBAAmB,EAAE,SAAS,CAAC;gBACzC;cACF;cACA,MAAMP,GAAG,GAAG,MAAMzH,KAAK,CAAC4K,IAAI,CAC1B,GAAGnI,OAAO,kBAAkB,EAC5B;gBAAE8M,GAAG,EAAExK;cAAc,CAAC,EACtB;gBAAEyK,YAAY,EAAE;cAAO,CACzB,CAAC;cACD,MAAMC,GAAG,GAAG1D,MAAM,CAAC2D,GAAG,CAACC,eAAe,CAAC,IAAIC,IAAI,CAAC,CAACnI,GAAG,CAACE,IAAI,CAAC,CAAC,CAAC;cAC5D,MAAMsB,CAAC,GAAG4G,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;cACrC7G,CAAC,CAAC8G,IAAI,GAAGN,GAAG;cACZxG,CAAC,CAAC+G,QAAQ,GAAG,cAAc;cAC3B/G,CAAC,CAACgH,KAAK,CAAC,CAAC;YACX,CAAE;YAAAzB,QAAA,gBAEFlM,OAAA,CAACV,eAAe;cAACkN,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,oBAC/B;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CACN,EAGAnK,QAAQ,iBACPnC,OAAA;MAAKiM,SAAS,EAAC,WAAW;MAAAC,QAAA,gBACxBlM,OAAA;QAAKiM,SAAS,EAAC,aAAa;QAAAC,QAAA,gBAC1BlM,OAAA;UAAAkM,QAAA,gBACElM,OAAA,CAAChB,KAAK;YAACwN,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,EAClBrK,MAAM,GAAG,cAAc,GAAG,iBAAiB;QAAA;UAAAkK,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC,eACLtM,OAAA;UAAQiM,SAAS,EAAC,UAAU;UAACM,OAAO,EAAEhE,SAAU;UAAA2D,QAAA,eAC9ClM,OAAA,CAAC9B,CAAC;YAACsO,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CAAC,eACNtM,OAAA;QAAM4N,QAAQ,EAAErG,YAAa;QAAA2E,QAAA,gBAC3BlM,OAAA;UAAKiM,SAAS,EAAC,WAAW;UAAAC,QAAA,gBACxBlM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAc;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC7BtM,OAAA;cACEsE,IAAI,EAAC,MAAM;cACXnD,IAAI,EAAC,MAAM;cACX8F,KAAK,EAAEhG,IAAI,CAACE,IAAK;cACjBuL,QAAQ,EAAE3F,YAAa;cACvBkF,SAAS,EAAC,YAAY;cACtB4B,QAAQ;cACRpB,WAAW,EAAC;YAAoB;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACjC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACzBtM,OAAA;cAAKiM,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAChClM,OAAA;gBACEmB,IAAI,EAAC,UAAU;gBACf8F,KAAK,EAAEhG,IAAI,CAACG,QAAS;gBACrBsL,QAAQ,EAAE3F,YAAa;gBACvBkF,SAAS,EAAC,aAAa;gBACvB4B,QAAQ;gBAAA3B,QAAA,gBAERlM,OAAA;kBAAQiH,KAAK,EAAC,EAAE;kBAAAiF,QAAA,EAAC;gBAAe;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,EACxC7L,UAAU,CAACuJ,GAAG,CAAEhF,CAAC,iBAChBhF,OAAA;kBAAoBiH,KAAK,EAAEjC,CAAC,CAACC,GAAI;kBAAAiH,QAAA,EAC9BlH,CAAC,CAAC7D;gBAAI,GADI6D,CAAC,CAACC,GAAG;kBAAAkH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAEV,CACT,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI,CAAC,eACTtM,OAAA;gBACEsE,IAAI,EAAC,QAAQ;gBACbiI,OAAO,EAAEA,CAAA,KAAM1I,oBAAoB,CAAC,IAAI,CAAE;gBAC1CoI,SAAS,EAAC,kBAAkB;gBAC5Ba,KAAK,EAAE;kBAAEgB,UAAU,EAAE,gBAAgB;kBAAEC,KAAK,EAAE,OAAO;kBAAEC,MAAM,EAAE,MAAM;kBAAEC,YAAY,EAAE,KAAK;kBAAEC,OAAO,EAAE,KAAK;kBAAEC,MAAM,EAAE;gBAAU,CAAE;gBAAAjC,QAAA,eAEhIlM,OAAA,CAACrC,IAAI;kBAAC6O,IAAI,EAAE;gBAAG;kBAAAL,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACZ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAW;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC1BtM,OAAA;cACEmB,IAAI,EAAC,aAAa;cAClB8F,KAAK,EAAEhG,IAAI,CAACI,WAAY;cACxBqL,QAAQ,EAAE3F,YAAa;cACvB4F,QAAQ,EAAE,CAAChM,aAAa,CAACiE,MAAO;cAChCqH,SAAS,EAAC,aAAa;cAAAC,QAAA,gBAEvBlM,OAAA;gBAAQiH,KAAK,EAAC,EAAE;gBAAAiF,QAAA,EAAC;cAAkB;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,EAC3C3L,aAAa,CAACqJ,GAAG,CAAEhC,CAAC,iBACnBhI,OAAA;gBAAoBiH,KAAK,EAAEe,CAAC,CAAC/C,GAAI;gBAAAiH,QAAA,EAC9BlE,CAAC,CAAC7G;cAAI,GADI6G,CAAC,CAAC/C,GAAG;gBAAAkH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAEV,CACT,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACI,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAY;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC3BtM,OAAA;cACEsE,IAAI,EAAC,QAAQ;cACb0I,IAAI,EAAC,MAAM;cACX7L,IAAI,EAAC,WAAW;cAChB8F,KAAK,EAAEhG,IAAI,CAACM,SAAU;cACtBmL,QAAQ,EAAE3F,YAAa;cACvBkF,SAAS,EAAC,YAAY;cACtB4B,QAAQ;cACRpB,WAAW,EAAC;YAAM;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACnB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACrBtM,OAAA;cAAKiM,SAAS,EAAC,mBAAmB;cAAAC,QAAA,gBAChClM,OAAA;gBACEsE,IAAI,EAAC,QAAQ;gBACb0I,IAAI,EAAC,MAAM;gBACX7L,IAAI,EAAC,aAAa;gBAClB8F,KAAK,EAAEhG,IAAI,CAACW,WAAY;gBACxB8K,QAAQ,EAAE3F,YAAa;gBACvB0F,WAAW,EAAC,OAAO;gBACnBR,SAAS,EAAC,YAAY;gBACtBa,KAAK,EAAE;kBAAEsB,IAAI,EAAE;gBAAE;cAAE;gBAAAjC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACpB,CAAC,eACFtM,OAAA;gBACEmB,IAAI,EAAC,YAAY;gBACjB8F,KAAK,EAAEhG,IAAI,CAACY,UAAW;gBACvB6K,QAAQ,EAAE3F,YAAa;gBACvBkF,SAAS,EAAC,aAAa;gBACvBa,KAAK,EAAE;kBAAEuB,KAAK,EAAE;gBAAQ,CAAE;gBAAAnC,QAAA,gBAE1BlM,OAAA;kBAAQiH,KAAK,EAAC,IAAI;kBAAAiF,QAAA,EAAC;gBAAE;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eAC9BtM,OAAA;kBAAQiH,KAAK,EAAC,IAAI;kBAAAiF,QAAA,EAAC;gBAAI;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eAChCtM,OAAA;kBAAQiH,KAAK,EAAC,KAAK;kBAAAiF,QAAA,EAAC;gBAAK;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eAClCtM,OAAA;kBAAQiH,KAAK,EAAC,IAAI;kBAAAiF,QAAA,EAAC;gBAAE;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC,eAC9BtM,OAAA;kBAAQiH,KAAK,EAAC,KAAK;kBAAAiF,QAAA,EAAC;gBAAG;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAC1B,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAW;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC1BtM,OAAA;cACEsE,IAAI,EAAC,QAAQ;cACb0I,IAAI,EAAC,MAAM;cACX7L,IAAI,EAAC,YAAY;cACjB8F,KAAK,EAAEhG,IAAI,CAACO,UAAW;cACvBkL,QAAQ,EAAE3F,YAAa;cACvBkF,SAAS,EAAC,YAAY;cACtBQ,WAAW,EAAC;YAAG;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAChB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAK;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACpBtM,OAAA;cACEsE,IAAI,EAAC,QAAQ;cACb0I,IAAI,EAAC,MAAM;cACX7L,IAAI,EAAC,YAAY;cACjB8F,KAAK,EAAEhG,IAAI,CAACQ,UAAW;cACvBiL,QAAQ,EAAE3F,YAAa;cACvBkF,SAAS,EAAC,YAAY;cACtBQ,WAAW,EAAC;YAAgB;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC7B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACvBtM,OAAA;cACEmB,IAAI,EAAC,SAAS;cACd8F,KAAK,EAAEhG,IAAI,CAACS,OAAQ;cACpBgL,QAAQ,EAAE3F,YAAa;cACvBkF,SAAS,EAAC,YAAY;cACtBQ,WAAW,EAAC;YAAW;cAAAN,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACxB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAQ;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACvBtM,OAAA;cACEmB,IAAI,EAAC,SAAS;cACd8F,KAAK,EAAEhG,IAAI,CAACU,OAAQ;cACpB+K,QAAQ,EAAE3F,YAAa;cACvBkF,SAAS,EAAC,aAAa;cAAAC,QAAA,gBAEvBlM,OAAA;gBAAQiH,KAAK,EAAC,WAAW;gBAAAiF,QAAA,EAAC;cAAW;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eAC9CtM,OAAA;gBAAQiH,KAAK,EAAC,MAAM;gBAAAiF,QAAA,EAAC;cAAI;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACzBtM,OAAA;cACEsE,IAAI,EAAC,MAAM;cACXnD,IAAI,EAAC,WAAW;cAChB8F,KAAK,EAAEhG,IAAI,CAACa,SAAU;cACtB4K,QAAQ,EAAE3F,YAAa;cACvBkF,SAAS,EAAC;YAAY;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAM;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACrBtM,OAAA;cACEmB,IAAI,EAAC,QAAQ;cACb8F,KAAK,EAAEhG,IAAI,CAACe,MAAO;cACnB0K,QAAQ,EAAE3F,YAAa;cACvBkF,SAAS,EAAC,aAAa;cAAAC,QAAA,gBAEvBlM,OAAA;gBAAQiH,KAAK,EAAC,QAAQ;gBAAAiF,QAAA,EAAC;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACtCtM,OAAA;gBAAQiH,KAAK,EAAC,UAAU;gBAAAiF,QAAA,EAAC;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACpC,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACN,CAAC,eACNtM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAK;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eACpBtM,OAAA;cACEsE,IAAI,EAAC,MAAM;cACXuI,MAAM,EAAC,SAAS;cAChBH,QAAQ,EAAE3F,YAAa;cACvBkF,SAAS,EAAC;YAAY;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvB,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,YAAY;UAAAC,QAAA,gBACzBlM,OAAA;YAAAkM,QAAA,EAAO;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC1BtM,OAAA;YACEmB,IAAI,EAAC,aAAa;YAClB8F,KAAK,EAAEhG,IAAI,CAACK,WAAY;YACxBoL,QAAQ,EAAE3F,YAAa;YACvBkF,SAAS,EAAC,eAAe;YACzBqC,IAAI,EAAC,GAAG;YACR7B,WAAW,EAAC;UAAwB;YAAAN,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3B,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACT,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BlM,OAAA;YACEsE,IAAI,EAAC,QAAQ;YACb2H,SAAS,EAAC,iBAAiB;YAC3BU,QAAQ,EAAE5L,OAAQ;YAAAmL,QAAA,EAEjBnL,OAAO,gBACNf,OAAA,CAAAE,SAAA;cAAAgM,QAAA,gBACElM,OAAA,CAACpB,OAAO;gBAAC4N,IAAI,EAAE,EAAG;gBAACP,SAAS,EAAC;cAAS;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,aAE3C;YAAA,eAAE,CAAC,GACDrK,MAAM,gBACRjC,OAAA,CAAAE,SAAA;cAAAgM,QAAA,gBACElM,OAAA,CAACjB,IAAI;gBAACyN,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,kBAEpB;YAAA,eAAE,CAAC,gBAEHtM,OAAA,CAAAE,SAAA;cAAAgM,QAAA,gBACElM,OAAA,CAACrC,IAAI;gBAAC6O,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,eAEpB;YAAA,eAAE;UACH;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK,CAAC,eACTtM,OAAA;YAAQsE,IAAI,EAAC,QAAQ;YAAC2H,SAAS,EAAC,mBAAmB;YAACM,OAAO,EAAEhE,SAAU;YAAA2D,QAAA,EAAC;UAExE;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CACN,eAGDtM,OAAA;MAAKiM,SAAS,EAAC,YAAY;MAAAC,QAAA,gBACzBlM,OAAA;QAAKiM,SAAS,EAAC,cAAc;QAAAC,QAAA,gBAC3BlM,OAAA;UAAAkM,QAAA,gBACElM,OAAA;YAAAkM,QAAA,EAAI;UAAa;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACtBtM,OAAA;YAAGiM,SAAS,EAAC,gBAAgB;YAAAC,QAAA,GAAC,UACpB,EAACP,YAAY,CAAC/G,MAAM,EAAC,MAAI,EAACoG,aAAa,CAACpG,MAAM,EAAC,WACzD;UAAA;YAAAuH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,eAAe;UAAAC,QAAA,eAC5BlM,OAAA;YAAKiM,SAAS,EAAC,gBAAgB;YAAAC,QAAA,gBAC7BlM,OAAA;cACEsE,IAAI,EAAC,UAAU;cACfiK,OAAO,EACL9L,aAAa,CAACmC,MAAM,KAAKoG,aAAa,CAACpG,MAAM,IAC7CoG,aAAa,CAACpG,MAAM,GAAG,CACxB;cACD8H,QAAQ,EAAEA,CAAA,KAAM;gBACd,IAAIjK,aAAa,CAACmC,MAAM,KAAKoG,aAAa,CAACpG,MAAM,EAC/ClC,gBAAgB,CAAC,EAAE,CAAC,CAAC,KAClBA,gBAAgB,CAACsI,aAAa,CAAChB,GAAG,CAAEH,CAAC,IAAKA,CAAC,CAAC5E,GAAG,CAAC,CAAC;cACxD;YAAE;cAAAkH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACFtM,OAAA;cAAAkM,QAAA,EAAM;YAAU;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAM,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACpB;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAENtM,OAAA;QAAKiM,SAAS,EAAC,kBAAkB;QAAAC,QAAA,eAC/BlM,OAAA;UAAOiM,SAAS,EAAC,YAAY;UAAAC,QAAA,gBAC3BlM,OAAA;YAAAkM,QAAA,eACElM,OAAA;cAAAkM,QAAA,gBACElM,OAAA;gBAAAmM,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC,eACTtM,OAAA;gBAAAkM,QAAA,EAAI;cAAC;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACVtM,OAAA;gBAAAkM,QAAA,EAAI;cAAK;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACdtM,OAAA;gBAAAkM,QAAA,EAAI;cAAI;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACbtM,OAAA;gBAAAkM,QAAA,EAAI;cAAQ;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACjBtM,OAAA;gBAAAkM,QAAA,EAAI;cAAU;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACnBtM,OAAA;gBAAAkM,QAAA,EAAI;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACftM,OAAA;gBAAAkM,QAAA,EAAI;cAAW;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACpBtM,OAAA;gBAAAkM,QAAA,EAAI;cAAU;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACnBtM,OAAA;gBAAAkM,QAAA,EAAI;cAAG;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACZtM,OAAA;gBAAAkM,QAAA,EAAI;cAAG;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACZtM,OAAA;gBAAAkM,QAAA,EAAI;cAAU;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACnBtM,OAAA;gBAAAkM,QAAA,EAAI;cAAU;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACnBtM,OAAA;gBAAAkM,QAAA,EAAI;cAAM;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC,eACftM,OAAA;gBAAAkM,QAAA,EAAI;cAAO;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACd;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA,CAAC,eACRtM,OAAA;YAAAkM,QAAA,EACGP,YAAY,CAAC3B,GAAG,CAAC,CAAClB,IAAI,EAAE0F,CAAC;cAAA,IAAAC,eAAA,EAAAC,kBAAA,EAAAC,sBAAA;cAAA,oBACxB3O,OAAA;gBAAAkM,QAAA,gBACElM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBACEsE,IAAI,EAAC,UAAU;oBACfiK,OAAO,EAAE9L,aAAa,CAAC2E,QAAQ,CAAC0B,IAAI,CAAC7D,GAAG,CAAE;oBAC1CyH,QAAQ,EAAEA,CAAA,KACRhK,gBAAgB,CAAE+B,IAAI,IACpBA,IAAI,CAAC2C,QAAQ,CAAC0B,IAAI,CAAC7D,GAAG,CAAC,GACnBR,IAAI,CAACmF,MAAM,CAAEC,CAAC,IAAKA,CAAC,KAAKf,IAAI,CAAC7D,GAAG,CAAC,GAClC,CAAC,GAAGR,IAAI,EAAEqE,IAAI,CAAC7D,GAAG,CACxB;kBACD;oBAAAkH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACF;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACA,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,EAAK,CAACrJ,WAAW,GAAG,CAAC,IAAIE,YAAY,IAAIyL,CAAC,GAAG,CAAC;gBAAC;kBAAArC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAK,CAAC,eACrDtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBAAKiM,SAAS,EAAC,aAAa;oBAAAC,QAAA,EACzBpD,IAAI,CAACtC,KAAK,gBACTxG,OAAA;sBAAK4O,GAAG,EAAE9F,IAAI,CAACtC,KAAM;sBAACqI,GAAG,EAAE/F,IAAI,CAAC3H;oBAAK;sBAAAgL,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,gBAExCtM,OAAA;sBAAKiM,SAAS,EAAC,mBAAmB;sBAAAC,QAAA,eAChClM,OAAA,CAACrB,KAAK;wBAAC6N,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAChB;kBACN;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBAAKiM,SAAS,EAAC,cAAc;oBAAAC,QAAA,gBAC3BlM,OAAA;sBAAAkM,QAAA,EAASpD,IAAI,CAAC3H;oBAAI;sBAAAgL,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAS,CAAC,EAC3BxD,IAAI,CAACxH,WAAW,iBACftB,OAAA;sBAAAkM,QAAA,GAAQpD,IAAI,CAACxH,WAAW,CAACwN,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,EAAC,KAAG;oBAAA;sBAAA3C,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAO,CACrD;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBAAKiM,SAAS,EAAC,eAAe;oBAAAC,QAAA,gBAC5BlM,OAAA;sBAAMiM,SAAS,EAAC,gBAAgB;sBAAAC,QAAA,EAC7B,EAAAuC,eAAA,GAAA3F,IAAI,CAAC1H,QAAQ,cAAAqN,eAAA,uBAAbA,eAAA,CAAetN,IAAI,KAAI;oBAAG;sBAAAgL,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACvB,CAAC,EACN,EAAAoC,kBAAA,GAAA5F,IAAI,CAACzH,WAAW,cAAAqN,kBAAA,uBAAhBA,kBAAA,CAAkBvN,IAAI,kBACrBnB,OAAA;sBAAAkM,QAAA,EAAQpD,IAAI,CAACzH,WAAW,CAACF;oBAAI;sBAAAgL,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CACtC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBAAKiM,SAAS,EAAC,gBAAgB;oBAAAC,QAAA,gBAC7BlM,OAAA;sBACEsE,IAAI,EAAC,QAAQ;sBACb0I,IAAI,EAAC,MAAM;sBACX/F,KAAK,EACH3D,eAAe,CAACwF,IAAI,CAAC7D,GAAG,CAAC,KAAK2F,SAAS,GACnCtH,eAAe,CAACwF,IAAI,CAAC7D,GAAG,CAAC,GACzB6D,IAAI,CAACvH,SACV;sBACDmL,QAAQ,EAAG1F,CAAC,IACVzD,kBAAkB,CAAE0C,CAAC,KAAM;wBACzB,GAAGA,CAAC;wBACJ,CAAC6C,IAAI,CAAC7D,GAAG,GAAG+B,CAAC,CAACG,MAAM,CAACF;sBACvB,CAAC,CAAC,CACH;sBACDgF,SAAS,EAAC;oBAAa;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACxB,CAAC,eACFtM,OAAA;sBACEiM,SAAS,EAAC,gBAAgB;sBAC1BM,OAAO,EAAEA,CAAA,KAAM/B,eAAe,CAAC1B,IAAI,CAAE;sBACrCiG,KAAK,EAAC,MAAM;sBAAA7C,QAAA,eAEZlM,OAAA,CAAC/B,KAAK;wBAACuO,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACb,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBAAKiM,SAAS,EAAC,aAAa;oBAAAC,QAAA,gBAC1BlM,OAAA,CAACX,KAAK;sBAACmN,IAAI,EAAE,EAAG;sBAACM,KAAK,EAAE;wBAAEkC,WAAW,EAAE;sBAAE;oBAAE;sBAAA7C,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE,CAAC,EAC7CxD,IAAI,CAACO,MAAM,GACR,GAAGlD,UAAU,CAAC2C,IAAI,CAACO,MAAM,CAACpC,KAAK,CAAC,CAACb,OAAO,CAAC,CAAC,CAAC,IAAI0C,IAAI,CAACO,MAAM,CAACjB,IAAI,EAAE,GACjE,SAAS;kBAAA;oBAAA+D,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACV;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBAAKiM,SAAS,EAAC,gBAAgB;oBAAAC,QAAA,gBAC7BlM,OAAA;sBACEsE,IAAI,EAAC,QAAQ;sBACb0I,IAAI,EAAC,MAAM;sBACXP,WAAW,EAAC,QAAQ;sBACpBxF,KAAK,GAAA0H,sBAAA,GAAEnL,eAAe,CAACsF,IAAI,CAAC7D,GAAG,CAAC,cAAA0J,sBAAA,cAAAA,sBAAA,GAAI,EAAG;sBACvCjC,QAAQ,EAAG1F,CAAC,IACVvD,kBAAkB,CAAEwC,CAAC,KAAM;wBACzB,GAAGA,CAAC;wBACJ,CAAC6C,IAAI,CAAC7D,GAAG,GAAG+B,CAAC,CAACG,MAAM,CAACF;sBACvB,CAAC,CAAC,CACH;sBACDgF,SAAS,EAAC;oBAAa;sBAAAE,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACxB,CAAC,eACFtM,OAAA;sBACEiM,SAAS,EAAC,gBAAgB;sBAC1BM,OAAO,EAAEA,CAAA,KAAM1B,gBAAgB,CAAC/B,IAAI,CAAE;sBACtCiG,KAAK,EAAC,MAAM;sBAAA7C,QAAA,eAEZlM,OAAA,CAAC/B,KAAK;wBAACuO,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACb,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBAAMiM,SAAS,EAAC,aAAa;oBAAAC,QAAA,GAAC,QAC3B,EAAC/F,UAAU,CAAC2C,IAAI,CAACzC,SAAS,IAAI,GAAG,CAAC,CAACD,OAAO,CAAC,CAAC,CAAC;kBAAA;oBAAA+F,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1C;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,EACGpD,IAAI,CAACpH,OAAO,gBACX1B,OAAA;oBAAMiM,SAAS,EAAC,WAAW;oBAAAC,QAAA,EAAEpD,IAAI,CAACpH;kBAAO;oBAAAyK,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAO,CAAC,GAEjD;gBACD;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,EACGpD,IAAI,CAACrH,UAAU,gBACdzB,OAAA;oBAAMiM,SAAS,EAAC,WAAW;oBAAAC,QAAA,GAAE/F,UAAU,CAAC2C,IAAI,CAACrH,UAAU,CAAC,CAAC2E,OAAO,CAAC,CAAC,CAAC,EAAC,GAAC;kBAAA;oBAAA+F,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,GAE5E;gBACD;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBAAMiM,SAAS,EAAE,oBAAoBnD,IAAI,CAACxC,WAAW,GAAG,CAAC,GAAG,QAAQ,GAAG,UAAU,EAAG;oBAAA4F,QAAA,GAAC,QAClF,EAAC/F,UAAU,CAAC2C,IAAI,CAACxC,WAAW,IAAI,GAAG,CAAC,CAACF,OAAO,CAAC,CAAC,CAAC;kBAAA;oBAAA+F,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC5C;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACL,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,EACGpD,IAAI,CAACxC,WAAW,KAAK,CAAC,IAAIH,UAAU,CAAC2C,IAAI,CAACxC,WAAW,CAAC,KAAK,CAAC,gBAC3DtG,OAAA;oBAAMiM,SAAS,EAAC,oBAAoB;oBAAAC,QAAA,EAAC;kBAAI;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAM,CAAC,GAEhD,CAAC,MAAM;oBACL,MAAM2C,IAAI,GAAG9I,UAAU,CAAC2C,IAAI,CAACzC,SAAS,CAAC,GAAGF,UAAU,CAAC2C,IAAI,CAACxC,WAAW,CAAC;oBACtE,oBACEtG,OAAA;sBAAMiM,SAAS,EAAE,cAAcgD,IAAI,IAAI,CAAC,GAAG,QAAQ,GAAG,MAAM,EAAG;sBAAA/C,QAAA,GAC5D+C,IAAI,IAAI,CAAC,gBAAGjP,OAAA,CAACN,UAAU;wBAAC8M,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,gBAAGtM,OAAA,CAACL,YAAY;wBAAC6M,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,EACjER,IAAI,CAACoD,GAAG,CAACD,IAAI,CAAC,CAAC7I,OAAO,CAAC,CAAC,CAAC;oBAAA;sBAAA+F,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACtB,CAAC;kBAEX,CAAC,EAAE;gBACJ;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACC,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBACEiM,SAAS,EAAE,gBAAgBnD,IAAI,CAAC9G,MAAM,KAAK,QAAQ,GAAG,QAAQ,GAAG,UAAU,EACtE;oBACLuK,OAAO,EAAEA,CAAA,KAAMzC,kBAAkB,CAAChB,IAAI,CAAE;oBAAAoD,QAAA,EAEvCpD,IAAI,CAAC9G,MAAM,KAAK,QAAQ,gBACvBhC,OAAA,CAAAE,SAAA;sBAAAgM,QAAA,gBACElM,OAAA,CAACf,GAAG;wBAACuN,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,WACnB;oBAAA,eAAE,CAAC,gBAEHtM,OAAA,CAAAE,SAAA;sBAAAgM,QAAA,gBACElM,OAAA,CAACd,MAAM;wBAACsN,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE,CAAC,aACtB;oBAAA,eAAE;kBACH;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACK;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACP,CAAC,eACLtM,OAAA;kBAAAkM,QAAA,eACElM,OAAA;oBAAKiM,SAAS,EAAC,gBAAgB;oBAAAC,QAAA,gBAC7BlM,OAAA;sBACEiM,SAAS,EAAC,gBAAgB;sBAC1BM,OAAO,EAAEA,CAAA,KAAM1D,UAAU,CAACC,IAAI,CAAE;sBAChCiG,KAAK,EAAC,MAAM;sBAAA7C,QAAA,eAEZlM,OAAA,CAACpC,IAAI;wBAAC4O,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACZ,CAAC,eACTtM,OAAA;sBACEiM,SAAS,EAAC,gBAAgB;sBAC1BM,OAAO,EAAE,MAAAA,CAAA,KAAY;wBACnB,MAAM7O,KAAK,CAAC4K,IAAI,CAAC,GAAGnI,OAAO,SAAS2I,IAAI,CAAC7D,GAAG,EAAE,CAAC;wBAC/CS,SAAS,CAAC,kBAAkB,EAAE,SAAS,CAAC;wBACxCb,UAAU,CAAC,CAAC;sBACd,CAAE;sBACFkK,KAAK,EAAC,WAAW;sBAAA7C,QAAA,eAEjBlM,OAAA,CAAClC,IAAI;wBAAC0O,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACZ,CAAC,eACTtM,OAAA;sBACEiM,SAAS,EAAC,uBAAuB;sBACjCM,OAAO,EAAEA,CAAA,KAAM/C,YAAY,CAACV,IAAI,CAAC7D,GAAG,CAAE;sBACtC8J,KAAK,EAAC,QAAQ;sBAAA7C,QAAA,eAEdlM,OAAA,CAACnC,MAAM;wBAAC2O,IAAI,EAAE;sBAAG;wBAAAL,QAAA,EAAAC,YAAA;wBAAAC,UAAA;wBAAAC,YAAA;sBAAA,OAAE;oBAAC;sBAAAH,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACd,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACN;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC;cAAA,GA3LExD,IAAI,CAAC7D,GAAG;gBAAAkH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OA4Lb,CAAC;YAAA,CACN;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,EAGLT,UAAU,GAAG,CAAC,iBACb7L,OAAA;QAAKiM,SAAS,EAAC,YAAY;QAAAC,QAAA,gBACzBlM,OAAA;UACEiM,SAAS,EAAC,gBAAgB;UAC1BU,QAAQ,EAAE9J,WAAW,KAAK,CAAE;UAC5B0J,OAAO,EAAEA,CAAA,KAAMzJ,cAAc,CAAEmD,CAAC,IAAKA,CAAC,GAAG,CAAC,CAAE;UAAAiG,QAAA,gBAE5ClM,OAAA,CAAC7B,WAAW;YAACqO,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,aAC3B;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTtM,OAAA;UAAKiM,SAAS,EAAC,kBAAkB;UAAAC,QAAA,GAC9BiD,KAAK,CAACC,IAAI,CAAC;YAAExK,MAAM,EAAEkH,IAAI,CAACuD,GAAG,CAACxD,UAAU,EAAE,CAAC;UAAE,CAAC,EAAE,CAACyD,CAAC,EAAEd,CAAC,KAAK;YACzD,IAAIe,OAAO;YACX,IAAI1D,UAAU,IAAI,CAAC,EAAE;cACnB0D,OAAO,GAAGf,CAAC,GAAG,CAAC;YACjB,CAAC,MAAM,IAAI3L,WAAW,IAAI,CAAC,EAAE;cAC3B0M,OAAO,GAAGf,CAAC,GAAG,CAAC;YACjB,CAAC,MAAM,IAAI3L,WAAW,IAAIgJ,UAAU,GAAG,CAAC,EAAE;cACxC0D,OAAO,GAAG1D,UAAU,GAAG,CAAC,GAAG2C,CAAC;YAC9B,CAAC,MAAM;cACLe,OAAO,GAAG1M,WAAW,GAAG,CAAC,GAAG2L,CAAC;YAC/B;YAEA,IAAIe,OAAO,GAAG,CAAC,IAAIA,OAAO,GAAG1D,UAAU,EAAE,OAAO,IAAI;YAEpD,oBACE7L,OAAA;cAEEiM,SAAS,EAAE,kBAAkBpJ,WAAW,KAAK0M,OAAO,GAAG,QAAQ,GAAG,EAAE,EAC/D;cACLhD,OAAO,EAAEA,CAAA,KAAMzJ,cAAc,CAACyM,OAAO,CAAE;cAAArD,QAAA,EAEtCqD;YAAO,GALHf,CAAC;cAAArC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAMA,CAAC;UAEb,CAAC,CAAC,EACDT,UAAU,GAAG,CAAC,iBAAI7L,OAAA;YAAMiM,SAAS,EAAC,iBAAiB;YAAAC,QAAA,EAAC;UAAG;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5D,CAAC,eACNtM,OAAA;UACEiM,SAAS,EAAC,gBAAgB;UAC1BU,QAAQ,EAAE9J,WAAW,KAAKgJ,UAAW;UACrCU,OAAO,EAAEA,CAAA,KAAMzJ,cAAc,CAAEmD,CAAC,IAAKA,CAAC,GAAG,CAAC,CAAE;UAAAiG,QAAA,GAC7C,OACM,eAAAlM,OAAA,CAAC5B,YAAY;YAACoO,IAAI,EAAE;UAAG;YAAAL,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzB,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,EAGL1I,iBAAiB,iBAChB5D,OAAA;MAAKiM,SAAS,EAAC,eAAe;MAACM,OAAO,EAAEA,CAAA,KAAM1I,oBAAoB,CAAC,KAAK,CAAE;MAAAqI,QAAA,eACxElM,OAAA;QAAKiM,SAAS,EAAC,OAAO;QAACM,OAAO,EAAGvF,CAAC,IAAKA,CAAC,CAACwI,eAAe,CAAC,CAAE;QAAAtD,QAAA,gBACzDlM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BlM,OAAA;YAAAkM,QAAA,EAAI;UAAgB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACzBtM,OAAA;YACEiM,SAAS,EAAC,UAAU;YACpBM,OAAO,EAAEA,CAAA,KAAM1I,oBAAoB,CAAC,KAAK,CAAE;YAAAqI,QAAA,eAE3ClM,OAAA,CAAC9B,CAAC;cAACsO,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,YAAY;UAAAC,QAAA,eACzBlM,OAAA;YAAKiM,SAAS,EAAC,YAAY;YAAAC,QAAA,gBACzBlM,OAAA;cAAAkM,QAAA,EAAO;YAAe;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC,eAC9BtM,OAAA;cACEsE,IAAI,EAAC,MAAM;cACX2C,KAAK,EAAEnD,eAAgB;cACvB4I,QAAQ,EAAG1F,CAAC,IAAKjD,kBAAkB,CAACiD,CAAC,CAACG,MAAM,CAACF,KAAK,CAAE;cACpDgF,SAAS,EAAC,YAAY;cACtBQ,WAAW,EAAC,qBAAqB;cACjCgD,SAAS;YAAA;cAAAtD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACV,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BlM,OAAA;YACEiM,SAAS,EAAC,mBAAmB;YAC7BM,OAAO,EAAEA,CAAA,KAAM1I,oBAAoB,CAAC,KAAK,CAAE;YAAAqI,QAAA,EAC5C;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACTtM,OAAA;YACEiM,SAAS,EAAC,iBAAiB;YAC3BM,OAAO,EAAE5D,iBAAkB;YAC3BgE,QAAQ,EAAE3I,eAAe,IAAI,CAACF,eAAe,CAAC6D,IAAI,CAAC,CAAE;YAAAuE,QAAA,EAEpDlI,eAAe,gBACdhE,OAAA,CAAAE,SAAA;cAAAgM,QAAA,gBACElM,OAAA,CAACpB,OAAO;gBAAC4N,IAAI,EAAE,EAAG;gBAACP,SAAS,EAAC;cAAS;gBAAAE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,aAE3C;YAAA,eAAE,CAAC,gBAEHtM,OAAA,CAAAE,SAAA;cAAAgM,QAAA,gBACElM,OAAA,CAACrC,IAAI;gBAAC6O,IAAI,EAAE;cAAG;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAE,CAAC,gBAEpB;YAAA,eAAE;UACH;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAGAjK,SAAS,iBACRrC,OAAA;MAAKiM,SAAS,EAAC,eAAe;MAACM,OAAO,EAAEA,CAAA,KAAMjK,YAAY,CAAC,KAAK,CAAE;MAAA4J,QAAA,eAChElM,OAAA;QAAKiM,SAAS,EAAC,OAAO;QAACM,OAAO,EAAGvF,CAAC,IAAKA,CAAC,CAACwI,eAAe,CAAC,CAAE;QAAAtD,QAAA,gBACzDlM,OAAA;UAAKiM,SAAS,EAAC,cAAc;UAAAC,QAAA,gBAC3BlM,OAAA;YAAAkM,QAAA,gBACElM,OAAA,CAAChB,KAAK;cAACwN,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,gBAErB;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACLtM,OAAA;YACEiM,SAAS,EAAC,UAAU;YACpBM,OAAO,EAAEA,CAAA,KAAMjK,YAAY,CAAC,KAAK,CAAE;YAAA4J,QAAA,eAEnClM,OAAA,CAAC9B,CAAC;cAACsO,IAAI,EAAE;YAAG;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC,eACNtM,OAAA;UAAKiM,SAAS,EAAC,YAAY;UAAAC,QAAA,eACzBlM,OAAA;YAAM4N,QAAQ,EAAErG,YAAa;YAAA2E,QAAA,gBAC3BlM,OAAA;cAAKiM,SAAS,EAAC,WAAW;cAAAC,QAAA,gBACxBlM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAc;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC7BtM,OAAA;kBACEsE,IAAI,EAAC,MAAM;kBACXnD,IAAI,EAAC,MAAM;kBACX8F,KAAK,EAAEhG,IAAI,CAACE,IAAK;kBACjBuL,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC,YAAY;kBACtB4B,QAAQ;gBAAA;kBAAA1B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAU;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACzBtM,OAAA;kBACEmB,IAAI,EAAC,UAAU;kBACf8F,KAAK,EAAEhG,IAAI,CAACG,QAAS;kBACrBsL,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC,aAAa;kBACvB4B,QAAQ;kBAAA3B,QAAA,gBAERlM,OAAA;oBAAQiH,KAAK,EAAC,EAAE;oBAAAiF,QAAA,EAAC;kBAAe;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EACxC7L,UAAU,CAACuJ,GAAG,CAAEhF,CAAC,iBAChBhF,OAAA;oBAAoBiH,KAAK,EAAEjC,CAAC,CAACC,GAAI;oBAAAiH,QAAA,EAC9BlH,CAAC,CAAC7D;kBAAI,GADI6D,CAAC,CAACC,GAAG;oBAAAkH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAEV,CACT,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAW;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC1BtM,OAAA;kBACEmB,IAAI,EAAC,aAAa;kBAClB8F,KAAK,EAAEhG,IAAI,CAACI,WAAY;kBACxBqL,QAAQ,EAAE3F,YAAa;kBACvB4F,QAAQ,EAAE,CAAChM,aAAa,CAACiE,MAAO;kBAChCqH,SAAS,EAAC,aAAa;kBAAAC,QAAA,gBAEvBlM,OAAA;oBAAQiH,KAAK,EAAC,EAAE;oBAAAiF,QAAA,EAAC;kBAAkB;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EAC3C3L,aAAa,CAACqJ,GAAG,CAAEhC,CAAC,iBACnBhI,OAAA;oBAAoBiH,KAAK,EAAEe,CAAC,CAAC/C,GAAI;oBAAAiH,QAAA,EAC9BlE,CAAC,CAAC7G;kBAAI,GADI6G,CAAC,CAAC/C,GAAG;oBAAAkH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAEV,CACT,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACI,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAY;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC3BtM,OAAA;kBACEsE,IAAI,EAAC,QAAQ;kBACb0I,IAAI,EAAC,MAAM;kBACX7L,IAAI,EAAC,WAAW;kBAChB8F,KAAK,EAAEhG,IAAI,CAACM,SAAU;kBACtBmL,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC,YAAY;kBACtB4B,QAAQ;gBAAA;kBAAA1B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACT,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACrBtM,OAAA;kBAAKiM,SAAS,EAAC,mBAAmB;kBAAAC,QAAA,gBAChClM,OAAA;oBACEsE,IAAI,EAAC,QAAQ;oBACb0I,IAAI,EAAC,MAAM;oBACX7L,IAAI,EAAC,aAAa;oBAClB8F,KAAK,EAAEhG,IAAI,CAACW,WAAY;oBACxB8K,QAAQ,EAAE3F,YAAa;oBACvB0F,WAAW,EAAC,OAAO;oBACnBR,SAAS,EAAC,YAAY;oBACtBa,KAAK,EAAE;sBAAEsB,IAAI,EAAE;oBAAE;kBAAE;oBAAAjC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACpB,CAAC,eACFtM,OAAA;oBACEmB,IAAI,EAAC,YAAY;oBACjB8F,KAAK,EAAEhG,IAAI,CAACY,UAAW;oBACvB6K,QAAQ,EAAE3F,YAAa;oBACvBkF,SAAS,EAAC,aAAa;oBACvBa,KAAK,EAAE;sBAAEuB,KAAK,EAAE;oBAAQ,CAAE;oBAAAnC,QAAA,gBAE1BlM,OAAA;sBAAQiH,KAAK,EAAC,IAAI;sBAAAiF,QAAA,EAAC;oBAAE;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAC9BtM,OAAA;sBAAQiH,KAAK,EAAC,IAAI;sBAAAiF,QAAA,EAAC;oBAAI;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAChCtM,OAAA;sBAAQiH,KAAK,EAAC,KAAK;sBAAAiF,QAAA,EAAC;oBAAK;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAClCtM,OAAA;sBAAQiH,KAAK,EAAC,IAAI;sBAAAiF,QAAA,EAAC;oBAAE;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC,eAC9BtM,OAAA;sBAAQiH,KAAK,EAAC,KAAK;sBAAAiF,QAAA,EAAC;oBAAG;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAQ,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC1B,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAW;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eAC1BtM,OAAA;kBACEsE,IAAI,EAAC,QAAQ;kBACb0I,IAAI,EAAC,MAAM;kBACX7L,IAAI,EAAC,YAAY;kBACjB8F,KAAK,EAAEhG,IAAI,CAACO,UAAW;kBACvBkL,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC;gBAAY;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAK;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACpBtM,OAAA;kBACEsE,IAAI,EAAC,QAAQ;kBACb0I,IAAI,EAAC,MAAM;kBACX7L,IAAI,EAAC,YAAY;kBACjB8F,KAAK,EAAEhG,IAAI,CAACQ,UAAW;kBACvBiL,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC;gBAAY;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACvBtM,OAAA;kBACEmB,IAAI,EAAC,SAAS;kBACd8F,KAAK,EAAEhG,IAAI,CAACS,OAAQ;kBACpBgL,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC;gBAAY;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAQ;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACvBtM,OAAA;kBACEmB,IAAI,EAAC,SAAS;kBACd8F,KAAK,EAAEhG,IAAI,CAACU,OAAQ;kBACpB+K,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC,aAAa;kBAAAC,QAAA,gBAEvBlM,OAAA;oBAAQiH,KAAK,EAAC,WAAW;oBAAAiF,QAAA,EAAC;kBAAW;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eAC9CtM,OAAA;oBAAQiH,KAAK,EAAC,MAAM;oBAAAiF,QAAA,EAAC;kBAAI;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5B,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAU;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACzBtM,OAAA;kBACEsE,IAAI,EAAC,MAAM;kBACXnD,IAAI,EAAC,WAAW;kBAChB8F,KAAK,EAAEhG,IAAI,CAACa,SAAU;kBACtB4K,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC;gBAAY;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAM;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACrBtM,OAAA;kBACEmB,IAAI,EAAC,QAAQ;kBACb8F,KAAK,EAAEhG,IAAI,CAACe,MAAO;kBACnB0K,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC,aAAa;kBAAAC,QAAA,gBAEvBlM,OAAA;oBAAQiH,KAAK,EAAC,QAAQ;oBAAAiF,QAAA,EAAC;kBAAM;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eACtCtM,OAAA;oBAAQiH,KAAK,EAAC,UAAU;oBAAAiF,QAAA,EAAC;kBAAQ;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACpC,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACN,CAAC,eACNtM,OAAA;gBAAKiM,SAAS,EAAC,YAAY;gBAAAC,QAAA,gBACzBlM,OAAA;kBAAAkM,QAAA,EAAO;gBAAK;kBAAAC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACpBtM,OAAA;kBACEsE,IAAI,EAAC,MAAM;kBACXuI,MAAM,EAAC,SAAS;kBAChBH,QAAQ,EAAE3F,YAAa;kBACvBkF,SAAS,EAAC;gBAAY;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACvB,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACH,CAAC,eACNtM,OAAA;cAAKiM,SAAS,EAAC,YAAY;cAAAC,QAAA,gBACzBlM,OAAA;gBAAAkM,QAAA,EAAO;cAAW;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eAC1BtM,OAAA;gBACEmB,IAAI,EAAC,aAAa;gBAClB8F,KAAK,EAAEhG,IAAI,CAACK,WAAY;gBACxBoL,QAAQ,EAAE3F,YAAa;gBACvBkF,SAAS,EAAC,eAAe;gBACzBqC,IAAI,EAAC;cAAG;gBAAAnC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACC,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACT,CAAC,eACNtM,OAAA;cAAKiM,SAAS,EAAC,cAAc;cAAAC,QAAA,gBAC3BlM,OAAA;gBACEsE,IAAI,EAAC,QAAQ;gBACb2H,SAAS,EAAC,iBAAiB;gBAC3BU,QAAQ,EAAE5L,OAAQ;gBAAAmL,QAAA,EAEjBnL,OAAO,gBACNf,OAAA,CAAAE,SAAA;kBAAAgM,QAAA,gBACElM,OAAA,CAACpB,OAAO;oBAAC4N,IAAI,EAAE,EAAG;oBAACP,SAAS,EAAC;kBAAS;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,aAE3C;gBAAA,eAAE,CAAC,gBAEHtM,OAAA,CAAAE,SAAA;kBAAAgM,QAAA,gBACElM,OAAA,CAACjB,IAAI;oBAACyN,IAAI,EAAE;kBAAG;oBAAAL,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE,CAAC,kBAEpB;gBAAA,eAAE;cACH;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACK,CAAC,eACTtM,OAAA;gBACEsE,IAAI,EAAC,QAAQ;gBACb2H,SAAS,EAAC,mBAAmB;gBAC7BM,OAAO,EAAEA,CAAA,KAAMjK,YAAY,CAAC,KAAK,CAAE;gBAAA4J,QAAA,EACpC;cAED;gBAAAC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAQ,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACN,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAGApI,QAAQ,CAACE,IAAI,iBACZpE,OAAA;MAAKiM,SAAS,EAAE,eAAe/H,QAAQ,CAACI,IAAI,EAAG;MAAA4H,QAAA,gBAC7ClM,OAAA;QAAKiM,SAAS,EAAC,eAAe;QAAAC,QAAA,GAC3BhI,QAAQ,CAACI,IAAI,KAAK,SAAS,iBAAItE,OAAA,CAACvB,WAAW;UAAC+N,IAAI,EAAE,EAAG;UAACP,SAAS,EAAC;QAAY;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,EAC/EpI,QAAQ,CAACI,IAAI,KAAK,OAAO,iBAAItE,OAAA,CAACnB,WAAW;UAAC2N,IAAI,EAAE,EAAG;UAACP,SAAS,EAAC;QAAY;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,EAC7EpI,QAAQ,CAACI,IAAI,KAAK,SAAS,iBAAItE,OAAA,CAAClB,IAAI;UAAC0N,IAAI,EAAE,EAAG;UAACP,SAAS,EAAC;QAAY;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,eACzEtM,OAAA;UAAAkM,QAAA,EAAOhI,QAAQ,CAACG;QAAO;UAAA8H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5B,CAAC,eACNtM,OAAA;QACEiM,SAAS,EAAC,aAAa;QACvBM,OAAO,EAAEA,CAAA,KAAMpI,WAAW,CAAC;UAAE,GAAGD,QAAQ;UAAEE,IAAI,EAAE;QAAM,CAAC,CAAE;QAAA8H,QAAA,eAEzDlM,OAAA,CAAC9B,CAAC;UAACsO,IAAI,EAAE;QAAG;UAAAL,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACT,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACN,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAChM,EAAA,CAxpDuBD,SAAS;AAAAqP,EAAA,GAATrP,SAAS;AAAA,IAAAqP,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}