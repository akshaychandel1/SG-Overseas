{"ast":null,"code":"import _objectSpread from\"C:/Users/Rinku Sheoran/Downloads/g1/Grocerryadminfrontend-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// import React, { useEffect, useState, useRef } from \"react\";\n// import axios from \"axios\";\n// const API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\n// const CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\n// export default function PriceList() {\n//   const [items, setItems] = useState([]);\n//   const [categories, setCategories] = useState([]);\n//   const [subcategories, setSubcategories] = useState([]);\n//   const [search, setSearch] = useState(\"\");\n//   const [loading, setLoading] = useState(false);\n//   const [form, setForm] = useState({\n//     name: \"\",\n//     category: \"\",\n//     subcategory: \"\",\n//     description: \"\",\n//     basePrice: \"\",\n//     profitLoss: \"\",\n//     validTill: \"\",\n//     file: null,\n//     status: \"inactive\",\n//   });\n//   const [editId, setEditId] = useState(null);\n//   const [showForm, setShowForm] = useState(false);\n//   const [showModal, setShowModal] = useState(false);\n//   const [activeMenu, setActiveMenu] = useState(null);\n//   const [selectedItems, setSelectedItems] = useState([]);\n//   const [bulkMode, setBulkMode] = useState(false);\n//   const [currentPage, setCurrentPage] = useState(1);\n//   const itemsPerPage = 30;\n//   const [filterCategory, setFilterCategory] = useState(\"\");\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\n//   const [filterSubs, setFilterSubs] = useState([]);\n//   // Quick edit states for inline editing\n//   const [quickBasePrices, setQuickBasePrices] = useState({});\n//   const [quickProfitLoss, setQuickProfitLoss] = useState({});\n//   useEffect(() => {\n//     fetchCategories();\n//   }, []);\n//   useEffect(() => {\n//     if (categories.length > 0) fetchItems();\n//   }, [categories]);\n//   useEffect(() => {\n//     if (!filterCategory) {\n//       setFilterSubs([]);\n//       setFilterSubcategory(\"\");\n//       return;\n//     }\n//     const cat = categories.find((c) => c._id === filterCategory);\n//     setFilterSubs(cat?.subcategories || []);\n//     setFilterSubcategory(\"\");\n//   }, [filterCategory, categories]);\n//   useEffect(() => {\n//     if (!form.category) {\n//       setSubcategories([]);\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\n//       return;\n//     }\n//     const cat = categories.find((c) => c._id === form.category);\n//     setSubcategories(cat?.subcategories || []);\n//   }, [form.category, categories]);\n//   const fetchCategories = async () => {\n//     try {\n//       const res = await axios.get(CATEGORY_URL);\n//       if (res.data?.success) setCategories(res.data.categories || []);\n//     } catch (err) {\n//       console.error(\"Fetch categories error\", err);\n//       alert(\"Could not fetch categories\");\n//     }\n//   };\n//   const fetchItems = async () => {\n//     try {\n//       setLoading(true);\n//       const res = await axios.get(API_URL);\n//       if (res.data?.success) {\n//         const raw = res.data.data || [];\n//         // const enriched = raw.map((item) => {\n//         //   const catObj = categories.find((c) => c._id === (item.category?._id || item.category));\n//         //   const subObj = catObj?.subcategories?.find((s) => s._id === (item.subcategory?.id || item.subcategory?._id));\n//         //   return {\n//         //     ...item,\n//         //     basePrice: item.basePrice || 0,\n//         //     profitLoss: item.profitLoss || 0,\n//         //     salePrice: item.salePrice || 0,\n//         //     lockedPrice: item.lockedPrice || 0,\n//         //     yesterdayLock: item.yesterdayLock || 0,\n//         //     brokerDisplay: item.brokerDisplay || 0,\n//         //     category: catObj ? { _id: catObj._id, name: catObj.name } : item.category,\n//         //     subcategory: subObj ? { _id: subObj._id, name: subObj.name } : item.subcategory,\n//         //   };\n//         // });\n//         const enriched = raw.map((item) => {\n//   const catObj = categories.find((c) => c._id === (item.category?._id || item.category));\n//   const subObj = catObj?.subcategories?.find(\n//     (s) => s._id === item.subcategory?.id\n//   );\n//   return {\n//     ...item,\n//     category: catObj ? { _id: catObj._id, name: catObj.name } : null,\n//     subcategory: subObj\n//       ? { _id: subObj._id, name: subObj.name }\n//       : item.subcategory?.id\n//       ? { _id: item.subcategory.id, name: item.subcategory.name }\n//       : null,\n//   };\n// });\n//         setItems(enriched);\n//       }\n//     } catch (err) {\n//       console.error(\"Fetch items error\", err);\n//       alert(\"Could not fetch items\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const handleChange = (e) => {\n//     const { name, value, files } = e.target;\n//     if (files?.length) {\n//       setForm((p) => ({ ...p, file: files[0] }));\n//     } else {\n//       setForm((p) => ({ ...p, [name]: value }));\n//     }\n//   };\n//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n//     try {\n//       if (!form.name || !form.category || !form.basePrice) {\n//         alert(\"Name, category & base price are required\");\n//         setLoading(false);\n//         return;\n//       }\n//       const fd = new FormData();\n//       fd.append(\"name\", form.name);\n//       fd.append(\"category\", form.category);\n//       // if (form.subcategory) fd.append(\"subcategory\", form.subcategory);\n//       if (form.subcategory) {\n//   const sub = subcategories.find((s) => s._id === form.subcategory);\n//   fd.append(\"subcategory[id]\", sub._id);\n//   fd.append(\"subcategory[name]\", sub.name);\n//   fd.append(\"subcategory[image]\", sub.image || \"\");\n// }\n//       fd.append(\"basePrice\", form.basePrice);\n//       fd.append(\"profitLoss\", form.profitLoss || 0);\n//       if (form.description) fd.append(\"description\", form.description);\n//       if (form.validTill) fd.append(\"validTill\", form.validTill);\n//       fd.append(\"status\", form.status);\n//       if (form.file) fd.append(\"file\", form.file);\n//       if (editId) {\n//         await axios.put(`${API_URL}/${editId}`, fd);\n//         alert(\"Updated successfully\");\n//       } else {\n//         await axios.post(API_URL, fd);\n//         alert(\"Added successfully\");\n//       }\n//       await fetchItems();\n//       resetForm();\n//     } catch (err) {\n//       console.error(\"Save error\", err);\n//       alert(\"Save failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const resetForm = () => {\n//     setForm({\n//       name: \"\",\n//       category: \"\",\n//       subcategory: \"\",\n//       description: \"\",\n//       basePrice: \"\",\n//       profitLoss: \"\",\n//       validTill: \"\",\n//       file: null,\n//       status: \"inactive\",\n//     });\n//     setEditId(null);\n//     setShowModal(false);\n//     setShowForm(false);\n//   };\n//   const handleEdit = (item) => {\n//     setForm({\n//       name: item.name || \"\",\n//       category: item.category?._id?.toString() || \"\",\n//       // subcategory: item.subcategory?.id?.toString() || \"\",\n//       subcategory: item.subcategory?._id || \"\",\n//       description: item.description || \"\",\n//       basePrice: item.basePrice || \"\",\n//       profitLoss: item.profitLoss || 0,\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\n//       file: null,\n//       status: item.status || \"inactive\",\n//     });\n//     const cat = categories.find((c) => c._id === item.category?._id);\n//     setSubcategories(cat?.subcategories || []);\n//     setEditId(item._id);\n//     setShowModal(true);\n//     setActiveMenu(null);\n//   };\n//   const handleDelete = async (id) => {\n//     if (!window.confirm(\"Delete this item?\")) return;\n//     try {\n//       await axios.delete(`${API_URL}/${id}`);\n//       setItems((prev) => prev.filter((x) => x._id !== id));\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\n//       setActiveMenu(null);\n//     } catch (err) {\n//       console.error(\"Delete error\", err);\n//       alert(\"Delete failed\");\n//     }\n//   };\n//   const handleStatusToggle = async (item) => {\n//     try {\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\n//     } catch (err) {\n//       console.error(\"Status toggle error\", err);\n//       alert(\"Status update failed\");\n//     }\n//   };\n//   const updateLocalItemField = (id, key, value) => {\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\n//   };\n//   const handleBulkSave = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected\");\n//     const updates = items\n//       .filter((x) => selectedItems.includes(x._id))\n//       .map((x) => ({\n//         id: x._id,\n//         basePrice: Number(x.basePrice),\n//         profitLoss: Number(x.profitLoss),\n//         status: x.status,\n//       }));\n//     try {\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\n//       alert(\"Bulk save successful\");\n//       setBulkMode(false);\n//       setSelectedItems([]);\n//       fetchItems();\n//     } catch (err) {\n//       console.error(\"Bulk save error\", err);\n//       alert(\"Bulk save failed\");\n//     }\n//   };\n//   const handleBulkDelete = async () => {\n//     if (!selectedItems.length) return alert(\"No items selected\");\n//     if (!window.confirm(\"Delete selected items?\")) return;\n//     try {\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\n//       setSelectedItems([]);\n//       fetchItems();\n//       setBulkMode(false);\n//     } catch (err) {\n//       console.error(\"Bulk delete error\", err);\n//       alert(\"Bulk delete failed\");\n//     }\n//   };\n//   // Update Base Price inline\n//   const updateBasePrice = async (item) => {\n//     const newBase = Number(quickBasePrices[item._id] ?? item.basePrice);\n//     if (isNaN(newBase)) return alert(\"Invalid Base Price\");\n//     try {\n//       setLoading(true);\n//       const fd = new FormData();\n//       fd.append(\"name\", item.name);\n//       fd.append(\"category\", item.category?._id);\n//       if (item.subcategory?.id) fd.append(\"subcategory\", item.subcategory.id);\n//       fd.append(\"description\", item.description || \"\");\n//       fd.append(\"basePrice\", newBase);\n//       fd.append(\"profitLoss\", item.profitLoss);\n//       fd.append(\"status\", item.status);\n//       const res = await axios.put(`${API_URL}/${item._id}`, fd);\n//       if (res.data.success) {\n//         await fetchItems();\n//         setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\n//         alert(\"Base price updated\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Update failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   // Update Profit/Loss inline using updateDiff\n//   const updateProfitLoss = async (item) => {\n//     const diff = Number(quickProfitLoss[item._id] ?? 0);\n//     if (isNaN(diff)) return alert(\"Invalid Profit/Loss\");\n//     try {\n//       setLoading(true);\n//       const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, { diff });\n//       if (res.data.success) {\n//         await fetchItems();\n//         setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\n//         alert(\"Profit/Loss updated\");\n//       }\n//     } catch (err) {\n//       console.error(err);\n//       alert(\"Update failed\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n//   const filteredItems = items.filter((item) => {\n//     const t = search.toLowerCase();\n//     const matchText =\n//       (item.name || \"\").toLowerCase().includes(t) ||\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\n//     const matchCategory = !filterCategory || item.category?._id === filterCategory;\n//     const matchSub = !filterSubcategory || item.subcategory?._id === filterSubcategory;\n//     return matchText && matchCategory && matchSub;\n//   });\n//   const indexOfLast = currentPage * itemsPerPage;\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\n//   return (\n//     <div className=\"container\" style={styles.container}>\n//       <div style={styles.header}>\n//         <h1 style={styles.title}>Product Management</h1>\n//       </div>\n//       <div style={{ marginBottom: 12, display: \"flex\", gap: 12, flexWrap: \"wrap\" }}>\n//         <input\n//           type=\"text\"\n//           placeholder=\"Search product, category or subcategory...\"\n//           value={search}\n//           onChange={(e) => {\n//             setSearch(e.target.value);\n//             setCurrentPage(1);\n//           }}\n//           style={styles.searchInput}\n//         />\n//         <button\n//           style={styles.addButton}\n//           onClick={() => {\n//             setShowForm(!showForm);\n//             setEditId(null);\n//           }}\n//         >\n//           {showForm ? \"‚úñ Close\" : \"‚ûï Add Product\"}\n//         </button>\n//       </div>\n// <button\n//   style={styles.addButton}\n//   onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\n// >\n//   ‚¨á Export CSV\n// </button>\n// <label style={{ cursor: \"pointer\" }}>\n//   <input\n//     type=\"file\"\n//     accept=\".csv\"\n//     style={{ display: \"none\" }}\n//     onChange={async (e) => {\n//       try {\n//         const fd = new FormData();\n//         fd.append(\"file\", e.target.files[0]);\n//         await axios.post(`${API_URL}/import`, fd);\n//         alert(\"Imported successfully\");\n//         fetchItems();\n//       } catch (err) {\n//         alert(\"Import failed\");\n//       }\n//     }}\n//   />\n//   <span style={styles.addButton}>üì§ Import CSV</span>\n// </label>\n//       <div style={{ display: \"flex\", gap: 10, marginBottom: 12, flexWrap: \"wrap\" }}>\n//         <select\n//           value={filterCategory}\n//           onChange={(e) => setFilterCategory(e.target.value)}\n//           style={styles.select}\n//         >\n//           <option value=\"\">Filter by Category</option>\n//           {categories.map((c) => (\n//             <option key={c._id} value={c._id}>\n//               {c.name}\n//             </option>\n//           ))}\n//         </select>\n//         <select\n//           value={filterSubcategory}\n//           onChange={(e) => setFilterSubcategory(e.target.value)}\n//           disabled={!filterSubs.length}\n//           style={styles.select}\n//         >\n//           <option value=\"\">Filter by Subcategory</option>\n//           {filterSubs.map((s) => (\n//             <option key={s._id} value={s._id}>\n//               {s.name}\n//             </option>\n//           ))}\n//         </select>\n//       </div>\n//       {selectedItems.length > 0 && (\n//         <div style={styles.bulkBar}>\n//           {!bulkMode ? (\n//             <div style={{ display: \"flex\", gap: 8 }}>\n//               <button style={styles.btnDelete} onClick={handleBulkDelete}>\n//                 üóë Bulk Delete\n//               </button>\n//               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\n//                 ‚úè Bulk Edit\n//               </button>\n//             </div>\n//           ) : (\n//             <div style={styles.bulkPanel}>\n//               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\n//               {items\n//                 .filter((item) => selectedItems.includes(item._id))\n//                 .map((item) => (\n//                   <div key={item._id} style={styles.bulkItemBox}>\n//                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\n//                     <div style={styles.formGrid}>\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Base Price</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.basePrice}\n//                           onChange={(e) => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))}\n//                           style={styles.input}\n//                         />\n//                       </div>\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Profit/Loss</label>\n//                         <input\n//                           type=\"number\"\n//                           value={item.profitLoss}\n//                           onChange={(e) => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value))}\n//                           style={styles.input}\n//                         />\n//                       </div>\n//                       <div style={styles.formGroup}>\n//                         <label style={styles.label}>Status</label>\n//                         <select\n//                           value={item.status}\n//                           onChange={(e) => updateLocalItemField(item._id, \"status\", e.target.value)}\n//                           style={styles.select}\n//                         >\n//                           <option value=\"active\">active</option>\n//                           <option value=\"inactive\">inactive</option>\n//                         </select>\n//                       </div>\n//                     </div>\n//                   </div>\n//                 ))}\n//               {/* <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\n//                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\n//                   ‚úî Save All\n//                 </button>\n//                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\n//                   ‚úñ Cancel\n//                 </button>\n//               </div> */}\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12, flexWrap: 'wrap' }}>\n//   <button style={styles.btnPrimary} onClick={handleBulkSave}>\n//     ‚úî Save All\n//   </button>\n//   <button\n//     style={styles.btnPrimary}\n//     onClick={async () => {\n//       if (!selectedItems.length) return alert(\"No items selected\");\n//       for (let id of selectedItems) await axios.post(`${API_URL}/copy/${id}`);\n//       alert(\"Selected copied\");\n//       fetchItems();\n//     }}\n//   >\n//     üìÑ Copy Selected\n//   </button>\n//   <button\n//     style={styles.btnPrimary}\n//     onClick={async () => {\n//       if (!selectedItems.length) return alert(\"No items selected\");\n//       const res = await axios.post(\n//         `${API_URL}/export-selected`,\n//         { ids: selectedItems },\n//         { responseType: \"blob\" }\n//       );\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\n//       const a = document.createElement(\"a\");\n//       a.href = url;\n//       a.download = \"selected.csv\";\n//       a.click();\n//     }}\n//   >\n//     ‚¨á Export Selected\n//   </button>\n//   <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\n//     ‚úñ Cancel\n//   </button>\n// </div>\n//             </div>\n//           )}\n//         </div>\n//       )}\n//       {showForm && (\n//         <div style={styles.formCard}>\n//           <h2 style={styles.formTitle}>‚ûï Add / Edit Product</h2>\n//           <form onSubmit={handleSubmit}>\n//             <div style={styles.formGrid}>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Product Name *</label>\n//                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n//               </div>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Category *</label>\n//                 <select required name=\"category\" value={form.category} onChange={handleChange} style={styles.select}>\n//                   <option value=\"\">Select Category</option>\n//                   {categories.map((c) => (\n//                     <option value={c._id} key={c._id}>\n//                       {c.name}\n//                     </option>\n//                   ))}\n//                 </select>\n//               </div>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Subcategory</label>\n//                 <select\n//                   name=\"subcategory\"\n//                   value={form.subcategory}\n//                   onChange={handleChange}\n//                   disabled={!subcategories.length}\n//                   style={styles.select}\n//                 >\n//                   <option value=\"\">Select Subcategory</option>\n//                   {subcategories.map((s) => (\n//                     // <option value={s._id} key={s._id}>\n//                     //   {s.name}\n//                     // </option>\n//                     <option value={s._id}>{s.name}</option>\n//                   ))}\n//                 </select>\n//               </div>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Base Price *</label>\n//                 <input\n//                   type=\"number\"\n//                   required\n//                   name=\"basePrice\"\n//                   value={form.basePrice}\n//                   onChange={handleChange}\n//                   style={styles.input}\n//                 />\n//               </div>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Profit/Loss</label>\n//                 <input\n//                   type=\"number\"\n//                   name=\"profitLoss\"\n//                   value={form.profitLoss}\n//                   onChange={handleChange}\n//                   style={styles.input}\n//                 />\n//               </div>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Valid Till</label>\n//                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n//               </div>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Image</label>\n//                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n//               </div>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Status</label>\n//                 <select name=\"status\" value={form.status} onChange={handleChange} style={styles.select}>\n//                   <option value=\"active\">Active</option>\n//                   <option value=\"inactive\">Inactive</option>\n//                 </select>\n//               </div>\n//             </div>\n//             <div style={styles.formGroup}>\n//               <label style={styles.label}>Description</label>\n//               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n//             </div>\n//             <div style={styles.formActions}>\n//               <button style={styles.btnPrimary} disabled={loading}>\n//                 {loading ? \"Saving...\" : editId ? \"Update Product\" : \"Add Product\"}\n//               </button>\n//               <button type=\"button\" style={styles.btnCancel} onClick={resetForm}>\n//                 Cancel\n//               </button>\n//             </div>\n//           </form>\n//         </div>\n//       )}\n//       <div style={styles.tableCard}>\n//         <div style={styles.tableHeader}>\n//           <h2 style={styles.tableTitle}>Items</h2>\n//           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\n//         </div>\n//         <div style={styles.tableWrapper}>\n//           <table style={styles.table}>\n//             <thead>\n//               <tr>\n//                 <th style={styles.th}>\n//                   <input\n//                     type=\"checkbox\"\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\n//                     onChange={() => {\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\n//                     }}\n//                   />\n//                 </th>\n//                 <th style={styles.th}>Sr</th>\n//                 <th style={styles.th}>Image</th>\n//                 <th style={styles.th}>Name</th>\n//                 <th style={styles.th}>Category</th>\n//                 <th style={styles.th}>Subcategory</th>\n//                 <th style={styles.th}>Base Price</th>\n//                 <th style={styles.th}>Profit/Loss</th>\n//                 <th style={styles.th}>Sale Price</th>\n//                 <th style={styles.th}>Price Lock</th>\n//                 <th style={styles.th}>Teji/Maddi</th>\n//                 <th style={styles.th}>Status</th>\n//                 <th style={styles.th}>Actions</th>\n//               </tr>\n//             </thead>\n//             <tbody>\n//               {currentItems.map((item, i) => (\n//                 <tr key={item._id} style={styles.tr}>\n//                   <td style={styles.td}>\n//                     <input\n//                       type=\"checkbox\"\n//                       checked={selectedItems.includes(item._id)}\n//                       onChange={() =>\n//                         setSelectedItems((prev) =>\n//                           prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]\n//                         )\n//                       }\n//                     />\n//                   </td>\n//                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\n//                   <td style={styles.td}>\n//                     {item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}\n//                   </td>\n//                   <td style={styles.td}>{item.name}</td>\n//                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\n//                   {/* <td style={styles.td}>{item.subcategory?.name || \"-\"}</td> */}\n//                   <td>{item.subcategory?.name || \"-\"}</td>\n//                   {/* BASE PRICE - Editable */}\n//                   <td style={styles.td}>\n//                     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\n//                       <input\n//                         type=\"number\"\n//                         value={quickBasePrices[item._id] !== undefined ? quickBasePrices[item._id] : item.basePrice}\n//                         onChange={(e) => setQuickBasePrices((p) => ({ ...p, [item._id]: e.target.value }))}\n//                         style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\n//                       />\n//                       <button style={styles.btnSmall} onClick={() => updateBasePrice(item)}>\n//                         ‚úî\n//                       </button>\n//                     </div>\n//                     <small style={{ color: \"#28a745\", display: \"block\", marginTop: 4 }}>Saved: ‚Çπ{item.basePrice}</small>\n//                   </td>\n//                   {/* PROFIT/LOSS - Editable */}\n//                   <td style={styles.td}>\n//                     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\n//                       <input\n//                         type=\"number\"\n//                         placeholder=\"change\"\n//                         value={quickProfitLoss[item._id] ?? \"\"}\n//                         onChange={(e) => setQuickProfitLoss((p) => ({ ...p, [item._id]: e.target.value }))}\n//                         style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\n//                       />\n//                       <button style={styles.btnSmall} onClick={() => updateProfitLoss(item)}>\n//                         ‚úî\n//                       </button>\n//                     </div>\n//                     <small style={{ color: \"#666\", display: \"block\", marginTop: 4 }}>Current: {item.profitLoss}</small>\n//                   </td>\n//                   {/* SALE PRICE */}\n//                   <td style={styles.td}>‚Çπ{item.salePrice}</td>\n//                   {/* PRICE LOCK */}\n//                   <td style={styles.td}>‚Çπ{item.lockedPrice}</td>\n//                   {/* TEJI/MADDI */}\n//                   {/* <td style={styles.td}>\n//   {(() => {\n//     const teji = item.salePrice - item.lockedPrice;\n//     return (\n//       <span\n//         style={{\n//           color: teji >= 0 ? \"#28a745\" : \"#dc3545\",\n//           fontWeight: \"600\",\n//         }}\n//       >\n//         {teji >= 0 ? \"‚ñ≤\" : \"‚ñº\"} {Math.abs(teji)}\n//       </span>\n//     );\n//   })()}\n// </td> */}\n// <td style={styles.td}>\n//   {item.lockedPrice === 0 ? (\n//     <span style={{ color: \"#6c757d\", fontWeight: \"600\" }}>0</span>\n//   ) : (\n//     (() => {\n//       const teji = item.salePrice - item.lockedPrice;\n//       return (\n//         <span\n//           style={{\n//             color: teji >= 0 ? \"#28a745\" : \"#dc3545\",\n//             fontWeight: \"600\",\n//           }}\n//         >\n//           {teji >= 0 ? \"‚ñ≤\" : \"‚ñº\"} {Math.abs(teji)}\n//         </span>\n//       );\n//     })()\n//   )}\n// </td>\n//                   {/* STATUS */}\n//                   <td style={styles.td}>\n//                     <button\n//                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\n//                       onClick={() => handleStatusToggle(item)}\n//                     >\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\n//                     </button>\n//                   </td>\n//                   {/* ACTIONS */}\n//                   <td style={styles.td}>\n//                     <div style={{ position: \"relative\" }}>\n//                       <button\n//                         style={styles.menuButton}\n//                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\n//                       >\n//                         ‚ãÆ\n//                       </button>\n//                       {activeMenu === item._id && (\n//                         <div style={styles.dropdown}>\n//                           {/* <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\n//                             ‚úè Edit\n//                           </button>\n//                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\n//                             üóë Delete\n//                           </button> */}\n//                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\n//   ‚úè Edit\n// </button>\n// <button\n//   style={styles.dropdownItem}\n//   onClick={async () => {\n//     await axios.post(`${API_URL}/copy/${item._id}`);\n//     alert(\"Copied successfully\");\n//     fetchItems();\n//   }}\n// >\n//   üìÑ Copy\n// </button>\n// <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\n//   üóë Delete\n// </button>\n//                         </div>\n//                       )}\n//                     </div>\n//                   </td>\n//                 </tr>\n//               ))}\n//             </tbody>\n//           </table>\n//         </div>\n//         <div style={styles.pagination}>\n//           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\n//             Previous\n//           </button>\n//           {Array.from({ length: totalPages }, (_, i) => (\n//             <button\n//               key={i}\n//               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\n//               onClick={() => setCurrentPage(i + 1)}\n//             >\n//               {i + 1}\n//             </button>\n//           ))}\n//           <button\n//             style={styles.paginationBtn}\n//             disabled={currentPage === totalPages}\n//             onClick={() => setCurrentPage((p) => p + 1)}\n//           >\n//             Next\n//           </button>\n//         </div>\n//       </div>\n//       {showModal && (\n//         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\n//           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\n//             <h2 style={styles.modalTitle}>‚úè Edit Product</h2>\n//             <form onSubmit={handleSubmit}>\n//               <div style={styles.formGrid}>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Product Name *</label>\n//                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\n//                 </div>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Category *</label>\n//                   <select required name=\"category\" value={form.category} onChange={handleChange} style={styles.select}>\n//                     <option value=\"\">Select Category</option>\n//                     {categories.map((c) => (\n//                       <option value={c._id} key={c._id}>\n//                         {c.name}\n//                       </option>\n//                     ))}\n//                   </select>\n//                 </div>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Subcategory</label>\n//                   <select\n//                     name=\"subcategory\"\n//                     value={form.subcategory}\n//                     onChange={handleChange}\n//                     disabled={!subcategories.length}\n//                     style={styles.select}\n//                   >\n//                     <option value=\"\">Select Subcategory</option>\n//                     {subcategories.map((s) => (\n//                       <option value={s._id} key={s._id}>\n//                         {s.name}\n//                       </option>\n//                     ))}\n//                   </select>\n//                 </div>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Base Price *</label>\n//                   <input\n//                     type=\"number\"\n//                     required\n//                     name=\"basePrice\"\n//                     value={form.basePrice}\n//                     onChange={handleChange}\n//                     style={styles.input}\n//                   />\n//                 </div>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Profit/Loss</label>\n//                   <input\n//                     type=\"number\"\n//                     name=\"profitLoss\"\n//                     value={form.profitLoss}\n//                     onChange={handleChange}\n//                     style={styles.input}\n//                   />\n//                 </div>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Valid Till</label>\n//                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\n//                 </div>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Image</label>\n//                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\n//                 </div>\n//                 <div style={styles.formGroup}>\n//                   <label style={styles.label}>Status</label>\n//                   <select name=\"status\" value={form.status} onChange={handleChange} style={styles.select}>\n//                     <option value=\"active\">Active</option>\n//                     <option value=\"inactive\">Inactive</option>\n//                   </select>\n//                 </div>\n//               </div>\n//               <div style={styles.formGroup}>\n//                 <label style={styles.label}>Description</label>\n//                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\n//               </div>\n//               <div style={styles.formActions}>\n//                 <button style={styles.btnPrimary} disabled={loading}>\n//                   {loading ? \"Saving...\" : \"Update\"}\n//                 </button>\n//                 <button type=\"button\" style={styles.btnCancel} onClick={resetForm}>\n//                   Cancel\n//                 </button>\n//               </div>\n//             </form>\n//           </div>\n//         </div>\n//       )}\n//     </div>\n//   );\n// }\n// const styles = {\n//   container: { padding: 16, fontFamily: \"Arial, sans-serif\" },\n//   header: { marginBottom: 8 },\n//   title: {\n//     fontSize: \"24px\",\n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//     marginBottom: \"8px\",\n//   },\n//   searchInput: {\n//     flex: \"1\",\n//     minWidth: \"250px\",\n//     padding: \"10px 12px\",\n//     borderRadius: \"10px\",\n//     border: \"1px solid #ced4da\",\n//     background: \"#f9fbfc\",\n//     fontSize: \"14px\",\n//     outline: \"none\",\n//   },\n//   addButton: {\n//     background: \"#007bff\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"10px\",\n//     padding: \"10px 16px\",\n//     fontSize: \"14px\",\n//     cursor: \"pointer\",\n//     fontWeight: \"600\",\n//   },\n//   select: {\n//     padding: \"8px 12px\",\n//     borderRadius: \"8px\",\n//     border: \"1px solid #cfd6e0\",\n//     background: \"#f8fafc\",\n//     fontSize: \"13px\",\n//     minWidth: \"150px\",\n//   },\n//   bulkBar: {\n//     background: \"#e9f2ff\",\n//     border: \"1px solid #c4d9ff\",\n//     borderRadius: \"10px\",\n//     padding: \"12px\",\n//     marginBottom: \"12px\",\n//   },\n//   bulkPanel: {\n//     width: \"100%\",\n//     background: \"#f7faff\",\n//     border: \"1px solid #cfe2ff\",\n//     padding: \"12px\",\n//     borderRadius: \"10px\",\n//   },\n//   bulkPanelTitle: {\n//     textAlign: \"center\",\n//     fontSize: \"16px\",\n//     fontWeight: \"700\",\n//     marginBottom: \"10px\",\n//     color: \"#0d3b66\",\n//   },\n//   bulkItemBox: {\n//     background: \"#fff\",\n//     border: \"1px solid #dbe5f5\",\n//     padding: \"12px\",\n//     borderRadius: \"8px\",\n//     marginBottom: \"10px\",\n//   },\n//   bulkItemTitle: {\n//     fontSize: \"14px\",\n//     fontWeight: \"600\",\n//     marginBottom: \"8px\",\n//     color: \"#233142\",\n//   },\n//   formCard: {\n//     borderRadius: \"12px\",\n//     padding: \"20px\",\n//     marginBottom: \"18px\",\n//     background: \"#ffffff\",\n//     border: \"1px solid #eef2f7\",\n//     boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n//   },\n//   formTitle: { \n//     fontSize: \"18px\", \n//     fontWeight: \"700\", \n//     marginBottom: 16,\n//     color: \"#0d3b66\",\n//   },\n//   formGrid: {\n//     display: \"grid\",\n//     gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\n//     gap: \"12px\",\n//   },\n//   formGroup: { \n//     display: \"flex\", \n//     flexDirection: \"column\", \n//     gap: \"6px\" \n//   },\n//   label: { \n//     fontWeight: \"600\", \n//     fontSize: \"13px\", \n//     color: \"#233142\" \n//   },\n//   input: {\n//     padding: \"10px\",\n//     borderRadius: \"8px\",\n//     border: \"1px solid #cfd6e0\",\n//     background: \"#f8fafc\",\n//     fontSize: \"13px\",\n//     outline: \"none\",\n//   },\n//   textarea: {\n//     padding: \"10px\",\n//     borderRadius: \"8px\",\n//     border: \"1px solid #cfd6e0\",\n//     background: \"#f8fafc\",\n//     minHeight: 80,\n//     fontSize: \"13px\",\n//     outline: \"none\",\n//     resize: \"vertical\",\n//   },\n//   fileInput: { \n//     padding: \"6px\",\n//     fontSize: \"13px\",\n//   },\n//   formActions: { \n//     marginTop: 16, \n//     display: \"flex\", \n//     gap: 10 \n//   },\n//   btnPrimary: {\n//     background: \"#007bff\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"8px\",\n//     padding: \"10px 20px\",\n//     cursor: \"pointer\",\n//     fontWeight: \"600\",\n//     fontSize: \"14px\",\n//   },\n//   btnSmall: {\n//     background: \"#28a745\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"6px\",\n//     padding: \"6px 12px\",\n//     cursor: \"pointer\",\n//     fontSize: \"12px\",\n//     fontWeight: \"600\",\n//   },\n//   btnDelete: {\n//     background: \"#dc3545\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"8px\",\n//     padding: \"8px 14px\",\n//     cursor: \"pointer\",\n//     fontWeight: \"600\",\n//     fontSize: \"14px\",\n//   },\n//   btnCancel: {\n//     background: \"#6c757d\",\n//     color: \"#fff\",\n//     border: \"none\",\n//     borderRadius: \"8px\",\n//     padding: \"10px 20px\",\n//     cursor: \"pointer\",\n//     fontWeight: \"600\",\n//     fontSize: \"14px\",\n//   },\n//   tableCard: { \n//     marginTop: 16,\n//     background: \"#fff\",\n//     borderRadius: \"12px\",\n//     padding: \"16px\",\n//     border: \"1px solid #eef2f7\",\n//     boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\n//   },\n//   tableHeader: { \n//     display: \"flex\", \n//     justifyContent: \"space-between\", \n//     marginBottom: 12,\n//     alignItems: \"center\",\n//   },\n//   tableTitle: { \n//     fontSize: \"18px\", \n//     fontWeight: \"700\",\n//     color: \"#0d3b66\",\n//   },\n//   totalCount: { \n//     fontSize: \"14px\", \n//     color: \"#6c757d\", \n//     fontWeight: \"600\" \n//   },\n//   tableWrapper: { \n//     overflowX: \"auto\",\n//     border: \"1px solid #e9ecef\",\n//     borderRadius: \"8px\",\n//   },\n//   table: { \n//     width: \"100%\", \n//     borderCollapse: \"collapse\", \n//     fontSize: \"13px\" \n//   },\n//   th: { \n//     background: \"#f8f9fa\", \n//     padding: \"12px 10px\", \n//     fontWeight: \"700\", \n//     color: \"#0d3b66\", \n//     textAlign: \"left\",\n//     borderBottom: \"2px solid #dee2e6\",\n//     whiteSpace: \"nowrap\",\n//   },\n//   tr: { \n//     borderBottom: \"1px solid #edf2f7\",\n//     transition: \"background 0.2s\",\n//   },\n//   td: { \n//     padding: \"12px 10px\", \n//     whiteSpace: \"nowrap\", \n//     verticalAlign: \"middle\" \n//   },\n//   tableImg: { \n//     width: \"50px\", \n//     height: \"50px\", \n//     borderRadius: \"6px\", \n//     objectFit: \"cover\" \n//   },\n//   statusActive: { \n//     background: \"#d4edda\", \n//     padding: \"6px 12px\", \n//     borderRadius: \"6px\", \n//     color: \"#155724\", \n//     fontWeight: \"600\", \n//     border: \"1px solid #c3e6cb\", \n//     cursor: \"pointer\",\n//     fontSize: \"12px\",\n//   },\n//   statusInactive: { \n//     background: \"#f8d7da\", \n//     padding: \"6px 12px\", \n//     borderRadius: \"6px\", \n//     color: \"#721c24\", \n//     fontWeight: \"600\", \n//     border: \"1px solid #f5c6cb\", \n//     cursor: \"pointer\",\n//     fontSize: \"12px\",\n//   },\n//   menuButton: { \n//     background: \"#f0f0f0\", \n//     border: \"1px solid #ddd\", \n//     borderRadius: \"6px\", \n//     padding: \"6px 10px\", \n//     fontSize: \"16px\", \n//     cursor: \"pointer\",\n//     fontWeight: \"700\",\n//   },\n//   dropdown: { \n//     position: \"absolute\", \n//     right: 0, \n//     top: 36, \n//     background: \"#fff\", \n//     border: \"1px solid #ddd\", \n//     borderRadius: 8, \n//     zIndex: 100, \n//     minWidth: 140,\n//     boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\n//   },\n//   dropdownItem: { \n//     display: \"block\", \n//     width: \"100%\", \n//     padding: \"10px 14px\", \n//     background: \"transparent\", \n//     border: \"none\", \n//     textAlign: \"left\", \n//     cursor: \"pointer\", \n//     fontSize: 13, \n//     fontWeight: 500,\n//     transition: \"background 0.2s\",\n//   },\n//   dropdownItemDelete: { \n//     display: \"block\", \n//     width: \"100%\", \n//     padding: \"10px 14px\", \n//     background: \"transparent\", \n//     border: \"none\", \n//     textAlign: \"left\", \n//     cursor: \"pointer\", \n//     fontSize: 13, \n//     fontWeight: 500, \n//     color: \"#dc3545\",\n//     transition: \"background 0.2s\",\n//   },\n//   pagination: { \n//     marginTop: 16, \n//     display: \"flex\", \n//     justifyContent: \"center\", \n//     gap: 8,\n//     flexWrap: \"wrap\",\n//   },\n//   paginationBtn: { \n//     padding: \"8px 12px\", \n//     borderRadius: 6, \n//     background: \"#fff\", \n//     border: \"1px solid #dee2e6\", \n//     cursor: \"pointer\",\n//     fontSize: \"13px\",\n//     fontWeight: \"500\",\n//   },\n//   paginationBtnActive: { \n//     padding: \"8px 12px\", \n//     borderRadius: 6, \n//     background: \"#007bff\", \n//     color: \"white\", \n//     border: \"1px solid #007bff\", \n//     cursor: \"pointer\",\n//     fontSize: \"13px\",\n//     fontWeight: \"600\",\n//   },\n//   modalOverlay: { \n//     position: \"fixed\", \n//     top: 0, \n//     left: 0, \n//     right: 0, \n//     bottom: 0, \n//     background: \"rgba(0,0,0,0.5)\", \n//     display: \"flex\", \n//     justifyContent: \"center\", \n//     alignItems: \"center\", \n//     zIndex: 1000, \n//     padding: 20 \n//   },\n//   modal: { \n//     background: \"#fff\", \n//     borderRadius: 12, \n//     padding: 24, \n//     maxWidth: 700, \n//     width: \"100%\", \n//     maxHeight: \"90vh\", \n//     overflowY: \"auto\",\n//     boxShadow: \"0 8px 32px rgba(0,0,0,0.2)\",\n//   },\n//   modalTitle: { \n//     fontSize: 20, \n//     fontWeight: \"700\", \n//     color: \"#0d3b66\", \n//     marginBottom: 16, \n//     textAlign: \"center\" \n//   },\n// }\nimport React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./PriceList.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=\"https://grocerrybackend.onrender.com/api/prices\";const CATEGORY_URL=\"https://grocerrybackend.onrender.com/api/categories\";export default function PriceList(){const[items,setItems]=useState([]);const[categories,setCategories]=useState([]);const[subcategories,setSubcategories]=useState([]);const[search,setSearch]=useState(\"\");const[loading,setLoading]=useState(false);const[form,setForm]=useState({name:\"\",category:\"\",subcategory:\"\",description:\"\",basePrice:\"\",profitLoss:\"\",validTill:\"\",file:null,status:\"inactive\"});const[editId,setEditId]=useState(null);const[showForm,setShowForm]=useState(false);const[showModal,setShowModal]=useState(false);const[activeMenu,setActiveMenu]=useState(null);const[selectedItems,setSelectedItems]=useState([]);const[bulkMode,setBulkMode]=useState(false);const[currentPage,setCurrentPage]=useState(1);const itemsPerPage=30;const[filterCategory,setFilterCategory]=useState(\"\");const[filterSubcategory,setFilterSubcategory]=useState(\"\");const[filterSubs,setFilterSubs]=useState([]);// Quick edit states for inline editing\nconst[quickBasePrices,setQuickBasePrices]=useState({});const[quickProfitLoss,setQuickProfitLoss]=useState({});// NEW: sort state\nconst[sortOrder,setSortOrder]=useState(\"\");const[showCategoryModal,setShowCategoryModal]=useState(false);const[newCategoryName,setNewCategoryName]=useState(\"\");const[categoryLoading,setCategoryLoading]=useState(false);const[alertBox,setAlertBox]=useState({show:false,message:\"\",type:\"success\"// success | error | warning\n});useEffect(()=>{if(alertBox.show){const timer=setTimeout(()=>{setAlertBox(prev=>_objectSpread(_objectSpread({},prev),{},{show:false}));},2500);return()=>clearTimeout(timer);}},[alertBox.show]);useEffect(()=>{fetchCategories();},[]);useEffect(()=>{if(categories.length>0)fetchItems();},[categories]);useEffect(()=>{if(!filterCategory){setFilterSubs([]);setFilterSubcategory(\"\");return;}const cat=categories.find(c=>c._id===filterCategory);setFilterSubs((cat===null||cat===void 0?void 0:cat.subcategories)||[]);setFilterSubcategory(\"\");},[filterCategory,categories]);useEffect(()=>{if(!form.category){setSubcategories([]);setForm(prev=>_objectSpread(_objectSpread({},prev),{},{subcategory:\"\"}));return;}const cat=categories.find(c=>c._id===form.category);setSubcategories((cat===null||cat===void 0?void 0:cat.subcategories)||[]);},[form.category,categories]);const fetchCategories=async()=>{try{var _res$data;const res=await axios.get(CATEGORY_URL);if((_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.success)setCategories(res.data.categories||[]);}catch(err){console.error(\"Fetch categories error\",err);alert(\"Could not fetch categories\");}};const fetchItems=async()=>{try{var _res$data2;setLoading(true);const res=await axios.get(API_URL);if((_res$data2=res.data)!==null&&_res$data2!==void 0&&_res$data2.success){const raw=res.data.data||[];const enriched=raw.map(item=>{var _item$subcategory3;// normalize category/subcategory\nconst catObj=categories.find(c=>{var _item$category;return c._id===(((_item$category=item.category)===null||_item$category===void 0?void 0:_item$category._id)||item.category);});let subObj=null;if(catObj!==null&&catObj!==void 0&&catObj.subcategories&&item.subcategory){var _item$subcategory,_item$subcategory2;// item.subcategory may be an object with id or an id string\nconst subId=((_item$subcategory=item.subcategory)===null||_item$subcategory===void 0?void 0:_item$subcategory.id)||((_item$subcategory2=item.subcategory)===null||_item$subcategory2===void 0?void 0:_item$subcategory2._id)||item.subcategory;subObj=catObj.subcategories.find(s=>s._id===subId)||null;}return _objectSpread(_objectSpread({},item),{},{// ensure numeric fields aren't undefined\nbasePrice:Number(item.basePrice||0),profitLoss:Number(item.profitLoss||0),salePrice:Number(item.salePrice||0),lockedPrice:Number(item.lockedPrice||0),yesterdayLock:Number(item.yesterdayLock||0),brokerDisplay:Number(item.brokerDisplay||0),category:catObj?{_id:catObj._id,name:catObj.name}:item.category||null,subcategory:subObj?{_id:subObj._id,name:subObj.name}:(_item$subcategory3=item.subcategory)!==null&&_item$subcategory3!==void 0&&_item$subcategory3.id?{_id:item.subcategory.id,name:item.subcategory.name}:item.subcategory||null});});// setItems(enriched);\nsetItems(enriched.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt)));}}catch(err){console.error(\"Fetch items error\",err);alert(\"Could not fetch items\");}finally{setLoading(false);}};const handleChange=e=>{const{name,value,files}=e.target;if(files!==null&&files!==void 0&&files.length){setForm(p=>_objectSpread(_objectSpread({},p),{},{file:files[0]}));}else{setForm(p=>_objectSpread(_objectSpread({},p),{},{[name]:value}));}};//   const handleSubmit = async (e) => {\n//     e.preventDefault();\n//     setLoading(true);\n//     try {\n//       // üõë Duplicate product name check\n// const nameExists = items.some(\n//   (p) =>\n//     p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\n//     p._id !== editId\n// );\n// if (nameExists) {\n//   alert(\"‚ùå Product name already exists!\");\n//   setLoading(false);\n//   return;\n// }\nconst handleSubmit=async e=>{e.preventDefault();setLoading(true);// üõë Duplicate product name check (PASTE HERE)\nconst nameExists=items.some(p=>p.name.trim().toLowerCase()===form.name.trim().toLowerCase()&&p._id!==editId);if(nameExists){// alert(\"‚ùå Product name already exists!\");\nsetAlertBox({show:true,message:\"‚ùå Product name already exists!\",type:\"error\"});setLoading(false);return;}try{if(!form.name||!form.category||!form.basePrice){alert(\"Name, category & base price are required\");setLoading(false);return;}const fd=new FormData();fd.append(\"name\",form.name.trim());fd.append(\"category\",form.category);// if (form.subcategory) {\n//   const sub = subcategories.find((s) => s._id === form.subcategory);\n//   if (sub) {\n//     fd.append(\"subcategory[id]\", sub._id);\n//     fd.append(\"subcategory[name]\", sub.name);\n//     fd.append(\"subcategory[image]\", sub.image || \"\");\n//   }\n// }\nif(form.subcategory){const sub=subcategories.find(s=>s._id===form.subcategory);if(sub){fd.append(\"subcategory\",JSON.stringify({id:sub._id,name:sub.name,image:sub.image||\"\"}));}}else{fd.append(\"subcategory\",JSON.stringify(null));}fd.append(\"basePrice\",form.basePrice);fd.append(\"profitLoss\",form.profitLoss||0);if(form.description)fd.append(\"description\",form.description);if(form.validTill)fd.append(\"validTill\",form.validTill);fd.append(\"status\",form.status);if(form.file)fd.append(\"file\",form.file);if(editId){await axios.put(\"\".concat(API_URL,\"/\").concat(editId),fd);// alert(\"Updated successfully\");\nsetAlertBox({show:true,message:\"‚úÖ Product Update successfully\",type:\"success\"});}else{await axios.post(API_URL,fd);// alert(\"Added successfully\");\nsetAlertBox({show:true,message:\"‚úÖ Product added successfully\",type:\"success\"});}await fetchItems();resetForm();}catch(err){var _err$response,_err$response$data;console.error(\"Save error\",err);if(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)===\"Product name already exists\"){alert(\"‚ùå Product name already exists!\");}else{alert(\"Save failed!\");}}finally{setLoading(false);}};const resetForm=()=>{setForm({name:\"\",category:\"\",subcategory:\"\",description:\"\",basePrice:\"\",profitLoss:\"\",validTill:\"\",file:null,status:\"inactive\"});setEditId(null);setShowModal(false);setShowForm(false);};const handleAddCategory=async()=>{if(!newCategoryName.trim()){return alert(\"Category name is required\");}try{var _res$data3;setCategoryLoading(true);const res=await axios.post(CATEGORY_URL,{name:newCategoryName.trim()});if((_res$data3=res.data)!==null&&_res$data3!==void 0&&_res$data3.success){// alert(\"‚úÖ Category added successfully\");\nsetAlertBox({show:true,message:\"‚úÖ Category added successfully\",type:\"success\"});setNewCategoryName(\"\");setShowCategoryModal(false);await fetchCategories();// ‚úÖ dropdown auto refresh\n}else{alert(\"‚ùå Category add failed\");}}catch(err){console.error(\"Add category error\",err);alert(\"‚ùå Error while adding category\");}finally{setCategoryLoading(false);}};const handleEdit=item=>{var _item$category2,_item$category2$_id,_item$subcategory4;setForm({name:item.name||\"\",category:((_item$category2=item.category)===null||_item$category2===void 0?void 0:(_item$category2$_id=_item$category2._id)===null||_item$category2$_id===void 0?void 0:_item$category2$_id.toString())||\"\",subcategory:((_item$subcategory4=item.subcategory)===null||_item$subcategory4===void 0?void 0:_item$subcategory4._id)||\"\",description:item.description||\"\",basePrice:item.basePrice||\"\",profitLoss:item.profitLoss||0,validTill:item.validTill?item.validTill.split(\"T\")[0]:\"\",file:null,status:item.status||\"inactive\"});const cat=categories.find(c=>{var _item$category3;return c._id===((_item$category3=item.category)===null||_item$category3===void 0?void 0:_item$category3._id);});setSubcategories((cat===null||cat===void 0?void 0:cat.subcategories)||[]);setEditId(item._id);setShowModal(true);setActiveMenu(null);};const handleDelete=async id=>{if(!window.confirm(\"Delete this item?\"))return;try{await axios.delete(\"\".concat(API_URL,\"/\").concat(id));setItems(prev=>prev.filter(x=>x._id!==id));setSelectedItems(prev=>prev.filter(x=>x!==id));setActiveMenu(null);}catch(err){console.error(\"Delete error\",err);// alert(\"Delete failed\");\nsetAlertBox({show:true,message:\"‚ùå Delete failed\",type:\"error\"});}};const handleStatusToggle=async item=>{try{const newStatus=item.status===\"active\"?\"inactive\":\"active\";await axios.put(\"\".concat(API_URL,\"/status/\").concat(item._id),{status:newStatus});setItems(prev=>prev.map(x=>x._id===item._id?_objectSpread(_objectSpread({},x),{},{status:newStatus}):x));}catch(err){console.error(\"Status toggle error\",err);alert(\"Status update failed\");}};const updateLocalItemField=(id,key,value)=>{setItems(prev=>prev.map(x=>x._id===id?_objectSpread(_objectSpread({},x),{},{[key]:value}):x));};const handleBulkSave=async()=>{if(!selectedItems.length)return alert(\"No items selected\");const updates=items.filter(x=>selectedItems.includes(x._id)).map(x=>({id:x._id,basePrice:Number(x.basePrice),profitLoss:Number(x.profitLoss),status:x.status}));try{await axios.post(\"\".concat(API_URL,\"/bulk-update\"),{products:updates});// alert(\"Bulk save successful\");\nsetAlertBox({show:true,message:\"‚úÖ Bulk Save successfully\",type:\"success\"});setBulkMode(false);setSelectedItems([]);fetchItems();}catch(err){console.error(\"Bulk save error\",err);// alert(\"Bulk save failed\");\nsetAlertBox({show:true,message:\"‚ùå Bulk Save failed\",type:\"error\"});}};const handleBulkDelete=async()=>{if(!selectedItems.length)return alert(\"No items selected\");if(!window.confirm(\"Delete selected items?\"))return;try{await Promise.all(selectedItems.map(id=>axios.delete(\"\".concat(API_URL,\"/\").concat(id))));setSelectedItems([]);fetchItems();setBulkMode(false);}catch(err){console.error(\"Bulk delete error\",err);// alert(\"Bulk delete failed\");\nsetAlertBox({show:true,message:\"‚ùå Bulk Delete failed\",type:\"error\"});}};// Update Base Price inline\nconst updateBasePrice=async item=>{var _quickBasePrices$item;const newBase=Number((_quickBasePrices$item=quickBasePrices[item._id])!==null&&_quickBasePrices$item!==void 0?_quickBasePrices$item:item.basePrice);if(isNaN(newBase))return alert(\"Invalid Base Price\");try{var _item$category4,_item$subcategory5;setLoading(true);const fd=new FormData();fd.append(\"name\",item.name);fd.append(\"category\",(_item$category4=item.category)===null||_item$category4===void 0?void 0:_item$category4._id);if((_item$subcategory5=item.subcategory)!==null&&_item$subcategory5!==void 0&&_item$subcategory5.id)fd.append(\"subcategory\",item.subcategory.id);fd.append(\"description\",item.description||\"\");fd.append(\"basePrice\",newBase);fd.append(\"profitLoss\",item.profitLoss);fd.append(\"status\",item.status);const res=await axios.put(\"\".concat(API_URL,\"/\").concat(item._id),fd);if(res.data.success){await fetchItems();setQuickBasePrices(p=>_objectSpread(_objectSpread({},p),{},{[item._id]:undefined}));// alert(\"Base price updated\");\nsetAlertBox({show:true,message:\"‚úÖ Baseprice updated successfully\",type:\"success\"});}}catch(err){console.error(err);// alert(\"Update failed\");\nsetAlertBox({show:true,message:\"‚ùå Update failed\",type:\"error\"});}finally{setLoading(false);}};// Update Profit/Loss inline using updateDiff\nconst updateProfitLoss=async item=>{var _quickProfitLoss$item;const diff=Number((_quickProfitLoss$item=quickProfitLoss[item._id])!==null&&_quickProfitLoss$item!==void 0?_quickProfitLoss$item:0);if(isNaN(diff))return alert(\"Invalid Profit/Loss\");try{setLoading(true);const res=await axios.put(\"\".concat(API_URL,\"/updateDiff/\").concat(item._id),{diff});if(res.data.success){await fetchItems();setQuickProfitLoss(p=>_objectSpread(_objectSpread({},p),{},{[item._id]:undefined}));// alert(\"Profit/Loss updated\");\nsetAlertBox({show:true,message:\"‚úÖ Pofit/Loss Updated\",type:\"success\"});}}catch(err){console.error(err);// alert(\"Update failed\");\nsetAlertBox({show:true,message:\"‚ùå Update failed\",type:\"error\"});}finally{setLoading(false);}};// Filtering\nconst filteredItems=items.filter(item=>{var _item$category5,_item$subcategory6,_item$category6,_item$subcategory7;const t=search.toLowerCase();const matchText=(item.name||\"\").toLowerCase().includes(t)||(((_item$category5=item.category)===null||_item$category5===void 0?void 0:_item$category5.name)||\"\").toLowerCase().includes(t)||(((_item$subcategory6=item.subcategory)===null||_item$subcategory6===void 0?void 0:_item$subcategory6.name)||\"\").toLowerCase().includes(t);const matchCategory=!filterCategory||((_item$category6=item.category)===null||_item$category6===void 0?void 0:_item$category6._id)===filterCategory;const matchSub=!filterSubcategory||((_item$subcategory7=item.subcategory)===null||_item$subcategory7===void 0?void 0:_item$subcategory7._id)===filterSubcategory;return matchText&&matchCategory&&matchSub;});// NEW: SORTING\nlet sortedItems=[...filteredItems];if(sortOrder===\"low\"){sortedItems.sort((a,b)=>(Number(a.salePrice)||0)-(Number(b.salePrice)||0));}else if(sortOrder===\"high\"){sortedItems.sort((a,b)=>(Number(b.salePrice)||0)-(Number(a.salePrice)||0));}const indexOfLast=currentPage*itemsPerPage;const currentItems=sortedItems.slice(indexOfLast-itemsPerPage,indexOfLast);const totalPages=Math.max(1,Math.ceil(sortedItems.length/itemsPerPage));return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",style:styles.container,children:[/*#__PURE__*/_jsx(\"div\",{style:styles.header,children:/*#__PURE__*/_jsx(\"h1\",{style:styles.title,children:\"Product Management\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"top-bar\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search product, category or subcategory...\",value:search,onChange:e=>{setSearch(e.target.value);setCurrentPage(1);},style:styles.searchInput}),/*#__PURE__*/_jsx(\"button\",{style:styles.addButton,onClick:()=>{setShowForm(!showForm);setEditId(null);},children:showForm?\"‚úñ Close\":\"‚ûï Add Product\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,marginBottom:12,flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsx(\"button\",{style:styles.exportButton,onClick:()=>window.open(\"\".concat(API_URL,\"/export\"),\"_blank\"),children:\"Export CSV\"}),/*#__PURE__*/_jsxs(\"label\",{style:{cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",style:{display:\"none\"},onChange:async e=>{try{const fd=new FormData();fd.append(\"file\",e.target.files[0]);await axios.post(\"\".concat(API_URL,\"/import\"),fd);// alert(\"Imported successfully\");\nsetAlertBox({show:true,message:\"‚úÖ Imported successfully\",type:\"success\"});fetchItems();}catch(err){// alert(\"Import failed\");\nsetAlertBox({show:true,message:\"‚ùå Import failed\",type:\"error\"});}}}),/*#__PURE__*/_jsx(\"span\",{style:styles.importButton,children:\" Import CSV\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:10,marginBottom:12,flexWrap:\"wrap\"},children:[/*#__PURE__*/_jsxs(\"select\",{value:filterCategory,onChange:e=>setFilterCategory(e.target.value),style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Filter by Category\"}),categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c._id,children:c.name},c._id))]}),/*#__PURE__*/_jsxs(\"select\",{value:filterSubcategory,onChange:e=>setFilterSubcategory(e.target.value),disabled:!filterSubs.length,style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Filter by Subcategory\"}),filterSubs.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s._id,children:s.name},s._id))]})]}),selectedItems.length>0&&/*#__PURE__*/_jsx(\"div\",{style:styles.bulkBar,children:!bulkMode?/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8},children:[/*#__PURE__*/_jsx(\"button\",{style:styles.btnDelete,onClick:handleBulkDelete,children:\"\\uD83D\\uDDD1 Bulk Delete\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimary,onClick:()=>setBulkMode(true),children:\"\\u270F Bulk Edit\"})]}):/*#__PURE__*/_jsxs(\"div\",{style:styles.bulkPanel,children:[/*#__PURE__*/_jsx(\"h3\",{style:styles.bulkPanelTitle,children:\"\\u270F Bulk Edit Selected Items\"}),items.filter(item=>selectedItems.includes(item._id)).map(item=>/*#__PURE__*/_jsxs(\"div\",{style:styles.bulkItemBox,children:[/*#__PURE__*/_jsx(\"h4\",{style:styles.bulkItemTitle,children:item.name}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGrid,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Base Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.basePrice,onChange:e=>updateLocalItemField(item._id,\"basePrice\",Number(e.target.value)),style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Profit/Loss\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.profitLoss,onChange:e=>updateLocalItemField(item._id,\"profitLoss\",Number(e.target.value)),style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:item.status,onChange:e=>updateLocalItemField(item._id,\"status\",e.target.value),style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"inactive\"})]})]})]})]},item._id)),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:10,marginTop:12,flexWrap:'wrap'},children:[/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimary,onClick:handleBulkSave,children:\"\\u2714 Save All\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimary,onClick:async()=>{if(!selectedItems.length)return alert(\"No items selected\");for(let id of selectedItems)await axios.post(\"\".concat(API_URL,\"/copy/\").concat(id));// alert(\"Selected copied\");\nsetAlertBox({show:true,message:\"‚úÖ Selected Copied successfully\",type:\"success\"});fetchItems();},children:\"\\uD83D\\uDCC4 Copy Selected\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimary,onClick:async()=>{if(!selectedItems.length)return alert(\"No items selected\");const res=await axios.post(\"\".concat(API_URL,\"/export-selected\"),{ids:selectedItems},{responseType:\"blob\"});const url=window.URL.createObjectURL(new Blob([res.data]));const a=document.createElement(\"a\");a.href=url;a.download=\"selected.csv\";a.click();},children:\"Export Selected\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnCancel,onClick:()=>setBulkMode(false),children:\"\\u2716 Cancel\"})]})]})}),showForm&&/*#__PURE__*/_jsxs(\"div\",{style:styles.formCard,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.formTitle,children:\"\\u2795 Add / Edit Product\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.formGrid,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Product Name *\"}),/*#__PURE__*/_jsx(\"input\",{required:true,name:\"name\",value:form.name,onChange:handleChange,style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Category *\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8},children:[/*#__PURE__*/_jsxs(\"select\",{required:true,name:\"category\",value:form.category,onChange:handleChange,style:_objectSpread(_objectSpread({},styles.select),{},{flex:1}),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c._id,children:c.name},c._id))]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowCategoryModal(true),style:{background:\"#0b69ff\",color:\"#fff\",border:\"none\",borderRadius:8,padding:\"8px 14px\",cursor:\"pointer\",fontWeight:700,height:\"40px\"},children:\"\\u2795\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Subcategory\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"subcategory\",value:form.subcategory,onChange:handleChange,disabled:!subcategories.length,style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Subcategory\"}),subcategories.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s._id,children:s.name},s._id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Base Price *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,name:\"basePrice\",value:form.basePrice,onChange:handleChange,style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Profit/Loss\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"profitLoss\",value:form.profitLoss,onChange:handleChange,style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Valid Till\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"validTill\",value:form.validTill,onChange:handleChange,style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleChange,style:styles.fileInput})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:form.status,onChange:handleChange,style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleChange,style:styles.textarea})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formActions,children:[/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimary,disabled:loading,children:loading?\"Saving...\":editId?\"Update Product\":\"Add Product\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:styles.btnCancel,onClick:resetForm,children:\"Cancel\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.tableCard,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.tableHeader,children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.tableTitle,children:\"Items\"}),/*#__PURE__*/_jsxs(\"span\",{style:styles.totalCount,children:[\"Total: \",filteredItems.length]})]}),/*#__PURE__*/_jsx(\"div\",{style:styles.tableWrapper,children:/*#__PURE__*/_jsxs(\"table\",{style:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedItems.length===filteredItems.length&&filteredItems.length>0,onChange:()=>{if(selectedItems.length===filteredItems.length)setSelectedItems([]);else setSelectedItems(filteredItems.map(x=>x._id));}})}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Sr\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Image\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Category\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Subcategory\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Base Price\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Profit/Loss\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Sale Price\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Price Lock\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Teji/Maddi\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{style:styles.th,children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:currentItems.map((item,i)=>{var _item$category7,_item$subcategory8,_quickProfitLoss$item2;return/*#__PURE__*/_jsxs(\"tr\",{style:styles.tr,children:[/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedItems.includes(item._id),onChange:()=>setSelectedItems(prev=>prev.includes(item._id)?prev.filter(x=>x!==item._id):[...prev,item._id])})}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:(currentPage-1)*itemsPerPage+(i+1)}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:item.image?/*#__PURE__*/_jsx(\"img\",{src:item.image,style:styles.tableImg,alt:\"\"}):\"No Img\"}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:item.name}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:((_item$category7=item.category)===null||_item$category7===void 0?void 0:_item$category7.name)||\"-\"}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:((_item$subcategory8=item.subcategory)===null||_item$subcategory8===void 0?void 0:_item$subcategory8.name)||\"-\"}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:quickBasePrices[item._id]!==undefined?quickBasePrices[item._id]:item.basePrice,onChange:e=>setQuickBasePrices(p=>_objectSpread(_objectSpread({},p),{},{[item._id]:e.target.value})),style:_objectSpread(_objectSpread({},styles.input),{},{padding:\"6px 8px\",width:80})}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnSmall,onClick:()=>updateBasePrice(item),children:\"\\u2714\"})]}),/*#__PURE__*/_jsxs(\"small\",{style:{color:\"#28a745\",display:\"block\",marginTop:4},children:[\"Saved: \\u20B9\",item.basePrice]})]}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:8,alignItems:\"center\"},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"change\",value:(_quickProfitLoss$item2=quickProfitLoss[item._id])!==null&&_quickProfitLoss$item2!==void 0?_quickProfitLoss$item2:\"\",onChange:e=>setQuickProfitLoss(p=>_objectSpread(_objectSpread({},p),{},{[item._id]:e.target.value})),style:_objectSpread(_objectSpread({},styles.input),{},{padding:\"6px 8px\",width:80})}),/*#__PURE__*/_jsx(\"button\",{style:styles.btnSmall,onClick:()=>updateProfitLoss(item),children:\"\\u2714\"})]}),/*#__PURE__*/_jsxs(\"small\",{style:{color:\"#666\",display:\"block\",marginTop:4},children:[\"Current: \",item.profitLoss]})]}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[\"\\u20B9\",item.salePrice]}),/*#__PURE__*/_jsxs(\"td\",{style:styles.td,children:[\"\\u20B9\",item.lockedPrice]}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:item.lockedPrice===0?/*#__PURE__*/_jsx(\"span\",{style:{color:\"#6c757d\",fontWeight:\"600\"},children:\"0\"}):(()=>{const teji=item.salePrice-item.lockedPrice;return/*#__PURE__*/_jsxs(\"span\",{style:{color:teji>=0?\"#28a745\":\"#dc3545\",fontWeight:\"600\"},children:[teji>=0?\"‚ñ≤\":\"‚ñº\",\" \",Math.abs(teji)]});})()}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsx(\"button\",{style:item.status===\"active\"?styles.statusActive:styles.statusInactive,onClick:()=>handleStatusToggle(item),children:item.status===\"active\"?\"Active\":\"Inactive\"})}),/*#__PURE__*/_jsx(\"td\",{style:styles.td,children:/*#__PURE__*/_jsxs(\"div\",{style:{position:\"relative\"},children:[/*#__PURE__*/_jsx(\"button\",{style:styles.menuButton,onClick:()=>setActiveMenu(activeMenu===item._id?null:item._id),children:\"\\u22EE\"}),activeMenu===item._id&&/*#__PURE__*/_jsxs(\"div\",{style:styles.dropdown,children:[/*#__PURE__*/_jsx(\"button\",{style:styles.dropdownItem,onClick:()=>handleEdit(item),children:\"\\u270F Edit\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.dropdownItem,onClick:async()=>{await axios.post(\"\".concat(API_URL,\"/copy/\").concat(item._id));// alert(\"Copied successfully\");\nsetAlertBox({show:true,message:\"‚úÖ Copied successfully\",type:\"success\"});fetchItems();},children:\"\\uD83D\\uDCC4 Copy\"}),/*#__PURE__*/_jsx(\"button\",{style:styles.dropdownItemDelete,onClick:()=>handleDelete(item._id),children:\"\\uD83D\\uDDD1 Delete\"})]})]})})]},item._id);})})]})}),/*#__PURE__*/_jsxs(\"div\",{style:styles.pagination,children:[/*#__PURE__*/_jsx(\"button\",{style:styles.paginationBtn,disabled:currentPage===1,onClick:()=>setCurrentPage(p=>p-1),children:\"Previous\"}),Array.from({length:totalPages},(_,i)=>/*#__PURE__*/_jsx(\"button\",{style:i+1===currentPage?styles.paginationBtnActive:styles.paginationBtn,onClick:()=>setCurrentPage(i+1),children:i+1},i)),/*#__PURE__*/_jsx(\"button\",{style:styles.paginationBtn,disabled:currentPage===totalPages,onClick:()=>setCurrentPage(p=>p+1),children:\"Next\"})]})]}),showModal&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,onClick:()=>setShowModal(false),children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modal,onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.modalTitle,children:\"\\u270F Edit Product\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.formGrid,children:[/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Product Name *\"}),/*#__PURE__*/_jsx(\"input\",{required:true,name:\"name\",value:form.name,onChange:handleChange,style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Category *\"}),/*#__PURE__*/_jsxs(\"select\",{required:true,name:\"category\",value:form.category,onChange:handleChange,style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),categories.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c._id,children:c.name},c._id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Subcategory\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"subcategory\",value:form.subcategory,onChange:handleChange,disabled:!subcategories.length,style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Subcategory\"}),subcategories.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s._id,children:s.name},s._id))]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Base Price *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,name:\"basePrice\",value:form.basePrice,onChange:handleChange,style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Profit/Loss\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"profitLoss\",value:form.profitLoss,onChange:handleChange,style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Valid Till\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"validTill\",value:form.validTill,onChange:handleChange,style:styles.input})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handleChange,style:styles.fileInput})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:form.status,onChange:handleChange,style:styles.select,children:[/*#__PURE__*/_jsx(\"option\",{value:\"active\",children:\"Active\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactive\",children:\"Inactive\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:form.description,onChange:handleChange,style:styles.textarea})]}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formActions,children:[/*#__PURE__*/_jsx(\"button\",{style:styles.btnPrimary,disabled:loading,children:loading?\"Saving...\":\"Update\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",style:styles.btnCancel,onClick:resetForm,children:\"Cancel\"})]})]})]})}),showCategoryModal&&/*#__PURE__*/_jsx(\"div\",{style:styles.modalOverlay,onClick:()=>setShowCategoryModal(false),children:/*#__PURE__*/_jsxs(\"div\",{style:styles.modal,onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"h2\",{style:styles.modalTitle,children:\"\\u2795 Add New Category\"}),/*#__PURE__*/_jsxs(\"div\",{style:styles.formGroup,children:[/*#__PURE__*/_jsx(\"label\",{style:styles.label,children:\"Category Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newCategoryName,onChange:e=>setNewCategoryName(e.target.value),style:styles.input,placeholder:\"Enter category name\",autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",gap:10,marginTop:20},children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddCategory,disabled:categoryLoading,style:styles.btnPrimary,children:categoryLoading?\"Saving...\":\"Save Category\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowCategoryModal(false),style:styles.btnCancel,children:\"Cancel\"})]})]})}),alertBox.show&&/*#__PURE__*/_jsx(\"div\",{className:\"custom-alert-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom-alert-box \".concat(alertBox.type),children:[/*#__PURE__*/_jsx(\"p\",{children:alertBox.message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setAlertBox(_objectSpread(_objectSpread({},alertBox),{},{show:false})),children:\"OK\"})]})})]});}const styles={container:{fontFamily:\"Inter, Arial, sans-serif\",background:\"#f6f8fa\",minHeight:\"100vh\"},header:{marginBottom:8},title:{fontSize:\"22px\",fontWeight:800,color:\"#dc3545\",marginBottom:\"8px\"},searchInput:{flex:\"1\",padding:\"12px 14px\",borderRadius:\"12px\",border:\"1px solid #e2e8f0\",background:\"#fff\",fontSize:\"14px\",outline:\"none\",boxShadow:\"0 1px 2px rgba(16,24,40,0.03)\"},searchInput:{flex:\"1\",padding:\"12px 14px\",borderRadius:\"12px\",border:\"1px solid #e2e8f0\",background:\"#fff\",fontSize:\"14px\",outline:\"none\",boxShadow:\"0 1px 2px rgba(16,24,40,0.03)\"},// searchInput: {\n//   flex: \"1\",\n//   minWidth: \"260px\",\n//   padding: \"12px 14px\",\n//   borderRadius: \"12px\",\n//   border: \"1px solid #e2e8f0\",\n//   background: \"#fff\",\n//   fontSize: \"14px\",\n//   outline: \"none\",\n//   boxShadow: \"0 1px 2px rgba(16,24,40,0.03)\",\n// },\naddButton:{background:\"#dc3545\",color:\"#fff\",border:\"none\",borderRadius:\"10px\",padding:\"10px 16px\",fontSize:\"14px\",cursor:\"pointer\",fontWeight:700,boxShadow:\"0 6px 18px rgba(11,105,255,0.12)\"},exportButton:{background:\"#fff\",color:\"#0f1724\",border:\"1px solid #e6eefc\",borderRadius:10,padding:\"8px 12px\",cursor:\"pointer\",fontWeight:700},importButton:{background:\"#fff\",color:\"#0f1724\",border:\"1px solid #e6eefc\",borderRadius:10,padding:\"8px 12px\",cursor:\"pointer\",fontWeight:700,marginLeft:8},select:{padding:\"10px 12px\",borderRadius:\"10px\",border:\"1px solid #e2e8f0\",background:\"#fff\",fontSize:\"13px\",minWidth:\"160px\"},sortSelect:{padding:\"10px 12px\",borderRadius:\"10px\",border:\"1px solid #dbeafe\",background:\"#f8fbff\",fontSize:\"13px\",minWidth:\"170px\",fontWeight:700,color:\"#0f1724\"},smallLabel:{fontSize:12,color:\"#475569\",fontWeight:700,marginRight:6},bulkBar:{background:\"#eef2ff\",border:\"1px solid #dbeafe\",borderRadius:\"10px\",padding:\"12px\",marginBottom:\"12px\"},bulkPanel:{width:\"100%\",background:\"#fff\",border:\"1px solid #eef2ff\",padding:\"12px\",borderRadius:\"10px\"},bulkPanelTitle:{textAlign:\"center\",fontSize:\"16px\",fontWeight:700,marginBottom:\"10px\",color:\"#0f1724\"},bulkItemBox:{background:\"#ffffff\",border:\"1px solid #eef2ff\",padding:\"12px\",borderRadius:\"8px\",marginBottom:\"10px\"},bulkItemTitle:{fontSize:\"14px\",fontWeight:700,marginBottom:\"8px\",color:\"#0f1724\"},formCard:{borderRadius:\"12px\",padding:\"18px\",marginBottom:\"18px\",background:\"#fff\",border:\"1px solid #eef2ff\",boxShadow:\"0 4px 16px rgba(2,6,23,0.04)\"},formTitle:{fontSize:\"18px\",fontWeight:800,marginBottom:16,color:\"#0f1724\"},formGrid:{display:\"grid\",gridTemplateColumns:\"repeat(auto-fit, minmax(220px, 1fr))\",gap:\"12px\"},formGroup:{display:\"flex\",flexDirection:\"column\",gap:\"6px\"},label:{fontWeight:700,fontSize:\"13px\",color:\"#0f1724\"},input:{padding:\"10px\",borderRadius:\"8px\",border:\"1px solid #e6eef8\",background:\"#fff\",fontSize:\"13px\",outline:\"none\"},textarea:{padding:\"10px\",borderRadius:\"8px\",border:\"1px solid #e6eef8\",background:\"#fff\",minHeight:80,fontSize:\"13px\",outline:\"none\",resize:\"vertical\"},fileInput:{padding:\"6px\",fontSize:\"13px\"},formActions:{marginTop:16,display:\"flex\",gap:10},btnPrimary:{background:\"#ff0b0bff\",color:\"#fff\",border:\"none\",borderRadius:\"8px\",padding:\"10px 20px\",cursor:\"pointer\",fontWeight:700,fontSize:\"14px\"},btnSmall:{background:\"#b91010ff\",color:\"#fff\",border:\"none\",borderRadius:\"6px\",padding:\"6px 12px\",cursor:\"pointer\",fontSize:\"12px\",fontWeight:700},btnDelete:{background:\"#ef4444\",color:\"#fff\",border:\"none\",borderRadius:\"8px\",padding:\"8px 14px\",cursor:\"pointer\",fontWeight:700,fontSize:\"14px\"},btnCancel:{background:\"#6b7280\",color:\"#fff\",border:\"none\",borderRadius:\"8px\",padding:\"10px 20px\",cursor:\"pointer\",fontWeight:700,fontSize:\"14px\"},tableCard:{marginTop:16},tableHeader:{display:\"flex\",justifyContent:\"space-between\",marginBottom:12,alignItems:\"center\"},tableTitle:{fontSize:\"18px\",fontWeight:800,color:\"#0f1724\"},totalCount:{fontSize:\"14px\",color:\"#64748b\",fontWeight:700},tableWrapper:{overflowX:\"auto\",border:\"1px solid #eef2ff\",borderRadius:\"8px\"},table:{width:\"100%\",borderCollapse:\"collapse\",fontSize:\"13px\"},th:{background:\"#fbfdff\",// padding: \"12px 10px\",\nfontWeight:800,color:\"#0f1724\",textAlign:\"left\"// borderBottom: \"2px solid #eef2ff\",\n// whiteSpace: \"nowrap\",\n},tr:{borderBottom:\"1px solid #f1f5f9\",transition:\"background 0.2s\"},td:{verticalAlign:\"middle\"},tableImg:{width:\"50px\",height:\"50px\",borderRadius:\"6px\",objectFit:\"cover\"},statusActive:{background:\"#d1fae5\",padding:\"6px 12px\",borderRadius:\"6px\",color:\"#065f46\",fontWeight:700,border:\"1px solid #bbf7d0\",cursor:\"pointer\",fontSize:\"12px\"},statusInactive:{background:\"#fee2e2\",padding:\"6px 12px\",borderRadius:\"6px\",color:\"#991b1b\",fontWeight:700,border:\"1px solid #fecaca\",cursor:\"pointer\",fontSize:\"12px\"},menuButton:{background:\"#fff\",border:\"1px solid #e6eef8\",borderRadius:\"6px\",padding:\"6px 10px\",fontSize:\"16px\",cursor:\"pointer\",fontWeight:700},dropdown:{position:\"absolute\",right:0,top:36,background:\"#fff\",border:\"1px solid #e6eef8\",borderRadius:8,zIndex:100,minWidth:140,boxShadow:\"0 8px 30px rgba(2,6,23,0.08)\"},dropdownItem:{display:\"block\",width:\"100%\",padding:\"10px 14px\",background:\"transparent\",border:\"none\",textAlign:\"left\",cursor:\"pointer\",fontSize:13,fontWeight:700,transition:\"background 0.12s\"},dropdownItemDelete:{display:\"block\",width:\"100%\",padding:\"10px 14px\",background:\"transparent\",border:\"none\",textAlign:\"left\",cursor:\"pointer\",fontSize:13,fontWeight:700,color:\"#ef4444\",transition:\"background 0.12s\"},pagination:{marginTop:16,display:\"flex\",justifyContent:\"center\",gap:8,flexWrap:\"wrap\"},paginationBtn:{padding:\"8px 12px\",borderRadius:8,background:\"#fff\",border:\"1px solid #e6eef8\",cursor:\"pointer\",fontSize:\"13px\",fontWeight:700},paginationBtnActive:{padding:\"8px 12px\",borderRadius:8,background:\"#0b69ff\",color:\"white\",border:\"1px solid #0b69ff\",cursor:\"pointer\",fontSize:\"13px\",fontWeight:800},modalOverlay:{position:\"fixed\",top:0,left:0,right:0,bottom:0,background:\"rgba(2,6,23,0.5)\",display:\"flex\",justifyContent:\"center\",alignItems:\"center\",zIndex:1000,padding:20},modal:{background:\"#fff\",borderRadius:12,padding:24,maxWidth:700,width:\"100%\",maxHeight:\"90vh\",overflowY:\"auto\",boxShadow:\"0 12px 48px rgba(2,6,23,0.12)\"},modalTitle:{fontSize:20,fontWeight:800,color:\"#0f1724\",marginBottom:16,textAlign:\"center\"}};","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","API_URL","CATEGORY_URL","PriceList","items","setItems","categories","setCategories","subcategories","setSubcategories","search","setSearch","loading","setLoading","form","setForm","name","category","subcategory","description","basePrice","profitLoss","validTill","file","status","editId","setEditId","showForm","setShowForm","showModal","setShowModal","activeMenu","setActiveMenu","selectedItems","setSelectedItems","bulkMode","setBulkMode","currentPage","setCurrentPage","itemsPerPage","filterCategory","setFilterCategory","filterSubcategory","setFilterSubcategory","filterSubs","setFilterSubs","quickBasePrices","setQuickBasePrices","quickProfitLoss","setQuickProfitLoss","sortOrder","setSortOrder","showCategoryModal","setShowCategoryModal","newCategoryName","setNewCategoryName","categoryLoading","setCategoryLoading","alertBox","setAlertBox","show","message","type","timer","setTimeout","prev","_objectSpread","clearTimeout","fetchCategories","length","fetchItems","cat","find","c","_id","_res$data","res","get","data","success","err","console","error","alert","_res$data2","raw","enriched","map","item","_item$subcategory3","catObj","_item$category","subObj","_item$subcategory","_item$subcategory2","subId","id","s","Number","salePrice","lockedPrice","yesterdayLock","brokerDisplay","sort","a","b","Date","createdAt","handleChange","e","value","files","target","p","handleSubmit","preventDefault","nameExists","some","trim","toLowerCase","fd","FormData","append","sub","JSON","stringify","image","put","concat","post","resetForm","_err$response","_err$response$data","response","handleAddCategory","_res$data3","handleEdit","_item$category2","_item$category2$_id","_item$subcategory4","toString","split","_item$category3","handleDelete","window","confirm","delete","filter","x","handleStatusToggle","newStatus","updateLocalItemField","key","handleBulkSave","updates","includes","products","handleBulkDelete","Promise","all","updateBasePrice","_quickBasePrices$item","newBase","isNaN","_item$category4","_item$subcategory5","undefined","updateProfitLoss","_quickProfitLoss$item","diff","filteredItems","_item$category5","_item$subcategory6","_item$category6","_item$subcategory7","t","matchText","matchCategory","matchSub","sortedItems","indexOfLast","currentItems","slice","totalPages","Math","max","ceil","className","style","styles","container","children","header","title","placeholder","onChange","searchInput","addButton","onClick","display","gap","marginBottom","flexWrap","exportButton","open","cursor","accept","importButton","select","disabled","bulkBar","btnDelete","btnPrimary","bulkPanel","bulkPanelTitle","bulkItemBox","bulkItemTitle","formGrid","formGroup","label","input","marginTop","ids","responseType","url","URL","createObjectURL","Blob","document","createElement","href","download","click","btnCancel","formCard","formTitle","onSubmit","required","flex","background","color","border","borderRadius","padding","fontWeight","height","fileInput","textarea","formActions","tableCard","tableHeader","tableTitle","totalCount","tableWrapper","table","th","checked","i","_item$category7","_item$subcategory8","_quickProfitLoss$item2","tr","td","src","tableImg","alt","alignItems","width","btnSmall","teji","abs","statusActive","statusInactive","position","menuButton","dropdown","dropdownItem","dropdownItemDelete","pagination","paginationBtn","Array","from","_","paginationBtnActive","modalOverlay","modal","stopPropagation","modalTitle","autoFocus","fontFamily","minHeight","fontSize","outline","boxShadow","marginLeft","minWidth","sortSelect","smallLabel","marginRight","textAlign","gridTemplateColumns","flexDirection","resize","justifyContent","overflowX","borderCollapse","borderBottom","transition","verticalAlign","objectFit","right","top","zIndex","left","bottom","maxWidth","maxHeight","overflowY"],"sources":["C:/Users/Rinku Sheoran/Downloads/g1/Grocerryadminfrontend-main/src/pages/PriceList.jsx"],"sourcesContent":["\r\n// import React, { useEffect, useState, useRef } from \"react\";\r\n// import axios from \"axios\";\r\n\r\n// const API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\r\n// const CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\r\n\r\n// export default function PriceList() {\r\n//   const [items, setItems] = useState([]);\r\n//   const [categories, setCategories] = useState([]);\r\n//   const [subcategories, setSubcategories] = useState([]);\r\n//   const [search, setSearch] = useState(\"\");\r\n//   const [loading, setLoading] = useState(false);\r\n\r\n//   const [form, setForm] = useState({\r\n//     name: \"\",\r\n//     category: \"\",\r\n//     subcategory: \"\",\r\n//     description: \"\",\r\n//     basePrice: \"\",\r\n//     profitLoss: \"\",\r\n//     validTill: \"\",\r\n//     file: null,\r\n//     status: \"inactive\",\r\n//   });\r\n\r\n//   const [editId, setEditId] = useState(null);\r\n//   const [showForm, setShowForm] = useState(false);\r\n//   const [showModal, setShowModal] = useState(false);\r\n//   const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n//   const [selectedItems, setSelectedItems] = useState([]);\r\n//   const [bulkMode, setBulkMode] = useState(false);\r\n\r\n//   const [currentPage, setCurrentPage] = useState(1);\r\n//   const itemsPerPage = 30;\r\n\r\n//   const [filterCategory, setFilterCategory] = useState(\"\");\r\n//   const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n//   const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n//   // Quick edit states for inline editing\r\n//   const [quickBasePrices, setQuickBasePrices] = useState({});\r\n//   const [quickProfitLoss, setQuickProfitLoss] = useState({});\r\n\r\n//   useEffect(() => {\r\n//     fetchCategories();\r\n//   }, []);\r\n\r\n//   useEffect(() => {\r\n//     if (categories.length > 0) fetchItems();\r\n//   }, [categories]);\r\n\r\n//   useEffect(() => {\r\n//     if (!filterCategory) {\r\n//       setFilterSubs([]);\r\n//       setFilterSubcategory(\"\");\r\n//       return;\r\n//     }\r\n//     const cat = categories.find((c) => c._id === filterCategory);\r\n//     setFilterSubs(cat?.subcategories || []);\r\n//     setFilterSubcategory(\"\");\r\n//   }, [filterCategory, categories]);\r\n\r\n//   useEffect(() => {\r\n//     if (!form.category) {\r\n//       setSubcategories([]);\r\n//       setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n//       return;\r\n//     }\r\n//     const cat = categories.find((c) => c._id === form.category);\r\n//     setSubcategories(cat?.subcategories || []);\r\n//   }, [form.category, categories]);\r\n\r\n//   const fetchCategories = async () => {\r\n//     try {\r\n//       const res = await axios.get(CATEGORY_URL);\r\n//       if (res.data?.success) setCategories(res.data.categories || []);\r\n//     } catch (err) {\r\n//       console.error(\"Fetch categories error\", err);\r\n//       alert(\"Could not fetch categories\");\r\n//     }\r\n//   };\r\n\r\n//   const fetchItems = async () => {\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.get(API_URL);\r\n//       if (res.data?.success) {\r\n//         const raw = res.data.data || [];\r\n//         // const enriched = raw.map((item) => {\r\n//         //   const catObj = categories.find((c) => c._id === (item.category?._id || item.category));\r\n//         //   const subObj = catObj?.subcategories?.find((s) => s._id === (item.subcategory?.id || item.subcategory?._id));\r\n\r\n//         //   return {\r\n//         //     ...item,\r\n//         //     basePrice: item.basePrice || 0,\r\n//         //     profitLoss: item.profitLoss || 0,\r\n//         //     salePrice: item.salePrice || 0,\r\n//         //     lockedPrice: item.lockedPrice || 0,\r\n//         //     yesterdayLock: item.yesterdayLock || 0,\r\n//         //     brokerDisplay: item.brokerDisplay || 0,\r\n//         //     category: catObj ? { _id: catObj._id, name: catObj.name } : item.category,\r\n//         //     subcategory: subObj ? { _id: subObj._id, name: subObj.name } : item.subcategory,\r\n//         //   };\r\n//         // });\r\n//         const enriched = raw.map((item) => {\r\n//   const catObj = categories.find((c) => c._id === (item.category?._id || item.category));\r\n\r\n//   const subObj = catObj?.subcategories?.find(\r\n//     (s) => s._id === item.subcategory?.id\r\n//   );\r\n\r\n//   return {\r\n//     ...item,\r\n//     category: catObj ? { _id: catObj._id, name: catObj.name } : null,\r\n//     subcategory: subObj\r\n//       ? { _id: subObj._id, name: subObj.name }\r\n//       : item.subcategory?.id\r\n//       ? { _id: item.subcategory.id, name: item.subcategory.name }\r\n//       : null,\r\n//   };\r\n// });\r\n\r\n//         setItems(enriched);\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Fetch items error\", err);\r\n//       alert(\"Could not fetch items\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const handleChange = (e) => {\r\n//     const { name, value, files } = e.target;\r\n//     if (files?.length) {\r\n//       setForm((p) => ({ ...p, file: files[0] }));\r\n//     } else {\r\n//       setForm((p) => ({ ...p, [name]: value }));\r\n//     }\r\n//   };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       if (!form.name || !form.category || !form.basePrice) {\r\n//         alert(\"Name, category & base price are required\");\r\n//         setLoading(false);\r\n//         return;\r\n//       }\r\n\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", form.name);\r\n//       fd.append(\"category\", form.category);\r\n//       // if (form.subcategory) fd.append(\"subcategory\", form.subcategory);\r\n//       if (form.subcategory) {\r\n//   const sub = subcategories.find((s) => s._id === form.subcategory);\r\n//   fd.append(\"subcategory[id]\", sub._id);\r\n//   fd.append(\"subcategory[name]\", sub.name);\r\n//   fd.append(\"subcategory[image]\", sub.image || \"\");\r\n// }\r\n\r\n//       fd.append(\"basePrice\", form.basePrice);\r\n//       fd.append(\"profitLoss\", form.profitLoss || 0);\r\n//       if (form.description) fd.append(\"description\", form.description);\r\n//       if (form.validTill) fd.append(\"validTill\", form.validTill);\r\n//       fd.append(\"status\", form.status);\r\n//       if (form.file) fd.append(\"file\", form.file);\r\n\r\n//       if (editId) {\r\n//         await axios.put(`${API_URL}/${editId}`, fd);\r\n//         alert(\"Updated successfully\");\r\n//       } else {\r\n//         await axios.post(API_URL, fd);\r\n//         alert(\"Added successfully\");\r\n//       }\r\n\r\n//       await fetchItems();\r\n//       resetForm();\r\n//     } catch (err) {\r\n//       console.error(\"Save error\", err);\r\n//       alert(\"Save failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   const resetForm = () => {\r\n//     setForm({\r\n//       name: \"\",\r\n//       category: \"\",\r\n//       subcategory: \"\",\r\n//       description: \"\",\r\n//       basePrice: \"\",\r\n//       profitLoss: \"\",\r\n//       validTill: \"\",\r\n//       file: null,\r\n//       status: \"inactive\",\r\n//     });\r\n//     setEditId(null);\r\n//     setShowModal(false);\r\n//     setShowForm(false);\r\n//   };\r\n\r\n//   const handleEdit = (item) => {\r\n//     setForm({\r\n//       name: item.name || \"\",\r\n//       category: item.category?._id?.toString() || \"\",\r\n//       // subcategory: item.subcategory?.id?.toString() || \"\",\r\n//       subcategory: item.subcategory?._id || \"\",\r\n\r\n//       description: item.description || \"\",\r\n//       basePrice: item.basePrice || \"\",\r\n//       profitLoss: item.profitLoss || 0,\r\n//       validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n//       file: null,\r\n//       status: item.status || \"inactive\",\r\n//     });\r\n\r\n//     const cat = categories.find((c) => c._id === item.category?._id);\r\n//     setSubcategories(cat?.subcategories || []);\r\n\r\n//     setEditId(item._id);\r\n//     setShowModal(true);\r\n//     setActiveMenu(null);\r\n//   };\r\n\r\n//   const handleDelete = async (id) => {\r\n//     if (!window.confirm(\"Delete this item?\")) return;\r\n//     try {\r\n//       await axios.delete(`${API_URL}/${id}`);\r\n//       setItems((prev) => prev.filter((x) => x._id !== id));\r\n//       setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n//       setActiveMenu(null);\r\n//     } catch (err) {\r\n//       console.error(\"Delete error\", err);\r\n//       alert(\"Delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleStatusToggle = async (item) => {\r\n//     try {\r\n//       const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n//       await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n//       setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n//     } catch (err) {\r\n//       console.error(\"Status toggle error\", err);\r\n//       alert(\"Status update failed\");\r\n//     }\r\n//   };\r\n\r\n//   const updateLocalItemField = (id, key, value) => {\r\n//     setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n//   };\r\n\r\n//   const handleBulkSave = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected\");\r\n\r\n//     const updates = items\r\n//       .filter((x) => selectedItems.includes(x._id))\r\n//       .map((x) => ({\r\n//         id: x._id,\r\n//         basePrice: Number(x.basePrice),\r\n//         profitLoss: Number(x.profitLoss),\r\n//         status: x.status,\r\n//       }));\r\n\r\n//     try {\r\n//       await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n//       alert(\"Bulk save successful\");\r\n//       setBulkMode(false);\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//     } catch (err) {\r\n//       console.error(\"Bulk save error\", err);\r\n//       alert(\"Bulk save failed\");\r\n//     }\r\n//   };\r\n\r\n//   const handleBulkDelete = async () => {\r\n//     if (!selectedItems.length) return alert(\"No items selected\");\r\n//     if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n//     try {\r\n//       await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n//       setSelectedItems([]);\r\n//       fetchItems();\r\n//       setBulkMode(false);\r\n//     } catch (err) {\r\n//       console.error(\"Bulk delete error\", err);\r\n//       alert(\"Bulk delete failed\");\r\n//     }\r\n//   };\r\n\r\n//   // Update Base Price inline\r\n//   const updateBasePrice = async (item) => {\r\n//     const newBase = Number(quickBasePrices[item._id] ?? item.basePrice);\r\n//     if (isNaN(newBase)) return alert(\"Invalid Base Price\");\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       const fd = new FormData();\r\n//       fd.append(\"name\", item.name);\r\n//       fd.append(\"category\", item.category?._id);\r\n//       if (item.subcategory?.id) fd.append(\"subcategory\", item.subcategory.id);\r\n//       fd.append(\"description\", item.description || \"\");\r\n//       fd.append(\"basePrice\", newBase);\r\n//       fd.append(\"profitLoss\", item.profitLoss);\r\n//       fd.append(\"status\", item.status);\r\n\r\n//       const res = await axios.put(`${API_URL}/${item._id}`, fd);\r\n//       if (res.data.success) {\r\n//         await fetchItems();\r\n//         setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\r\n//         alert(\"Base price updated\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       alert(\"Update failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // Update Profit/Loss inline using updateDiff\r\n//   const updateProfitLoss = async (item) => {\r\n//     const diff = Number(quickProfitLoss[item._id] ?? 0);\r\n//     if (isNaN(diff)) return alert(\"Invalid Profit/Loss\");\r\n\r\n//     try {\r\n//       setLoading(true);\r\n//       const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, { diff });\r\n//       if (res.data.success) {\r\n//         await fetchItems();\r\n//         setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\r\n//         alert(\"Profit/Loss updated\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(err);\r\n//       alert(\"Update failed\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n\r\n\r\n  \r\n//   const filteredItems = items.filter((item) => {\r\n//     const t = search.toLowerCase();\r\n//     const matchText =\r\n//       (item.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n//       (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n//     const matchCategory = !filterCategory || item.category?._id === filterCategory;\r\n//     const matchSub = !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n//     return matchText && matchCategory && matchSub;\r\n//   });\r\n\r\n//   const indexOfLast = currentPage * itemsPerPage;\r\n//   const currentItems = filteredItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n//   const totalPages = Math.max(1, Math.ceil(filteredItems.length / itemsPerPage));\r\n\r\n//   return (\r\n//     <div className=\"container\" style={styles.container}>\r\n//       <div style={styles.header}>\r\n//         <h1 style={styles.title}>Product Management</h1>\r\n//       </div>\r\n\r\n//       <div style={{ marginBottom: 12, display: \"flex\", gap: 12, flexWrap: \"wrap\" }}>\r\n//         <input\r\n//           type=\"text\"\r\n//           placeholder=\"Search product, category or subcategory...\"\r\n//           value={search}\r\n//           onChange={(e) => {\r\n//             setSearch(e.target.value);\r\n//             setCurrentPage(1);\r\n//           }}\r\n//           style={styles.searchInput}\r\n//         />\r\n\r\n//         <button\r\n//           style={styles.addButton}\r\n//           onClick={() => {\r\n//             setShowForm(!showForm);\r\n//             setEditId(null);\r\n//           }}\r\n//         >\r\n//           {showForm ? \"‚úñ Close\" : \"‚ûï Add Product\"}\r\n//         </button>\r\n//       </div>\r\n// <button\r\n//   style={styles.addButton}\r\n//   onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\r\n// >\r\n//   ‚¨á Export CSV\r\n// </button>\r\n\r\n// <label style={{ cursor: \"pointer\" }}>\r\n//   <input\r\n//     type=\"file\"\r\n//     accept=\".csv\"\r\n//     style={{ display: \"none\" }}\r\n//     onChange={async (e) => {\r\n//       try {\r\n//         const fd = new FormData();\r\n//         fd.append(\"file\", e.target.files[0]);\r\n//         await axios.post(`${API_URL}/import`, fd);\r\n//         alert(\"Imported successfully\");\r\n//         fetchItems();\r\n//       } catch (err) {\r\n//         alert(\"Import failed\");\r\n//       }\r\n//     }}\r\n//   />\r\n//   <span style={styles.addButton}>üì§ Import CSV</span>\r\n// </label>\r\n\r\n//       <div style={{ display: \"flex\", gap: 10, marginBottom: 12, flexWrap: \"wrap\" }}>\r\n//         <select\r\n//           value={filterCategory}\r\n//           onChange={(e) => setFilterCategory(e.target.value)}\r\n//           style={styles.select}\r\n//         >\r\n//           <option value=\"\">Filter by Category</option>\r\n//           {categories.map((c) => (\r\n//             <option key={c._id} value={c._id}>\r\n//               {c.name}\r\n//             </option>\r\n//           ))}\r\n//         </select>\r\n\r\n//         <select\r\n//           value={filterSubcategory}\r\n//           onChange={(e) => setFilterSubcategory(e.target.value)}\r\n//           disabled={!filterSubs.length}\r\n//           style={styles.select}\r\n//         >\r\n//           <option value=\"\">Filter by Subcategory</option>\r\n//           {filterSubs.map((s) => (\r\n//             <option key={s._id} value={s._id}>\r\n//               {s.name}\r\n//             </option>\r\n//           ))}\r\n//         </select>\r\n//       </div>\r\n\r\n//       {selectedItems.length > 0 && (\r\n//         <div style={styles.bulkBar}>\r\n//           {!bulkMode ? (\r\n//             <div style={{ display: \"flex\", gap: 8 }}>\r\n//               <button style={styles.btnDelete} onClick={handleBulkDelete}>\r\n//                 üóë Bulk Delete\r\n//               </button>\r\n//               <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\r\n//                 ‚úè Bulk Edit\r\n//               </button>\r\n//             </div>\r\n//           ) : (\r\n//             <div style={styles.bulkPanel}>\r\n//               <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\r\n\r\n//               {items\r\n//                 .filter((item) => selectedItems.includes(item._id))\r\n//                 .map((item) => (\r\n//                   <div key={item._id} style={styles.bulkItemBox}>\r\n//                     <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n\r\n//                     <div style={styles.formGrid}>\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Base Price</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.basePrice}\r\n//                           onChange={(e) => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))}\r\n//                           style={styles.input}\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Profit/Loss</label>\r\n//                         <input\r\n//                           type=\"number\"\r\n//                           value={item.profitLoss}\r\n//                           onChange={(e) => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value))}\r\n//                           style={styles.input}\r\n//                         />\r\n//                       </div>\r\n\r\n//                       <div style={styles.formGroup}>\r\n//                         <label style={styles.label}>Status</label>\r\n//                         <select\r\n//                           value={item.status}\r\n//                           onChange={(e) => updateLocalItemField(item._id, \"status\", e.target.value)}\r\n//                           style={styles.select}\r\n//                         >\r\n//                           <option value=\"active\">active</option>\r\n//                           <option value=\"inactive\">inactive</option>\r\n//                         </select>\r\n//                       </div>\r\n//                     </div>\r\n//                   </div>\r\n//                 ))}\r\n\r\n//               {/* <div style={{ display: \"flex\", gap: 10, marginTop: 12 }}>\r\n//                 <button style={styles.btnPrimary} onClick={handleBulkSave}>\r\n//                   ‚úî Save All\r\n//                 </button>\r\n//                 <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\r\n//                   ‚úñ Cancel\r\n//                 </button>\r\n//               </div> */}\r\n//               <div style={{ display: \"flex\", gap: 10, marginTop: 12, flexWrap: 'wrap' }}>\r\n\r\n//   <button style={styles.btnPrimary} onClick={handleBulkSave}>\r\n//     ‚úî Save All\r\n//   </button>\r\n\r\n//   <button\r\n//     style={styles.btnPrimary}\r\n//     onClick={async () => {\r\n//       if (!selectedItems.length) return alert(\"No items selected\");\r\n\r\n//       for (let id of selectedItems) await axios.post(`${API_URL}/copy/${id}`);\r\n\r\n//       alert(\"Selected copied\");\r\n//       fetchItems();\r\n//     }}\r\n//   >\r\n//     üìÑ Copy Selected\r\n//   </button>\r\n\r\n//   <button\r\n//     style={styles.btnPrimary}\r\n//     onClick={async () => {\r\n//       if (!selectedItems.length) return alert(\"No items selected\");\r\n\r\n//       const res = await axios.post(\r\n//         `${API_URL}/export-selected`,\r\n//         { ids: selectedItems },\r\n//         { responseType: \"blob\" }\r\n//       );\r\n\r\n//       const url = window.URL.createObjectURL(new Blob([res.data]));\r\n//       const a = document.createElement(\"a\");\r\n//       a.href = url;\r\n//       a.download = \"selected.csv\";\r\n//       a.click();\r\n//     }}\r\n//   >\r\n//     ‚¨á Export Selected\r\n//   </button>\r\n\r\n//   <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\r\n//     ‚úñ Cancel\r\n//   </button>\r\n// </div>\r\n\r\n//             </div>\r\n//           )}\r\n//         </div>\r\n//       )}\r\n\r\n//       {showForm && (\r\n//         <div style={styles.formCard}>\r\n//           <h2 style={styles.formTitle}>‚ûï Add / Edit Product</h2>\r\n\r\n//           <form onSubmit={handleSubmit}>\r\n//             <div style={styles.formGrid}>\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Product Name *</label>\r\n//                 <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Category *</label>\r\n//                 <select required name=\"category\" value={form.category} onChange={handleChange} style={styles.select}>\r\n//                   <option value=\"\">Select Category</option>\r\n//                   {categories.map((c) => (\r\n//                     <option value={c._id} key={c._id}>\r\n//                       {c.name}\r\n//                     </option>\r\n//                   ))}\r\n//                 </select>\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Subcategory</label>\r\n//                 <select\r\n//                   name=\"subcategory\"\r\n//                   value={form.subcategory}\r\n//                   onChange={handleChange}\r\n//                   disabled={!subcategories.length}\r\n//                   style={styles.select}\r\n//                 >\r\n//                   <option value=\"\">Select Subcategory</option>\r\n//                   {subcategories.map((s) => (\r\n//                     // <option value={s._id} key={s._id}>\r\n//                     //   {s.name}\r\n//                     // </option>\r\n//                     <option value={s._id}>{s.name}</option>\r\n\r\n//                   ))}\r\n//                 </select>\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Base Price *</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   required\r\n//                   name=\"basePrice\"\r\n//                   value={form.basePrice}\r\n//                   onChange={handleChange}\r\n//                   style={styles.input}\r\n//                 />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Profit/Loss</label>\r\n//                 <input\r\n//                   type=\"number\"\r\n//                   name=\"profitLoss\"\r\n//                   value={form.profitLoss}\r\n//                   onChange={handleChange}\r\n//                   style={styles.input}\r\n//                 />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Valid Till</label>\r\n//                 <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Image</label>\r\n//                 <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Status</label>\r\n//                 <select name=\"status\" value={form.status} onChange={handleChange} style={styles.select}>\r\n//                   <option value=\"active\">Active</option>\r\n//                   <option value=\"inactive\">Inactive</option>\r\n//                 </select>\r\n//               </div>\r\n//             </div>\r\n\r\n//             <div style={styles.formGroup}>\r\n//               <label style={styles.label}>Description</label>\r\n//               <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n//             </div>\r\n\r\n//             <div style={styles.formActions}>\r\n//               <button style={styles.btnPrimary} disabled={loading}>\r\n//                 {loading ? \"Saving...\" : editId ? \"Update Product\" : \"Add Product\"}\r\n//               </button>\r\n\r\n//               <button type=\"button\" style={styles.btnCancel} onClick={resetForm}>\r\n//                 Cancel\r\n//               </button>\r\n//             </div>\r\n//           </form>\r\n//         </div>\r\n//       )}\r\n  \r\n//       <div style={styles.tableCard}>\r\n//         <div style={styles.tableHeader}>\r\n//           <h2 style={styles.tableTitle}>Items</h2>\r\n//           <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n//         </div>\r\n\r\n//         <div style={styles.tableWrapper}>\r\n//           <table style={styles.table}>\r\n//             <thead>\r\n//               <tr>\r\n//                 <th style={styles.th}>\r\n//                   <input\r\n//                     type=\"checkbox\"\r\n//                     checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n//                     onChange={() => {\r\n//                       if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n//                       else setSelectedItems(filteredItems.map((x) => x._id));\r\n//                     }}\r\n//                   />\r\n//                 </th>\r\n//                 <th style={styles.th}>Sr</th>\r\n//                 <th style={styles.th}>Image</th>\r\n//                 <th style={styles.th}>Name</th>\r\n//                 <th style={styles.th}>Category</th>\r\n//                 <th style={styles.th}>Subcategory</th>\r\n//                 <th style={styles.th}>Base Price</th>\r\n//                 <th style={styles.th}>Profit/Loss</th>\r\n//                 <th style={styles.th}>Sale Price</th>\r\n//                 <th style={styles.th}>Price Lock</th>\r\n//                 <th style={styles.th}>Teji/Maddi</th>\r\n//                 <th style={styles.th}>Status</th>\r\n//                 <th style={styles.th}>Actions</th>\r\n//               </tr>\r\n//             </thead>\r\n\r\n//             <tbody>\r\n//               {currentItems.map((item, i) => (\r\n//                 <tr key={item._id} style={styles.tr}>\r\n//                   <td style={styles.td}>\r\n//                     <input\r\n//                       type=\"checkbox\"\r\n//                       checked={selectedItems.includes(item._id)}\r\n//                       onChange={() =>\r\n//                         setSelectedItems((prev) =>\r\n//                           prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]\r\n//                         )\r\n//                       }\r\n//                     />\r\n//                   </td>\r\n\r\n//                   <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n//                   <td style={styles.td}>\r\n//                     {item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}\r\n//                   </td>\r\n\r\n//                   <td style={styles.td}>{item.name}</td>\r\n//                   <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n//                   {/* <td style={styles.td}>{item.subcategory?.name || \"-\"}</td> */}\r\n//                   <td>{item.subcategory?.name || \"-\"}</td>\r\n\r\n\r\n//                   {/* BASE PRICE - Editable */}\r\n//                   <td style={styles.td}>\r\n//                     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         value={quickBasePrices[item._id] !== undefined ? quickBasePrices[item._id] : item.basePrice}\r\n//                         onChange={(e) => setQuickBasePrices((p) => ({ ...p, [item._id]: e.target.value }))}\r\n//                         style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\r\n//                       />\r\n//                       <button style={styles.btnSmall} onClick={() => updateBasePrice(item)}>\r\n//                         ‚úî\r\n//                       </button>\r\n//                     </div>\r\n//                     <small style={{ color: \"#28a745\", display: \"block\", marginTop: 4 }}>Saved: ‚Çπ{item.basePrice}</small>\r\n//                   </td>\r\n\r\n//                   {/* PROFIT/LOSS - Editable */}\r\n//                   <td style={styles.td}>\r\n//                     <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n//                       <input\r\n//                         type=\"number\"\r\n//                         placeholder=\"change\"\r\n//                         value={quickProfitLoss[item._id] ?? \"\"}\r\n//                         onChange={(e) => setQuickProfitLoss((p) => ({ ...p, [item._id]: e.target.value }))}\r\n//                         style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\r\n//                       />\r\n//                       <button style={styles.btnSmall} onClick={() => updateProfitLoss(item)}>\r\n//                         ‚úî\r\n//                       </button>\r\n//                     </div>\r\n//                     <small style={{ color: \"#666\", display: \"block\", marginTop: 4 }}>Current: {item.profitLoss}</small>\r\n//                   </td>\r\n\r\n//                   {/* SALE PRICE */}\r\n//                   <td style={styles.td}>‚Çπ{item.salePrice}</td>\r\n \r\n//                   {/* PRICE LOCK */}\r\n//                   <td style={styles.td}>‚Çπ{item.lockedPrice}</td>\r\n\r\n//                   {/* TEJI/MADDI */}\r\n//                   {/* <td style={styles.td}>\r\n//   {(() => {\r\n//     const teji = item.salePrice - item.lockedPrice;\r\n//     return (\r\n//       <span\r\n//         style={{\r\n//           color: teji >= 0 ? \"#28a745\" : \"#dc3545\",\r\n//           fontWeight: \"600\",\r\n//         }}\r\n//       >\r\n//         {teji >= 0 ? \"‚ñ≤\" : \"‚ñº\"} {Math.abs(teji)}\r\n//       </span>\r\n//     );\r\n//   })()}\r\n// </td> */}\r\n// <td style={styles.td}>\r\n//   {item.lockedPrice === 0 ? (\r\n//     <span style={{ color: \"#6c757d\", fontWeight: \"600\" }}>0</span>\r\n//   ) : (\r\n//     (() => {\r\n//       const teji = item.salePrice - item.lockedPrice;\r\n//       return (\r\n//         <span\r\n//           style={{\r\n//             color: teji >= 0 ? \"#28a745\" : \"#dc3545\",\r\n//             fontWeight: \"600\",\r\n//           }}\r\n//         >\r\n//           {teji >= 0 ? \"‚ñ≤\" : \"‚ñº\"} {Math.abs(teji)}\r\n//         </span>\r\n//       );\r\n//     })()\r\n//   )}\r\n// </td>\r\n\r\n\r\n//                   {/* STATUS */}\r\n//                   <td style={styles.td}>\r\n//                     <button\r\n//                       style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\r\n//                       onClick={() => handleStatusToggle(item)}\r\n//                     >\r\n//                       {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n//                     </button>\r\n//                   </td>\r\n\r\n//                   {/* ACTIONS */}\r\n//                   <td style={styles.td}>\r\n//                     <div style={{ position: \"relative\" }}>\r\n//                       <button\r\n//                         style={styles.menuButton}\r\n//                         onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\r\n//                       >\r\n//                         ‚ãÆ\r\n//                       </button>\r\n\r\n//                       {activeMenu === item._id && (\r\n//                         <div style={styles.dropdown}>\r\n//                           {/* <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\r\n//                             ‚úè Edit\r\n//                           </button>\r\n//                           <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\r\n//                             üóë Delete\r\n//                           </button> */}\r\n//                           <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\r\n//   ‚úè Edit\r\n// </button>\r\n\r\n// <button\r\n//   style={styles.dropdownItem}\r\n//   onClick={async () => {\r\n//     await axios.post(`${API_URL}/copy/${item._id}`);\r\n//     alert(\"Copied successfully\");\r\n//     fetchItems();\r\n//   }}\r\n// >\r\n//   üìÑ Copy\r\n// </button>\r\n\r\n// <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\r\n//   üóë Delete\r\n// </button>\r\n\r\n//                         </div>\r\n//                       )}\r\n//                     </div>\r\n//                   </td>\r\n//                 </tr>\r\n//               ))}\r\n//             </tbody>\r\n//           </table>\r\n//         </div>\r\n\r\n//         <div style={styles.pagination}>\r\n//           <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n//             Previous\r\n//           </button>\r\n\r\n//           {Array.from({ length: totalPages }, (_, i) => (\r\n//             <button\r\n//               key={i}\r\n//               style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\r\n//               onClick={() => setCurrentPage(i + 1)}\r\n//             >\r\n//               {i + 1}\r\n//             </button>\r\n//           ))}\r\n\r\n//           <button\r\n//             style={styles.paginationBtn}\r\n//             disabled={currentPage === totalPages}\r\n//             onClick={() => setCurrentPage((p) => p + 1)}\r\n//           >\r\n//             Next\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n\r\n//       {showModal && (\r\n//         <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\r\n//           <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n//             <h2 style={styles.modalTitle}>‚úè Edit Product</h2>\r\n\r\n//             <form onSubmit={handleSubmit}>\r\n//               <div style={styles.formGrid}>\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Product Name *</label>\r\n//                   <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Category *</label>\r\n//                   <select required name=\"category\" value={form.category} onChange={handleChange} style={styles.select}>\r\n//                     <option value=\"\">Select Category</option>\r\n//                     {categories.map((c) => (\r\n//                       <option value={c._id} key={c._id}>\r\n//                         {c.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Subcategory</label>\r\n//                   <select\r\n//                     name=\"subcategory\"\r\n//                     value={form.subcategory}\r\n//                     onChange={handleChange}\r\n//                     disabled={!subcategories.length}\r\n//                     style={styles.select}\r\n//                   >\r\n//                     <option value=\"\">Select Subcategory</option>\r\n//                     {subcategories.map((s) => (\r\n//                       <option value={s._id} key={s._id}>\r\n//                         {s.name}\r\n//                       </option>\r\n//                     ))}\r\n//                   </select>\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Base Price *</label>\r\n//                   <input\r\n//                     type=\"number\"\r\n//                     required\r\n//                     name=\"basePrice\"\r\n//                     value={form.basePrice}\r\n//                     onChange={handleChange}\r\n//                     style={styles.input}\r\n//                   />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Profit/Loss</label>\r\n//                   <input\r\n//                     type=\"number\"\r\n//                     name=\"profitLoss\"\r\n//                     value={form.profitLoss}\r\n//                     onChange={handleChange}\r\n//                     style={styles.input}\r\n//                   />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Valid Till</label>\r\n//                   <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Image</label>\r\n//                   <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n//                 </div>\r\n\r\n//                 <div style={styles.formGroup}>\r\n//                   <label style={styles.label}>Status</label>\r\n//                   <select name=\"status\" value={form.status} onChange={handleChange} style={styles.select}>\r\n//                     <option value=\"active\">Active</option>\r\n//                     <option value=\"inactive\">Inactive</option>\r\n//                   </select>\r\n//                 </div>\r\n//               </div>\r\n\r\n//               <div style={styles.formGroup}>\r\n//                 <label style={styles.label}>Description</label>\r\n//                 <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n//               </div>\r\n\r\n//               <div style={styles.formActions}>\r\n//                 <button style={styles.btnPrimary} disabled={loading}>\r\n//                   {loading ? \"Saving...\" : \"Update\"}\r\n//                 </button>\r\n\r\n//                 <button type=\"button\" style={styles.btnCancel} onClick={resetForm}>\r\n//                   Cancel\r\n//                 </button>\r\n//               </div>\r\n//             </form>\r\n//           </div>\r\n//         </div>\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// const styles = {\r\n//   container: { padding: 16, fontFamily: \"Arial, sans-serif\" },\r\n//   header: { marginBottom: 8 },\r\n//   title: {\r\n//     fontSize: \"24px\",\r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//     marginBottom: \"8px\",\r\n//   },\r\n//   searchInput: {\r\n//     flex: \"1\",\r\n//     minWidth: \"250px\",\r\n//     padding: \"10px 12px\",\r\n//     borderRadius: \"10px\",\r\n//     border: \"1px solid #ced4da\",\r\n//     background: \"#f9fbfc\",\r\n//     fontSize: \"14px\",\r\n//     outline: \"none\",\r\n//   },\r\n//   addButton: {\r\n//     background: \"#007bff\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"10px 16px\",\r\n//     fontSize: \"14px\",\r\n//     cursor: \"pointer\",\r\n//     fontWeight: \"600\",\r\n//   },\r\n//   select: {\r\n//     padding: \"8px 12px\",\r\n//     borderRadius: \"8px\",\r\n//     border: \"1px solid #cfd6e0\",\r\n//     background: \"#f8fafc\",\r\n//     fontSize: \"13px\",\r\n//     minWidth: \"150px\",\r\n//   },\r\n//   bulkBar: {\r\n//     background: \"#e9f2ff\",\r\n//     border: \"1px solid #c4d9ff\",\r\n//     borderRadius: \"10px\",\r\n//     padding: \"12px\",\r\n//     marginBottom: \"12px\",\r\n//   },\r\n//   bulkPanel: {\r\n//     width: \"100%\",\r\n//     background: \"#f7faff\",\r\n//     border: \"1px solid #cfe2ff\",\r\n//     padding: \"12px\",\r\n//     borderRadius: \"10px\",\r\n//   },\r\n//   bulkPanelTitle: {\r\n//     textAlign: \"center\",\r\n//     fontSize: \"16px\",\r\n//     fontWeight: \"700\",\r\n//     marginBottom: \"10px\",\r\n//     color: \"#0d3b66\",\r\n//   },\r\n//   bulkItemBox: {\r\n//     background: \"#fff\",\r\n//     border: \"1px solid #dbe5f5\",\r\n//     padding: \"12px\",\r\n//     borderRadius: \"8px\",\r\n//     marginBottom: \"10px\",\r\n//   },\r\n//   bulkItemTitle: {\r\n//     fontSize: \"14px\",\r\n//     fontWeight: \"600\",\r\n//     marginBottom: \"8px\",\r\n//     color: \"#233142\",\r\n//   },\r\n//   formCard: {\r\n//     borderRadius: \"12px\",\r\n//     padding: \"20px\",\r\n//     marginBottom: \"18px\",\r\n//     background: \"#ffffff\",\r\n//     border: \"1px solid #eef2f7\",\r\n//     boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\r\n//   },\r\n//   formTitle: { \r\n//     fontSize: \"18px\", \r\n//     fontWeight: \"700\", \r\n//     marginBottom: 16,\r\n//     color: \"#0d3b66\",\r\n//   },\r\n//   formGrid: {\r\n//     display: \"grid\",\r\n//     gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\r\n//     gap: \"12px\",\r\n//   },\r\n//   formGroup: { \r\n//     display: \"flex\", \r\n//     flexDirection: \"column\", \r\n//     gap: \"6px\" \r\n//   },\r\n//   label: { \r\n//     fontWeight: \"600\", \r\n//     fontSize: \"13px\", \r\n//     color: \"#233142\" \r\n//   },\r\n//   input: {\r\n//     padding: \"10px\",\r\n//     borderRadius: \"8px\",\r\n//     border: \"1px solid #cfd6e0\",\r\n//     background: \"#f8fafc\",\r\n//     fontSize: \"13px\",\r\n//     outline: \"none\",\r\n//   },\r\n//   textarea: {\r\n//     padding: \"10px\",\r\n//     borderRadius: \"8px\",\r\n//     border: \"1px solid #cfd6e0\",\r\n//     background: \"#f8fafc\",\r\n//     minHeight: 80,\r\n//     fontSize: \"13px\",\r\n//     outline: \"none\",\r\n//     resize: \"vertical\",\r\n//   },\r\n//   fileInput: { \r\n//     padding: \"6px\",\r\n//     fontSize: \"13px\",\r\n//   },\r\n//   formActions: { \r\n//     marginTop: 16, \r\n//     display: \"flex\", \r\n//     gap: 10 \r\n//   },\r\n//   btnPrimary: {\r\n//     background: \"#007bff\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"8px\",\r\n//     padding: \"10px 20px\",\r\n//     cursor: \"pointer\",\r\n//     fontWeight: \"600\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   btnSmall: {\r\n//     background: \"#28a745\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"6px\",\r\n//     padding: \"6px 12px\",\r\n//     cursor: \"pointer\",\r\n//     fontSize: \"12px\",\r\n//     fontWeight: \"600\",\r\n//   },\r\n//   btnDelete: {\r\n//     background: \"#dc3545\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"8px\",\r\n//     padding: \"8px 14px\",\r\n//     cursor: \"pointer\",\r\n//     fontWeight: \"600\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   btnCancel: {\r\n//     background: \"#6c757d\",\r\n//     color: \"#fff\",\r\n//     border: \"none\",\r\n//     borderRadius: \"8px\",\r\n//     padding: \"10px 20px\",\r\n//     cursor: \"pointer\",\r\n//     fontWeight: \"600\",\r\n//     fontSize: \"14px\",\r\n//   },\r\n//   tableCard: { \r\n//     marginTop: 16,\r\n//     background: \"#fff\",\r\n//     borderRadius: \"12px\",\r\n//     padding: \"16px\",\r\n//     border: \"1px solid #eef2f7\",\r\n//     boxShadow: \"0 2px 8px rgba(0,0,0,0.05)\",\r\n//   },\r\n//   tableHeader: { \r\n//     display: \"flex\", \r\n//     justifyContent: \"space-between\", \r\n//     marginBottom: 12,\r\n//     alignItems: \"center\",\r\n//   },\r\n//   tableTitle: { \r\n//     fontSize: \"18px\", \r\n//     fontWeight: \"700\",\r\n//     color: \"#0d3b66\",\r\n//   },\r\n//   totalCount: { \r\n//     fontSize: \"14px\", \r\n//     color: \"#6c757d\", \r\n//     fontWeight: \"600\" \r\n//   },\r\n//   tableWrapper: { \r\n//     overflowX: \"auto\",\r\n//     border: \"1px solid #e9ecef\",\r\n//     borderRadius: \"8px\",\r\n//   },\r\n//   table: { \r\n//     width: \"100%\", \r\n//     borderCollapse: \"collapse\", \r\n//     fontSize: \"13px\" \r\n//   },\r\n//   th: { \r\n//     background: \"#f8f9fa\", \r\n//     padding: \"12px 10px\", \r\n//     fontWeight: \"700\", \r\n//     color: \"#0d3b66\", \r\n//     textAlign: \"left\",\r\n//     borderBottom: \"2px solid #dee2e6\",\r\n//     whiteSpace: \"nowrap\",\r\n//   },\r\n//   tr: { \r\n//     borderBottom: \"1px solid #edf2f7\",\r\n//     transition: \"background 0.2s\",\r\n//   },\r\n//   td: { \r\n//     padding: \"12px 10px\", \r\n//     whiteSpace: \"nowrap\", \r\n//     verticalAlign: \"middle\" \r\n//   },\r\n//   tableImg: { \r\n//     width: \"50px\", \r\n//     height: \"50px\", \r\n//     borderRadius: \"6px\", \r\n//     objectFit: \"cover\" \r\n//   },\r\n//   statusActive: { \r\n//     background: \"#d4edda\", \r\n//     padding: \"6px 12px\", \r\n//     borderRadius: \"6px\", \r\n//     color: \"#155724\", \r\n//     fontWeight: \"600\", \r\n//     border: \"1px solid #c3e6cb\", \r\n//     cursor: \"pointer\",\r\n//     fontSize: \"12px\",\r\n//   },\r\n//   statusInactive: { \r\n//     background: \"#f8d7da\", \r\n//     padding: \"6px 12px\", \r\n//     borderRadius: \"6px\", \r\n//     color: \"#721c24\", \r\n//     fontWeight: \"600\", \r\n//     border: \"1px solid #f5c6cb\", \r\n//     cursor: \"pointer\",\r\n//     fontSize: \"12px\",\r\n//   },\r\n//   menuButton: { \r\n//     background: \"#f0f0f0\", \r\n//     border: \"1px solid #ddd\", \r\n//     borderRadius: \"6px\", \r\n//     padding: \"6px 10px\", \r\n//     fontSize: \"16px\", \r\n//     cursor: \"pointer\",\r\n//     fontWeight: \"700\",\r\n//   },\r\n//   dropdown: { \r\n//     position: \"absolute\", \r\n//     right: 0, \r\n//     top: 36, \r\n//     background: \"#fff\", \r\n//     border: \"1px solid #ddd\", \r\n//     borderRadius: 8, \r\n//     zIndex: 100, \r\n//     minWidth: 140,\r\n//     boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\",\r\n//   },\r\n//   dropdownItem: { \r\n//     display: \"block\", \r\n//     width: \"100%\", \r\n//     padding: \"10px 14px\", \r\n//     background: \"transparent\", \r\n//     border: \"none\", \r\n//     textAlign: \"left\", \r\n//     cursor: \"pointer\", \r\n//     fontSize: 13, \r\n//     fontWeight: 500,\r\n//     transition: \"background 0.2s\",\r\n//   },\r\n//   dropdownItemDelete: { \r\n//     display: \"block\", \r\n//     width: \"100%\", \r\n//     padding: \"10px 14px\", \r\n//     background: \"transparent\", \r\n//     border: \"none\", \r\n//     textAlign: \"left\", \r\n//     cursor: \"pointer\", \r\n//     fontSize: 13, \r\n//     fontWeight: 500, \r\n//     color: \"#dc3545\",\r\n//     transition: \"background 0.2s\",\r\n//   },\r\n//   pagination: { \r\n//     marginTop: 16, \r\n//     display: \"flex\", \r\n//     justifyContent: \"center\", \r\n//     gap: 8,\r\n//     flexWrap: \"wrap\",\r\n//   },\r\n//   paginationBtn: { \r\n//     padding: \"8px 12px\", \r\n//     borderRadius: 6, \r\n//     background: \"#fff\", \r\n//     border: \"1px solid #dee2e6\", \r\n//     cursor: \"pointer\",\r\n//     fontSize: \"13px\",\r\n//     fontWeight: \"500\",\r\n//   },\r\n//   paginationBtnActive: { \r\n//     padding: \"8px 12px\", \r\n//     borderRadius: 6, \r\n//     background: \"#007bff\", \r\n//     color: \"white\", \r\n//     border: \"1px solid #007bff\", \r\n//     cursor: \"pointer\",\r\n//     fontSize: \"13px\",\r\n//     fontWeight: \"600\",\r\n//   },\r\n//   modalOverlay: { \r\n//     position: \"fixed\", \r\n//     top: 0, \r\n//     left: 0, \r\n//     right: 0, \r\n//     bottom: 0, \r\n//     background: \"rgba(0,0,0,0.5)\", \r\n//     display: \"flex\", \r\n//     justifyContent: \"center\", \r\n//     alignItems: \"center\", \r\n//     zIndex: 1000, \r\n//     padding: 20 \r\n//   },\r\n//   modal: { \r\n//     background: \"#fff\", \r\n//     borderRadius: 12, \r\n//     padding: 24, \r\n//     maxWidth: 700, \r\n//     width: \"100%\", \r\n//     maxHeight: \"90vh\", \r\n//     overflowY: \"auto\",\r\n//     boxShadow: \"0 8px 32px rgba(0,0,0,0.2)\",\r\n//   },\r\n//   modalTitle: { \r\n//     fontSize: 20, \r\n//     fontWeight: \"700\", \r\n//     color: \"#0d3b66\", \r\n//     marginBottom: 16, \r\n//     textAlign: \"center\" \r\n//   },\r\n// }\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./PriceList.css\"\r\nconst API_URL = \"https://grocerrybackend.onrender.com/api/prices\";\r\nconst CATEGORY_URL = \"https://grocerrybackend.onrender.com/api/categories\";\r\n\r\nexport default function PriceList() {\r\n  const [items, setItems] = useState([]);\r\n  const [categories, setCategories] = useState([]);\r\n  const [subcategories, setSubcategories] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    category: \"\",\r\n    subcategory: \"\",\r\n    description: \"\",\r\n    basePrice: \"\",\r\n    profitLoss: \"\",\r\n    validTill: \"\",\r\n    file: null,\r\n    status: \"inactive\",\r\n  });\r\n\r\n  const [editId, setEditId] = useState(null);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [activeMenu, setActiveMenu] = useState(null);\r\n\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [bulkMode, setBulkMode] = useState(false);\r\n\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const itemsPerPage = 30;\r\n\r\n  const [filterCategory, setFilterCategory] = useState(\"\");\r\n  const [filterSubcategory, setFilterSubcategory] = useState(\"\");\r\n  const [filterSubs, setFilterSubs] = useState([]);\r\n\r\n  // Quick edit states for inline editing\r\n  const [quickBasePrices, setQuickBasePrices] = useState({});\r\n  const [quickProfitLoss, setQuickProfitLoss] = useState({});\r\n\r\n  // NEW: sort state\r\n  const [sortOrder, setSortOrder] = useState(\"\");\r\n  const [showCategoryModal, setShowCategoryModal] = useState(false);\r\nconst [newCategoryName, setNewCategoryName] = useState(\"\");\r\nconst [categoryLoading, setCategoryLoading] = useState(false);\r\nconst [alertBox, setAlertBox] = useState({\r\n  show: false,\r\n  message: \"\",\r\n  type: \"success\", // success | error | warning\r\n});\r\n\r\n\r\nuseEffect(() => {\r\n  if (alertBox.show) {\r\n    const timer = setTimeout(() => {\r\n      setAlertBox((prev) => ({ ...prev, show: false }));\r\n    }, 2500);\r\n\r\n    return () => clearTimeout(timer);\r\n  }\r\n}, [alertBox.show]);\r\n\r\n  useEffect(() => {\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (categories.length > 0) fetchItems();\r\n  }, [categories]);\r\n\r\n  useEffect(() => {\r\n    if (!filterCategory) {\r\n      setFilterSubs([]);\r\n      setFilterSubcategory(\"\");\r\n      return;\r\n    }\r\n    const cat = categories.find((c) => c._id === filterCategory);\r\n    setFilterSubs(cat?.subcategories || []);\r\n    setFilterSubcategory(\"\");\r\n  }, [filterCategory, categories]);\r\n\r\n  useEffect(() => {\r\n    if (!form.category) {\r\n      setSubcategories([]);\r\n      setForm((prev) => ({ ...prev, subcategory: \"\" }));\r\n      return;\r\n    }\r\n    const cat = categories.find((c) => c._id === form.category);\r\n    setSubcategories(cat?.subcategories || []);\r\n  }, [form.category, categories]);\r\n\r\n  const fetchCategories = async () => {\r\n    try {\r\n      const res = await axios.get(CATEGORY_URL);\r\n      if (res.data?.success) setCategories(res.data.categories || []);\r\n    } catch (err) {\r\n      console.error(\"Fetch categories error\", err);\r\n      alert(\"Could not fetch categories\");\r\n    }\r\n  };\r\n\r\n  const fetchItems = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.get(API_URL);\r\n      if (res.data?.success) {\r\n        const raw = res.data.data || [];\r\n\r\n        const enriched = raw.map((item) => {\r\n          // normalize category/subcategory\r\n          const catObj = categories.find((c) => c._id === (item.category?._id || item.category));\r\n          let subObj = null;\r\n\r\n          if (catObj?.subcategories && item.subcategory) {\r\n            // item.subcategory may be an object with id or an id string\r\n            const subId = item.subcategory?.id || item.subcategory?._id || item.subcategory;\r\n            subObj = catObj.subcategories.find((s) => s._id === subId) || null;\r\n          }\r\n\r\n          return {\r\n            ...item,\r\n            // ensure numeric fields aren't undefined\r\n            basePrice: Number(item.basePrice || 0),\r\n            profitLoss: Number(item.profitLoss || 0),\r\n            salePrice: Number(item.salePrice || 0),\r\n            lockedPrice: Number(item.lockedPrice || 0),\r\n            yesterdayLock: Number(item.yesterdayLock || 0),\r\n            brokerDisplay: Number(item.brokerDisplay || 0),\r\n            category: catObj ? { _id: catObj._id, name: catObj.name } : (item.category || null),\r\n            subcategory: subObj\r\n              ? { _id: subObj._id, name: subObj.name }\r\n              : item.subcategory?.id\r\n              ? { _id: item.subcategory.id, name: item.subcategory.name }\r\n              : item.subcategory || null,\r\n          };\r\n        });\r\n\r\n        // setItems(enriched);\r\n        setItems(\r\n  enriched.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))\r\n);\r\n\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Fetch items error\", err);\r\n      alert(\"Could not fetch items\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value, files } = e.target;\r\n    if (files?.length) {\r\n      setForm((p) => ({ ...p, file: files[0] }));\r\n    } else {\r\n      setForm((p) => ({ ...p, [name]: value }));\r\n    }\r\n  };\r\n\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault();\r\n//     setLoading(true);\r\n\r\n//     try {\r\n//       // üõë Duplicate product name check\r\n// const nameExists = items.some(\r\n//   (p) =>\r\n//     p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\r\n//     p._id !== editId\r\n// );\r\n\r\n// if (nameExists) {\r\n//   alert(\"‚ùå Product name already exists!\");\r\n//   setLoading(false);\r\n//   return;\r\n// }\r\nconst handleSubmit = async (e) => {\r\n  e.preventDefault();\r\n  setLoading(true);\r\n\r\n  // üõë Duplicate product name check (PASTE HERE)\r\n  const nameExists = items.some(\r\n    (p) =>\r\n      p.name.trim().toLowerCase() === form.name.trim().toLowerCase() &&\r\n      p._id !== editId\r\n  );\r\n\r\n  if (nameExists) {\r\n    // alert(\"‚ùå Product name already exists!\");\r\n    setAlertBox({\r\n  show: true,\r\n  message: \"‚ùå Product name already exists!\",\r\n  type: \"error\",\r\n});\r\n\r\n    setLoading(false);\r\n    return;\r\n  }\r\n\r\n  try {\r\n      \r\n\r\n      if (!form.name || !form.category || !form.basePrice) {\r\n        alert(\"Name, category & base price are required\");\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      const fd = new FormData();\r\n      fd.append(\"name\", form.name.trim());\r\n      fd.append(\"category\", form.category);\r\n\r\n      // if (form.subcategory) {\r\n      //   const sub = subcategories.find((s) => s._id === form.subcategory);\r\n      //   if (sub) {\r\n      //     fd.append(\"subcategory[id]\", sub._id);\r\n      //     fd.append(\"subcategory[name]\", sub.name);\r\n      //     fd.append(\"subcategory[image]\", sub.image || \"\");\r\n      //   }\r\n      // }\r\nif (form.subcategory) {\r\n  const sub = subcategories.find((s) => s._id === form.subcategory);\r\n  if (sub) {\r\n    fd.append(\r\n      \"subcategory\",\r\n      JSON.stringify({\r\n        id: sub._id,\r\n        name: sub.name,\r\n        image: sub.image || \"\"\r\n      })\r\n    );\r\n  }\r\n} else {\r\n  fd.append(\"subcategory\", JSON.stringify(null));\r\n}\r\n\r\n      fd.append(\"basePrice\", form.basePrice);\r\n      fd.append(\"profitLoss\", form.profitLoss || 0);\r\n      if (form.description) fd.append(\"description\", form.description);\r\n      if (form.validTill) fd.append(\"validTill\", form.validTill);\r\n      fd.append(\"status\", form.status);\r\n      if (form.file) fd.append(\"file\", form.file);\r\n\r\n      if (editId) {\r\n        await axios.put(`${API_URL}/${editId}`, fd);\r\n        // alert(\"Updated successfully\");\r\n        setAlertBox({\r\n  show: true,\r\n  message: \"‚úÖ Product Update successfully\",\r\n  type: \"success\",\r\n});\r\n\r\n      } else {\r\n        await axios.post(API_URL, fd);\r\n        // alert(\"Added successfully\");\r\n        setAlertBox({\r\n  show: true,\r\n  message: \"‚úÖ Product added successfully\",\r\n  type: \"success\",\r\n});\r\n\r\n      }\r\n\r\n      await fetchItems();\r\n      resetForm();\r\n    } catch (err) {\r\n      console.error(\"Save error\", err);\r\n      if (err.response?.data?.message === \"Product name already exists\") {\r\n        alert(\"‚ùå Product name already exists!\");\r\n      } else {\r\n        alert(\"Save failed!\");\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const resetForm = () => {\r\n    setForm({\r\n      name: \"\",\r\n      category: \"\",\r\n      subcategory: \"\",\r\n      description: \"\",\r\n      basePrice: \"\",\r\n      profitLoss: \"\",\r\n      validTill: \"\",\r\n      file: null,\r\n      status: \"inactive\",\r\n    });\r\n    setEditId(null);\r\n    setShowModal(false);\r\n    setShowForm(false);\r\n  };\r\nconst handleAddCategory = async () => {\r\n  if (!newCategoryName.trim()) {\r\n    return alert(\"Category name is required\");\r\n  }\r\n\r\n  try {\r\n    setCategoryLoading(true);\r\n\r\n    const res = await axios.post(CATEGORY_URL, {\r\n      name: newCategoryName.trim(),\r\n    });\r\n\r\n    if (res.data?.success) {\r\n      // alert(\"‚úÖ Category added successfully\");\r\n      setAlertBox({\r\n  show: true,\r\n  message: \"‚úÖ Category added successfully\",\r\n  type: \"success\",\r\n});\r\n\r\n      setNewCategoryName(\"\");\r\n      setShowCategoryModal(false);\r\n      await fetchCategories(); // ‚úÖ dropdown auto refresh\r\n    } else {\r\n      alert(\"‚ùå Category add failed\");\r\n\r\n    }\r\n  } catch (err) {\r\n    console.error(\"Add category error\", err);\r\n    alert(\"‚ùå Error while adding category\");\r\n  } finally {\r\n    setCategoryLoading(false);\r\n  }\r\n};\r\n\r\n  const handleEdit = (item) => {\r\n    setForm({\r\n      name: item.name || \"\",\r\n      category: item.category?._id?.toString() || \"\",\r\n      subcategory: item.subcategory?._id || \"\",\r\n      description: item.description || \"\",\r\n      basePrice: item.basePrice || \"\",\r\n      profitLoss: item.profitLoss || 0,\r\n      validTill: item.validTill ? item.validTill.split(\"T\")[0] : \"\",\r\n      file: null,\r\n      status: item.status || \"inactive\",\r\n    });\r\n\r\n    const cat = categories.find((c) => c._id === item.category?._id);\r\n    setSubcategories(cat?.subcategories || []);\r\n\r\n    setEditId(item._id);\r\n    setShowModal(true);\r\n    setActiveMenu(null);\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete this item?\")) return;\r\n    try {\r\n      await axios.delete(`${API_URL}/${id}`);\r\n      setItems((prev) => prev.filter((x) => x._id !== id));\r\n      setSelectedItems((prev) => prev.filter((x) => x !== id));\r\n      setActiveMenu(null);\r\n    } catch (err) {\r\n      console.error(\"Delete error\", err);\r\n      // alert(\"Delete failed\");\r\n      setAlertBox({\r\n  show: true,\r\n  message: \"‚ùå Delete failed\",\r\n  type: \"error\",\r\n});\r\n\r\n    }\r\n  };\r\n\r\n  const handleStatusToggle = async (item) => {\r\n    try {\r\n      const newStatus = item.status === \"active\" ? \"inactive\" : \"active\";\r\n      await axios.put(`${API_URL}/status/${item._id}`, { status: newStatus });\r\n      setItems((prev) => prev.map((x) => (x._id === item._id ? { ...x, status: newStatus } : x)));\r\n    } catch (err) {\r\n      console.error(\"Status toggle error\", err);\r\n      alert(\"Status update failed\");\r\n    }\r\n  };\r\n\r\n  const updateLocalItemField = (id, key, value) => {\r\n    setItems((prev) => prev.map((x) => (x._id === id ? { ...x, [key]: value } : x)));\r\n  };\r\n\r\n  const handleBulkSave = async () => {\r\n    if (!selectedItems.length) return alert(\"No items selected\");\r\n\r\n    const updates = items\r\n      .filter((x) => selectedItems.includes(x._id))\r\n      .map((x) => ({\r\n        id: x._id,\r\n        basePrice: Number(x.basePrice),\r\n        profitLoss: Number(x.profitLoss),\r\n        status: x.status,\r\n      }));\r\n\r\n    try {\r\n      await axios.post(`${API_URL}/bulk-update`, { products: updates });\r\n      // alert(\"Bulk save successful\");\r\n      setAlertBox({\r\n  show: true,\r\n  message: \"‚úÖ Bulk Save successfully\",\r\n  type: \"success\",\r\n});\r\n\r\n      setBulkMode(false);\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n    } catch (err) {\r\n      console.error(\"Bulk save error\", err);\r\n      // alert(\"Bulk save failed\");\r\n      setAlertBox({\r\n  show: true,\r\n  message: \"‚ùå Bulk Save failed\",\r\n  type: \"error\",\r\n});\r\n\r\n    }\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (!selectedItems.length) return alert(\"No items selected\");\r\n    if (!window.confirm(\"Delete selected items?\")) return;\r\n\r\n    try {\r\n      await Promise.all(selectedItems.map((id) => axios.delete(`${API_URL}/${id}`)));\r\n      setSelectedItems([]);\r\n      fetchItems();\r\n      setBulkMode(false);\r\n    } catch (err) {\r\n      console.error(\"Bulk delete error\", err);\r\n      // alert(\"Bulk delete failed\");\r\n      setAlertBox({\r\n  show: true,\r\n  message: \"‚ùå Bulk Delete failed\",\r\n  type: \"error\",\r\n});\r\n\r\n    }\r\n  };\r\n\r\n  // Update Base Price inline\r\n  const updateBasePrice = async (item) => {\r\n    const newBase = Number(quickBasePrices[item._id] ?? item.basePrice);\r\n    if (isNaN(newBase)) return alert(\"Invalid Base Price\");\r\n\r\n    try {\r\n      setLoading(true);\r\n      const fd = new FormData();\r\n      fd.append(\"name\", item.name);\r\n      fd.append(\"category\", item.category?._id);\r\n      if (item.subcategory?.id) fd.append(\"subcategory\", item.subcategory.id);\r\n      fd.append(\"description\", item.description || \"\");\r\n      fd.append(\"basePrice\", newBase);\r\n      fd.append(\"profitLoss\", item.profitLoss);\r\n      fd.append(\"status\", item.status);\r\n\r\n      const res = await axios.put(`${API_URL}/${item._id}`, fd);\r\n      if (res.data.success) {\r\n        await fetchItems();\r\n        setQuickBasePrices((p) => ({ ...p, [item._id]: undefined }));\r\n        // alert(\"Base price updated\");\r\n        setAlertBox({\r\n  show: true,\r\n  message: \"‚úÖ Baseprice updated successfully\",\r\n  type: \"success\",\r\n});\r\n\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      // alert(\"Update failed\");\r\n      setAlertBox({\r\n  show: true,\r\n  message: \"‚ùå Update failed\",\r\n  type: \"error\",\r\n});\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Update Profit/Loss inline using updateDiff\r\n  const updateProfitLoss = async (item) => {\r\n    const diff = Number(quickProfitLoss[item._id] ?? 0);\r\n    if (isNaN(diff)) return alert(\"Invalid Profit/Loss\");\r\n\r\n    try {\r\n      setLoading(true);\r\n      const res = await axios.put(`${API_URL}/updateDiff/${item._id}`, { diff });\r\n      if (res.data.success) {\r\n        await fetchItems();\r\n        setQuickProfitLoss((p) => ({ ...p, [item._id]: undefined }));\r\n        // alert(\"Profit/Loss updated\");\r\n        setAlertBox({\r\n  show: true,\r\n  message: \"‚úÖ Pofit/Loss Updated\",\r\n  type: \"success\",\r\n});\r\n\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      // alert(\"Update failed\");\r\n      setAlertBox({\r\n  show: true,\r\n  message: \"‚ùå Update failed\",\r\n  type: \"error\",\r\n});\r\n\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filtering\r\n  const filteredItems = items.filter((item) => {\r\n    const t = search.toLowerCase();\r\n    const matchText =\r\n      (item.name || \"\").toLowerCase().includes(t) ||\r\n      (item.category?.name || \"\").toLowerCase().includes(t) ||\r\n      (item.subcategory?.name || \"\").toLowerCase().includes(t);\r\n\r\n    const matchCategory = !filterCategory || item.category?._id === filterCategory;\r\n    const matchSub = !filterSubcategory || item.subcategory?._id === filterSubcategory;\r\n\r\n    return matchText && matchCategory && matchSub;\r\n  });\r\n\r\n  // NEW: SORTING\r\n  let sortedItems = [...filteredItems];\r\n  if (sortOrder === \"low\") {\r\n    sortedItems.sort((a, b) => (Number(a.salePrice) || 0) - (Number(b.salePrice) || 0));\r\n  } else if (sortOrder === \"high\") {\r\n    sortedItems.sort((a, b) => (Number(b.salePrice) || 0) - (Number(a.salePrice) || 0));\r\n  }\r\n\r\n  const indexOfLast = currentPage * itemsPerPage;\r\n  const currentItems = sortedItems.slice(indexOfLast - itemsPerPage, indexOfLast);\r\n  const totalPages = Math.max(1, Math.ceil(sortedItems.length / itemsPerPage));\r\n\r\n  return (\r\n    <div className=\"container\" style={styles.container}>\r\n      <div style={styles.header}>\r\n        <h1 style={styles.title}>Product Management</h1>\r\n      </div>\r\n\r\n      {/* <div style={{ marginBottom: 12, display: \"flex\", gap: 12, flexWrap: \"wrap\", alignItems: \"center\" }}  className=\"top-bar\" > */}\r\n\r\n<div className=\"top-bar\">\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search product, category or subcategory...\"\r\n          value={search}\r\n          onChange={(e) => {\r\n            setSearch(e.target.value);\r\n            setCurrentPage(1);\r\n          }}\r\n          style={styles.searchInput}\r\n        />\r\n\r\n        {/* <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n          <label style={styles.smallLabel}>Sort</label>\r\n          <select\r\n            value={sortOrder}\r\n            onChange={(e) => setSortOrder(e.target.value)}\r\n            style={styles.sortSelect}\r\n          >\r\n            <option value=\"\">Default</option>\r\n            <option value=\"low\">Price: Low ‚Üí High</option>\r\n            <option value=\"high\">Price: High ‚Üí Low</option>\r\n          </select>\r\n        </div> */}\r\n\r\n        <button\r\n          style={styles.addButton}\r\n          onClick={() => {\r\n            setShowForm(!showForm);\r\n            setEditId(null);\r\n          }}\r\n        >\r\n          {showForm ? \"‚úñ Close\" : \"‚ûï Add Product\"}\r\n        </button>\r\n      </div>\r\n\r\n      <div style={{ display: \"flex\", gap: 8, marginBottom: 12, flexWrap: \"wrap\" }}>\r\n        <button\r\n          style={styles.exportButton}\r\n          onClick={() => window.open(`${API_URL}/export`, \"_blank\")}\r\n        >\r\n           Export CSV\r\n        </button>\r\n\r\n        <label style={{ cursor: \"pointer\" }}>\r\n          <input\r\n            type=\"file\"\r\n            accept=\".csv\"\r\n            style={{ display: \"none\" }}\r\n            onChange={async (e) => {\r\n              try {\r\n                const fd = new FormData();\r\n                fd.append(\"file\", e.target.files[0]);\r\n                await axios.post(`${API_URL}/import`, fd);\r\n                // alert(\"Imported successfully\");\r\n                setAlertBox({\r\n  show: true,\r\n  message: \"‚úÖ Imported successfully\",\r\n  type: \"success\",\r\n});\r\n\r\n                fetchItems();\r\n              } catch (err) {\r\n                // alert(\"Import failed\");\r\n                setAlertBox({\r\n  show: true,\r\n  message: \"‚ùå Import failed\",\r\n  type: \"error\",\r\n});\r\n\r\n              }\r\n            }}\r\n          />\r\n          <span style={styles.importButton}> Import CSV</span>\r\n        </label>\r\n      </div>\r\n\r\n      <div style={{ display: \"flex\", gap: 10, marginBottom: 12, flexWrap: \"wrap\" }}>\r\n        <select\r\n          value={filterCategory}\r\n          onChange={(e) => setFilterCategory(e.target.value)}\r\n          style={styles.select}\r\n        >\r\n          <option value=\"\">Filter by Category</option>\r\n          {categories.map((c) => (\r\n            <option key={c._id} value={c._id}>\r\n              {c.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n\r\n        <select\r\n          value={filterSubcategory}\r\n          onChange={(e) => setFilterSubcategory(e.target.value)}\r\n          disabled={!filterSubs.length}\r\n          style={styles.select}\r\n        >\r\n          <option value=\"\">Filter by Subcategory</option>\r\n          {filterSubs.map((s) => (\r\n            <option key={s._id} value={s._id}>\r\n              {s.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {selectedItems.length > 0 && (\r\n        <div style={styles.bulkBar}>\r\n          {!bulkMode ? (\r\n            <div style={{ display: \"flex\", gap: 8 }}>\r\n              <button style={styles.btnDelete} onClick={handleBulkDelete}>\r\n                üóë Bulk Delete\r\n              </button>\r\n              <button style={styles.btnPrimary} onClick={() => setBulkMode(true)}>\r\n                ‚úè Bulk Edit\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div style={styles.bulkPanel}>\r\n              <h3 style={styles.bulkPanelTitle}>‚úè Bulk Edit Selected Items</h3>\r\n\r\n              {items\r\n                .filter((item) => selectedItems.includes(item._id))\r\n                .map((item) => (\r\n                  <div key={item._id} style={styles.bulkItemBox}>\r\n                    <h4 style={styles.bulkItemTitle}>{item.name}</h4>\r\n\r\n                    <div style={styles.formGrid}>\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Base Price</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.basePrice}\r\n                          onChange={(e) => updateLocalItemField(item._id, \"basePrice\", Number(e.target.value))}\r\n                          style={styles.input}\r\n                        />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Profit/Loss</label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={item.profitLoss}\r\n                          onChange={(e) => updateLocalItemField(item._id, \"profitLoss\", Number(e.target.value))}\r\n                          style={styles.input}\r\n                        />\r\n                      </div>\r\n\r\n                      <div style={styles.formGroup}>\r\n                        <label style={styles.label}>Status</label>\r\n                        <select\r\n                          value={item.status}\r\n                          onChange={(e) => updateLocalItemField(item._id, \"status\", e.target.value)}\r\n                          style={styles.select}\r\n                        >\r\n                          <option value=\"active\">active</option>\r\n                          <option value=\"inactive\">inactive</option>\r\n                        </select>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n\r\n              <div style={{ display: \"flex\", gap: 10, marginTop: 12, flexWrap: 'wrap' }}>\r\n                <button style={styles.btnPrimary} onClick={handleBulkSave}>\r\n                  ‚úî Save All\r\n                </button>\r\n\r\n                <button\r\n                  style={styles.btnPrimary}\r\n                  onClick={async () => {\r\n                    if (!selectedItems.length) return alert(\"No items selected\");\r\n\r\n                    for (let id of selectedItems) await axios.post(`${API_URL}/copy/${id}`);\r\n\r\n                    // alert(\"Selected copied\");\r\n                    setAlertBox({\r\n  show: true,\r\n  message: \"‚úÖ Selected Copied successfully\",\r\n  type: \"success\",\r\n});\r\n\r\n                    fetchItems();\r\n                  }}\r\n                >\r\n                  üìÑ Copy Selected\r\n                </button>\r\n\r\n                <button\r\n                  style={styles.btnPrimary}\r\n                  onClick={async () => {\r\n                    if (!selectedItems.length) return alert(\"No items selected\");\r\n\r\n                    const res = await axios.post(\r\n                      `${API_URL}/export-selected`,\r\n                      { ids: selectedItems },\r\n                      { responseType: \"blob\" }\r\n                    );\r\n\r\n                    const url = window.URL.createObjectURL(new Blob([res.data]));\r\n                    const a = document.createElement(\"a\");\r\n                    a.href = url;\r\n                    a.download = \"selected.csv\";\r\n                    a.click();\r\n                  }}\r\n                >\r\n                   Export Selected\r\n                </button>\r\n\r\n                <button style={styles.btnCancel} onClick={() => setBulkMode(false)}>\r\n                  ‚úñ Cancel\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {showForm && (\r\n        <div style={styles.formCard}>\r\n          <h2 style={styles.formTitle}>‚ûï Add / Edit Product</h2>\r\n\r\n          <form onSubmit={handleSubmit}>\r\n            <div style={styles.formGrid}>\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Product Name *</label>\r\n                <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n{/* \r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Category *</label>\r\n                <select required name=\"category\" value={form.category} onChange={handleChange} style={styles.select}>\r\n                  <option value=\"\">Select Category</option>\r\n                  {categories.map((c) => (\r\n                    <option value={c._id} key={c._id}>\r\n                      {c.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div> */}\r\n<div style={styles.formGroup}>\r\n  <label style={styles.label}>Category *</label>\r\n\r\n  <div style={{ display: \"flex\", gap: 8 }}>\r\n    <select\r\n      required\r\n      name=\"category\"\r\n      value={form.category}\r\n      onChange={handleChange}\r\n      style={{ ...styles.select, flex: 1 }}\r\n    >\r\n      <option value=\"\">Select Category</option>\r\n      {categories.map((c) => (\r\n        <option value={c._id} key={c._id}>\r\n          {c.name}\r\n        </option>\r\n      ))}\r\n    </select>\r\n\r\n    <button\r\n      type=\"button\"\r\n      onClick={() => setShowCategoryModal(true)}\r\n      style={{\r\n        background: \"#0b69ff\",\r\n        color: \"#fff\",\r\n        border: \"none\",\r\n        borderRadius: 8,\r\n        padding: \"8px 14px\",\r\n        cursor: \"pointer\",\r\n        fontWeight: 700,\r\n        height: \"40px\",\r\n      }}\r\n    >\r\n      ‚ûï\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Subcategory</label>\r\n                <select\r\n                  name=\"subcategory\"\r\n                  value={form.subcategory}\r\n                  onChange={handleChange}\r\n                  disabled={!subcategories.length}\r\n                  style={styles.select}\r\n                >\r\n                  <option value=\"\">Select Subcategory</option>\r\n                  {subcategories.map((s) => (\r\n                    <option value={s._id} key={s._id}>\r\n                      {s.name}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Base Price *</label>\r\n                <input\r\n                  type=\"number\"\r\n                  required\r\n                  name=\"basePrice\"\r\n                  value={form.basePrice}\r\n                  onChange={handleChange}\r\n                  style={styles.input}\r\n                />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Profit/Loss</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"profitLoss\"\r\n                  value={form.profitLoss}\r\n                  onChange={handleChange}\r\n                  style={styles.input}\r\n                />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Valid Till</label>\r\n                <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Image</label>\r\n                <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Status</label>\r\n                <select name=\"status\" value={form.status} onChange={handleChange} style={styles.select}>\r\n                  <option value=\"active\">Active</option>\r\n                  <option value=\"inactive\">Inactive</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n\r\n            <div style={styles.formGroup}>\r\n              <label style={styles.label}>Description</label>\r\n              <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n            </div>\r\n\r\n            <div style={styles.formActions}>\r\n              <button style={styles.btnPrimary} disabled={loading}>\r\n                {loading ? \"Saving...\" : editId ? \"Update Product\" : \"Add Product\"}\r\n              </button>\r\n\r\n              <button type=\"button\" style={styles.btnCancel} onClick={resetForm}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      )}\r\n\r\n      <div style={styles.tableCard}>\r\n        <div style={styles.tableHeader}>\r\n          <h2 style={styles.tableTitle}>Items</h2>\r\n          <span style={styles.totalCount}>Total: {filteredItems.length}</span>\r\n        </div>\r\n\r\n        <div style={styles.tableWrapper}>\r\n          <table style={styles.table}>\r\n            <thead>\r\n              <tr>\r\n                <th style={styles.th}>\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedItems.length === filteredItems.length && filteredItems.length > 0}\r\n                    onChange={() => {\r\n                      if (selectedItems.length === filteredItems.length) setSelectedItems([]);\r\n                      else setSelectedItems(filteredItems.map((x) => x._id));\r\n                    }}\r\n                  />\r\n                </th>\r\n                <th style={styles.th}>Sr</th>\r\n                <th style={styles.th}>Image</th>\r\n                <th style={styles.th}>Name</th>\r\n                <th style={styles.th}>Category</th>\r\n                <th style={styles.th}>Subcategory</th>\r\n                <th style={styles.th}>Base Price</th>\r\n                <th style={styles.th}>Profit/Loss</th>\r\n                <th style={styles.th}>Sale Price</th>\r\n                <th style={styles.th}>Price Lock</th>\r\n                <th style={styles.th}>Teji/Maddi</th>\r\n                <th style={styles.th}>Status</th>\r\n                <th style={styles.th}>Actions</th>\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {currentItems.map((item, i) => (\r\n                <tr key={item._id} style={styles.tr}>\r\n                  <td style={styles.td}>\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedItems.includes(item._id)}\r\n                      onChange={() =>\r\n                        setSelectedItems((prev) =>\r\n                          prev.includes(item._id) ? prev.filter((x) => x !== item._id) : [...prev, item._id]\r\n                        )\r\n                      }\r\n                    />\r\n                  </td>\r\n\r\n                  <td style={styles.td}>{(currentPage - 1) * itemsPerPage + (i + 1)}</td>\r\n\r\n                  <td style={styles.td}>\r\n                    {item.image ? <img src={item.image} style={styles.tableImg} alt=\"\" /> : \"No Img\"}\r\n                  </td>\r\n\r\n                  <td style={styles.td}>{item.name}</td>\r\n                  <td style={styles.td}>{item.category?.name || \"-\"}</td>\r\n                  <td style={styles.td}>{item.subcategory?.name || \"-\"}</td>\r\n\r\n                  {/* BASE PRICE - Editable */}\r\n                  <td style={styles.td}>\r\n                    <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n                      <input\r\n                        type=\"number\"\r\n                        value={quickBasePrices[item._id] !== undefined ? quickBasePrices[item._id] : item.basePrice}\r\n                        onChange={(e) => setQuickBasePrices((p) => ({ ...p, [item._id]: e.target.value }))}\r\n                        style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\r\n                      />\r\n                      <button style={styles.btnSmall} onClick={() => updateBasePrice(item)}>\r\n                        ‚úî\r\n                      </button>\r\n                    </div>\r\n                    <small style={{ color: \"#28a745\", display: \"block\", marginTop: 4 }}>Saved: ‚Çπ{item.basePrice}</small>\r\n                  </td>\r\n\r\n                  {/* PROFIT/LOSS - Editable */}\r\n                  <td style={styles.td}>\r\n                    <div style={{ display: \"flex\", gap: 8, alignItems: \"center\" }}>\r\n                      <input\r\n                        type=\"number\"\r\n                        placeholder=\"change\"\r\n                        value={quickProfitLoss[item._id] ?? \"\"}\r\n                        onChange={(e) => setQuickProfitLoss((p) => ({ ...p, [item._id]: e.target.value }))}\r\n                        style={{ ...styles.input, padding: \"6px 8px\", width: 80 }}\r\n                      />\r\n                      <button style={styles.btnSmall} onClick={() => updateProfitLoss(item)}>\r\n                        ‚úî\r\n                      </button>\r\n                    </div>\r\n                    <small style={{ color: \"#666\", display: \"block\", marginTop: 4 }}>Current: {item.profitLoss}</small>\r\n                  </td>\r\n\r\n                  {/* SALE PRICE */}\r\n                  <td style={styles.td}>‚Çπ{item.salePrice}</td>\r\n\r\n                  {/* PRICE LOCK */}\r\n                  <td style={styles.td}>‚Çπ{item.lockedPrice}</td>\r\n\r\n                  {/* TEJI/MADDI */}\r\n                  <td style={styles.td}>\r\n                    {item.lockedPrice === 0 ? (\r\n                      <span style={{ color: \"#6c757d\", fontWeight: \"600\" }}>0</span>\r\n                    ) : (\r\n                      (() => {\r\n                        const teji = item.salePrice - item.lockedPrice;\r\n                        return (\r\n                          <span\r\n                            style={{\r\n                              color: teji >= 0 ? \"#28a745\" : \"#dc3545\",\r\n                              fontWeight: \"600\",\r\n                            }}\r\n                          >\r\n                            {teji >= 0 ? \"‚ñ≤\" : \"‚ñº\"} {Math.abs(teji)}\r\n                          </span>\r\n                        );\r\n                      })()\r\n                    )}\r\n                  </td>\r\n\r\n                  {/* STATUS */}\r\n                  <td style={styles.td}>\r\n                    <button\r\n                      style={item.status === \"active\" ? styles.statusActive : styles.statusInactive}\r\n                      onClick={() => handleStatusToggle(item)}\r\n                    >\r\n                      {item.status === \"active\" ? \"Active\" : \"Inactive\"}\r\n                    </button>\r\n                  </td>\r\n\r\n                  {/* ACTIONS */}\r\n                  <td style={styles.td}>\r\n                    <div style={{ position: \"relative\" }}>\r\n                      <button\r\n                        style={styles.menuButton}\r\n                        onClick={() => setActiveMenu(activeMenu === item._id ? null : item._id)}\r\n                      >\r\n                        ‚ãÆ\r\n                      </button>\r\n\r\n                      {activeMenu === item._id && (\r\n                        <div style={styles.dropdown}>\r\n                          <button style={styles.dropdownItem} onClick={() => handleEdit(item)}>\r\n                            ‚úè Edit\r\n                          </button>\r\n\r\n                          <button\r\n                            style={styles.dropdownItem}\r\n                            onClick={async () => {\r\n                              await axios.post(`${API_URL}/copy/${item._id}`);\r\n                              // alert(\"Copied successfully\");\r\n                              setAlertBox({\r\n  show: true,\r\n  message: \"‚úÖ Copied successfully\",\r\n  type: \"success\",\r\n});\r\n\r\n                              fetchItems();\r\n                            }}\r\n                          >\r\n                            üìÑ Copy\r\n                          </button>\r\n\r\n                          <button style={styles.dropdownItemDelete} onClick={() => handleDelete(item._id)}>\r\n                            üóë Delete\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n\r\n        <div style={styles.pagination}>\r\n          <button style={styles.paginationBtn} disabled={currentPage === 1} onClick={() => setCurrentPage((p) => p - 1)}>\r\n            Previous\r\n          </button>\r\n\r\n          {Array.from({ length: totalPages }, (_, i) => (\r\n            <button\r\n              key={i}\r\n              style={i + 1 === currentPage ? styles.paginationBtnActive : styles.paginationBtn}\r\n              onClick={() => setCurrentPage(i + 1)}\r\n            >\r\n              {i + 1}\r\n            </button>\r\n          ))}\r\n\r\n          <button\r\n            style={styles.paginationBtn}\r\n            disabled={currentPage === totalPages}\r\n            onClick={() => setCurrentPage((p) => p + 1)}\r\n          >\r\n            Next\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {showModal && (\r\n        <div style={styles.modalOverlay} onClick={() => setShowModal(false)}>\r\n          <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n            <h2 style={styles.modalTitle}>‚úè Edit Product</h2>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <div style={styles.formGrid}>\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Product Name *</label>\r\n                  <input required name=\"name\" value={form.name} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Category *</label>\r\n                  <select required name=\"category\" value={form.category} onChange={handleChange} style={styles.select}>\r\n                    <option value=\"\">Select Category</option>\r\n                    {categories.map((c) => (\r\n                      <option value={c._id} key={c._id}>\r\n                        {c.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Subcategory</label>\r\n                  <select\r\n                    name=\"subcategory\"\r\n                    value={form.subcategory}\r\n                    onChange={handleChange}\r\n                    disabled={!subcategories.length}\r\n                    style={styles.select}\r\n                  >\r\n                    <option value=\"\">Select Subcategory</option>\r\n                    {subcategories.map((s) => (\r\n                      <option value={s._id} key={s._id}>\r\n                        {s.name}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Base Price *</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    required\r\n                    name=\"basePrice\"\r\n                    value={form.basePrice}\r\n                    onChange={handleChange}\r\n                    style={styles.input}\r\n                  />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Profit/Loss</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    name=\"profitLoss\"\r\n                    value={form.profitLoss}\r\n                    onChange={handleChange}\r\n                    style={styles.input}\r\n                  />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Valid Till</label>\r\n                  <input type=\"date\" name=\"validTill\" value={form.validTill} onChange={handleChange} style={styles.input} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Image</label>\r\n                  <input type=\"file\" accept=\"image/*\" onChange={handleChange} style={styles.fileInput} />\r\n                </div>\r\n\r\n                <div style={styles.formGroup}>\r\n                  <label style={styles.label}>Status</label>\r\n                  <select name=\"status\" value={form.status} onChange={handleChange} style={styles.select}>\r\n                    <option value=\"active\">Active</option>\r\n                    <option value=\"inactive\">Inactive</option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n\r\n              <div style={styles.formGroup}>\r\n                <label style={styles.label}>Description</label>\r\n                <textarea name=\"description\" value={form.description} onChange={handleChange} style={styles.textarea}></textarea>\r\n              </div>\r\n\r\n              <div style={styles.formActions}>\r\n                <button style={styles.btnPrimary} disabled={loading}>\r\n                  {loading ? \"Saving...\" : \"Update\"}\r\n                </button>\r\n\r\n                <button type=\"button\" style={styles.btnCancel} onClick={resetForm}>\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n        \r\n      )}\r\n      {/* ‚úÖ ADD CATEGORY POPUP MODAL */}\r\n{showCategoryModal && (\r\n  <div style={styles.modalOverlay} onClick={() => setShowCategoryModal(false)}>\r\n    <div style={styles.modal} onClick={(e) => e.stopPropagation()}>\r\n      <h2 style={styles.modalTitle}>‚ûï Add New Category</h2>\r\n\r\n      <div style={styles.formGroup}>\r\n        <label style={styles.label}>Category Name *</label>\r\n        <input\r\n          type=\"text\"\r\n          value={newCategoryName}\r\n          onChange={(e) => setNewCategoryName(e.target.value)}\r\n          style={styles.input}\r\n          placeholder=\"Enter category name\"\r\n          autoFocus\r\n        />\r\n      </div>\r\n\r\n      <div style={{ display: \"flex\", gap: 10, marginTop: 20 }}>\r\n        <button\r\n          onClick={handleAddCategory}\r\n          disabled={categoryLoading}\r\n          style={styles.btnPrimary}\r\n        >\r\n          {categoryLoading ? \"Saving...\" : \"Save Category\"}\r\n        </button>\r\n\r\n        <button\r\n          onClick={() => setShowCategoryModal(false)}\r\n          style={styles.btnCancel}\r\n        >\r\n          Cancel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n)}\r\n{/* ‚úÖ PREMIUM CENTER ALERT */}\r\n{alertBox.show && (\r\n  <div className=\"custom-alert-overlay\">\r\n    <div className={`custom-alert-box ${alertBox.type}`}>\r\n      <p>{alertBox.message}</p>\r\n      <button onClick={() => setAlertBox({ ...alertBox, show: false })}>\r\n        OK\r\n      </button>\r\n    </div>\r\n  </div>\r\n)}\r\n\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = {\r\n  container: {  fontFamily: \"Inter, Arial, sans-serif\", background: \"#f6f8fa\", minHeight: \"100vh\" },\r\n  header: { marginBottom: 8 },\r\n  title: {\r\n    fontSize: \"22px\",\r\n    fontWeight: 800,\r\n    color: \"#dc3545\",\r\n    marginBottom: \"8px\",\r\n  },\r\n\r\n\r\n\r\nsearchInput: {\r\n  flex: \"1\",\r\n  padding: \"12px 14px\",\r\n  borderRadius: \"12px\",\r\n  border: \"1px solid #e2e8f0\",\r\n  background: \"#fff\",\r\n  fontSize: \"14px\",\r\n  outline: \"none\",\r\n  boxShadow: \"0 1px 2px rgba(16,24,40,0.03)\",\r\n},\r\n\r\nsearchInput: {\r\n  flex: \"1\",\r\n  padding: \"12px 14px\",\r\n  borderRadius: \"12px\",\r\n  border: \"1px solid #e2e8f0\",\r\n  background: \"#fff\",\r\n  fontSize: \"14px\",\r\n  outline: \"none\",\r\n  boxShadow: \"0 1px 2px rgba(16,24,40,0.03)\",\r\n},\r\n\r\n  // searchInput: {\r\n  //   flex: \"1\",\r\n  //   minWidth: \"260px\",\r\n  //   padding: \"12px 14px\",\r\n  //   borderRadius: \"12px\",\r\n  //   border: \"1px solid #e2e8f0\",\r\n  //   background: \"#fff\",\r\n  //   fontSize: \"14px\",\r\n  //   outline: \"none\",\r\n  //   boxShadow: \"0 1px 2px rgba(16,24,40,0.03)\",\r\n  // },\r\n  addButton: {\r\n    background: \"#dc3545\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"10px\",\r\n    padding: \"10px 16px\",\r\n    fontSize: \"14px\",\r\n    cursor: \"pointer\",\r\n    fontWeight: 700,\r\n    boxShadow: \"0 6px 18px rgba(11,105,255,0.12)\",\r\n  },\r\n  exportButton: {\r\n    background: \"#fff\",\r\n    color: \"#0f1724\",\r\n    border: \"1px solid #e6eefc\",\r\n    borderRadius: 10,\r\n    padding: \"8px 12px\",\r\n    cursor: \"pointer\",\r\n    fontWeight: 700,\r\n  },\r\n  importButton: {\r\n    background: \"#fff\",\r\n    color: \"#0f1724\",\r\n    border: \"1px solid #e6eefc\",\r\n    borderRadius: 10,\r\n    padding: \"8px 12px\",\r\n    cursor: \"pointer\",\r\n    fontWeight: 700,\r\n    marginLeft: 8,\r\n    \r\n  },\r\n  select: {\r\n    padding: \"10px 12px\",\r\n    borderRadius: \"10px\",\r\n    border: \"1px solid #e2e8f0\",\r\n    background: \"#fff\",\r\n    fontSize: \"13px\",\r\n    minWidth: \"160px\",\r\n  },\r\n  sortSelect: {\r\n    padding: \"10px 12px\",\r\n    borderRadius: \"10px\",\r\n    border: \"1px solid #dbeafe\",\r\n    background: \"#f8fbff\",\r\n    fontSize: \"13px\",\r\n    minWidth: \"170px\",\r\n    fontWeight: 700,\r\n    color: \"#0f1724\",\r\n  },\r\n  smallLabel: {\r\n    fontSize: 12,\r\n    color: \"#475569\",\r\n    fontWeight: 700,\r\n    marginRight: 6,\r\n  },\r\n  bulkBar: {\r\n    background: \"#eef2ff\",\r\n    border: \"1px solid #dbeafe\",\r\n    borderRadius: \"10px\",\r\n    padding: \"12px\",\r\n    marginBottom: \"12px\",\r\n  },\r\n  bulkPanel: {\r\n    width: \"100%\",\r\n    background: \"#fff\",\r\n    border: \"1px solid #eef2ff\",\r\n    padding: \"12px\",\r\n    borderRadius: \"10px\",\r\n  },\r\n  bulkPanelTitle: {\r\n    textAlign: \"center\",\r\n    fontSize: \"16px\",\r\n    fontWeight: 700,\r\n    marginBottom: \"10px\",\r\n    color: \"#0f1724\",\r\n  },\r\n  bulkItemBox: {\r\n    background: \"#ffffff\",\r\n    border: \"1px solid #eef2ff\",\r\n    padding: \"12px\",\r\n    borderRadius: \"8px\",\r\n    marginBottom: \"10px\",\r\n  },\r\n  bulkItemTitle: {\r\n    fontSize: \"14px\",\r\n    fontWeight: 700,\r\n    marginBottom: \"8px\",\r\n    color: \"#0f1724\",\r\n  },\r\n  formCard: {\r\n    borderRadius: \"12px\",\r\n    padding: \"18px\",\r\n    marginBottom: \"18px\",\r\n    background: \"#fff\",\r\n    border: \"1px solid #eef2ff\",\r\n    boxShadow: \"0 4px 16px rgba(2,6,23,0.04)\",\r\n  },\r\n  formTitle: {\r\n    fontSize: \"18px\",\r\n    fontWeight: 800,\r\n    marginBottom: 16,\r\n    color: \"#0f1724\",\r\n  },\r\n  formGrid: {\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(auto-fit, minmax(220px, 1fr))\",\r\n    gap: \"12px\",\r\n  },\r\n  formGroup: { display: \"flex\", flexDirection: \"column\", gap: \"6px\" },\r\n  label: { fontWeight: 700, fontSize: \"13px\", color: \"#0f1724\" },\r\n  input: {\r\n    padding: \"10px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid #e6eef8\",\r\n    background: \"#fff\",\r\n    fontSize: \"13px\",\r\n    outline: \"none\",\r\n  },\r\n  textarea: {\r\n    padding: \"10px\",\r\n    borderRadius: \"8px\",\r\n    border: \"1px solid #e6eef8\",\r\n    background: \"#fff\",\r\n    minHeight: 80,\r\n    fontSize: \"13px\",\r\n    outline: \"none\",\r\n    resize: \"vertical\",\r\n  },\r\n  fileInput: { padding: \"6px\", fontSize: \"13px\" },\r\n  formActions: { marginTop: 16, display: \"flex\", gap: 10 },\r\n  btnPrimary: {\r\n    background: \"#ff0b0bff\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    padding: \"10px 20px\",\r\n    cursor: \"pointer\",\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n  },\r\n  btnSmall: {\r\n    background: \"#b91010ff\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"6px\",\r\n    padding: \"6px 12px\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"12px\",\r\n    fontWeight: 700,\r\n  },\r\n  btnDelete: {\r\n    background: \"#ef4444\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    padding: \"8px 14px\",\r\n    cursor: \"pointer\",\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n  },\r\n  btnCancel: {\r\n    background: \"#6b7280\",\r\n    color: \"#fff\",\r\n    border: \"none\",\r\n    borderRadius: \"8px\",\r\n    padding: \"10px 20px\",\r\n    cursor: \"pointer\",\r\n    fontWeight: 700,\r\n    fontSize: \"14px\",\r\n  },\r\n  tableCard: {\r\n    marginTop: 16,\r\n\r\n\r\n\r\n\r\n\r\n  },\r\n  tableHeader: { display: \"flex\", justifyContent: \"space-between\", marginBottom: 12, alignItems: \"center\" },\r\n  tableTitle: { fontSize: \"18px\", fontWeight: 800, color: \"#0f1724\" },\r\n  totalCount: { fontSize: \"14px\", color: \"#64748b\", fontWeight: 700 },\r\n  tableWrapper: { overflowX: \"auto\", border: \"1px solid #eef2ff\", borderRadius: \"8px\" },\r\n  table: { width: \"100%\", borderCollapse: \"collapse\", fontSize: \"13px\" },\r\n  th: {\r\n    background: \"#fbfdff\",\r\n    // padding: \"12px 10px\",\r\n    fontWeight: 800,\r\n    color: \"#0f1724\",\r\n    textAlign: \"left\",\r\n    // borderBottom: \"2px solid #eef2ff\",\r\n    // whiteSpace: \"nowrap\",\r\n  },\r\n  tr: { borderBottom: \"1px solid #f1f5f9\", transition: \"background 0.2s\" },\r\n  td: { verticalAlign: \"middle\" },\r\n  tableImg: { width: \"50px\", height: \"50px\", borderRadius: \"6px\", objectFit: \"cover\" },\r\n  statusActive: {\r\n    background: \"#d1fae5\",\r\n    padding: \"6px 12px\",\r\n    borderRadius: \"6px\",\r\n    color: \"#065f46\",\r\n    fontWeight: 700,\r\n    border: \"1px solid #bbf7d0\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"12px\",\r\n  },\r\n  statusInactive: {\r\n    background: \"#fee2e2\",\r\n    padding: \"6px 12px\",\r\n    borderRadius: \"6px\",\r\n    color: \"#991b1b\",\r\n    fontWeight: 700,\r\n    border: \"1px solid #fecaca\",\r\n    cursor: \"pointer\",\r\n    fontSize: \"12px\",\r\n  },\r\n  menuButton: { background: \"#fff\", border: \"1px solid #e6eef8\", borderRadius: \"6px\", padding: \"6px 10px\", fontSize: \"16px\", cursor: \"pointer\", fontWeight: 700 },\r\n  dropdown: { position: \"absolute\", right: 0, top: 36, background: \"#fff\", border: \"1px solid #e6eef8\", borderRadius: 8, zIndex: 100, minWidth: 140, boxShadow: \"0 8px 30px rgba(2,6,23,0.08)\" },\r\n  dropdownItem: { display: \"block\", width: \"100%\", padding: \"10px 14px\", background: \"transparent\", border: \"none\", textAlign: \"left\", cursor: \"pointer\", fontSize: 13, fontWeight: 700, transition: \"background 0.12s\" },\r\n  dropdownItemDelete: { display: \"block\", width: \"100%\", padding: \"10px 14px\", background: \"transparent\", border: \"none\", textAlign: \"left\", cursor: \"pointer\", fontSize: 13, fontWeight: 700, color: \"#ef4444\", transition: \"background 0.12s\" },\r\n  pagination: { marginTop: 16, display: \"flex\", justifyContent: \"center\", gap: 8, flexWrap: \"wrap\" },\r\n  paginationBtn: { padding: \"8px 12px\", borderRadius: 8, background: \"#fff\", border: \"1px solid #e6eef8\", cursor: \"pointer\", fontSize: \"13px\", fontWeight: 700 },\r\n  paginationBtnActive: { padding: \"8px 12px\", borderRadius: 8, background: \"#0b69ff\", color: \"white\", border: \"1px solid #0b69ff\", cursor: \"pointer\", fontSize: \"13px\", fontWeight: 800 },\r\n  modalOverlay: { position: \"fixed\", top: 0, left: 0, right: 0, bottom: 0, background: \"rgba(2,6,23,0.5)\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", zIndex: 1000, padding: 20 },\r\n  modal: { background: \"#fff\", borderRadius: 12, padding: 24, maxWidth: 700, width: \"100%\", maxHeight: \"90vh\", overflowY: \"auto\", boxShadow: \"0 12px 48px rgba(2,6,23,0.12)\" },\r\n  modalTitle: { fontSize: 20, fontWeight: 800, color: \"#0f1724\", marginBottom: 16, textAlign: \"center\" },\r\n};\r\n"],"mappings":"mJACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}