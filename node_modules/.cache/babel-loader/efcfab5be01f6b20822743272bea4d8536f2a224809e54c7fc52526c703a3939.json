{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"./Users.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=\"https://grocerrybackend.onrender.com/api/user\";export default function Users(){const[users,setUsers]=useState([]);const[loading,setLoading]=useState(false);const[form,setForm]=useState({name:\"\",email:\"\",// password: \"\",\nrole:\"user\"});const[editId,setEditId]=useState(null);const[openMenu,setOpenMenu]=useState(null);// 3 dots dropdown\nconst fetchUsers=()=>{setLoading(true);axios.get(API).then(res=>setUsers(res.data)).catch(err=>console.error(err)).finally(()=>setLoading(false));};useEffect(()=>{fetchUsers();},[]);const handleSubmit=async e=>{e.preventDefault();try{if(editId){await axios.put(\"\".concat(API,\"/\").concat(editId),form);alert(\"User updated\");}else{await axios.post(API,form);alert(\"User created\");}setForm({name:\"\",email:\"\",password:\"\",role:\"user\"});setEditId(null);fetchUsers();}catch(err){alert(\"Save failed\");}};const handleEdit=usr=>{setForm({name:usr.name,email:usr.email,password:\"\",role:usr.role});setEditId(usr._id);setOpenMenu(null);window.scrollTo({top:0,behavior:\"smooth\"});};const handleDelete=async id=>{if(!window.confirm(\"Delete user?\"))return;try{await axios.delete(\"\".concat(API,\"/\").concat(id));setOpenMenu(null);fetchUsers();}catch(_unused){alert(\"Delete failed\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"users-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"users-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\" User Management\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),!loading&&/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"users-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map((u,i)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:i+1}),/*#__PURE__*/_jsx(\"td\",{children:u.name}),/*#__PURE__*/_jsx(\"td\",{children:u.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"role-badge \".concat(u.role),children:u.role})})]},u._id))})]})}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:\"Loading users...\"})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","API","Users","users","setUsers","loading","setLoading","form","setForm","name","email","role","editId","setEditId","openMenu","setOpenMenu","fetchUsers","get","then","res","data","catch","err","console","error","finally","handleSubmit","e","preventDefault","put","concat","alert","post","password","handleEdit","usr","_id","window","scrollTo","top","behavior","handleDelete","id","confirm","delete","_unused","className","children","map","u","i"],"sources":["/Users/akshaychandel/Desktop/Grocerryadminfrontend-main/src/pages/admin/Users.jsx"],"sourcesContent":["\r\nimport React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"./Users.css\";\r\n\r\nconst API = \"https://grocerrybackend.onrender.com/api/user\";\r\n\r\nexport default function Users() {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    // password: \"\",\r\n    role: \"user\",\r\n  });\r\n\r\n  const [editId, setEditId] = useState(null);\r\n  const [openMenu, setOpenMenu] = useState(null); // 3 dots dropdown\r\n\r\n  const fetchUsers = () => {\r\n    setLoading(true);\r\n    axios\r\n      .get(API)\r\n      .then((res) => setUsers(res.data))\r\n      .catch((err) => console.error(err))\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      if (editId) {\r\n        await axios.put(`${API}/${editId}`, form);\r\n        alert(\"User updated\");\r\n      } else {\r\n        await axios.post(API, form);\r\n        alert(\"User created\");\r\n      }\r\n\r\n      setForm({ name: \"\", email: \"\", password: \"\", role: \"user\" });\r\n      setEditId(null);\r\n      fetchUsers();\r\n    } catch (err) {\r\n      alert(\"Save failed\");\r\n    }\r\n  };\r\n\r\n  const handleEdit = (usr) => {\r\n    setForm({\r\n      name: usr.name,\r\n      email: usr.email,\r\n      password: \"\",\r\n      role: usr.role,\r\n    });\r\n    setEditId(usr._id);\r\n    setOpenMenu(null);\r\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm(\"Delete user?\")) return;\r\n\r\n    try {\r\n      await axios.delete(`${API}/${id}`);\r\n      setOpenMenu(null);\r\n      fetchUsers();\r\n    } catch {\r\n      alert(\"Delete failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"users-container\">\r\n      <div className=\"users-header\">\r\n        <h2> User Management</h2>\r\n        \r\n        \r\n      </div>\r\n<br/>\r\n<br/>\r\n      {/* Form */}\r\n      {/* <form className=\"user-form\" onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Name\"\r\n          value={form.name}\r\n          onChange={(e) => setForm({ ...form, name: e.target.value })}\r\n        />\r\n\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={form.email}\r\n          onChange={(e) => setForm({ ...form, email: e.target.value })}\r\n        />\r\n\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Password (encrypted)\"\r\n          value={form.password}\r\n          onChange={(e) => setForm({ ...form, password: e.target.value })}\r\n        />\r\n\r\n        <select\r\n          value={form.role}\r\n          onChange={(e) => setForm({ ...form, role: e.target.value })}\r\n        >\r\n          <option value=\"user\">User</option>\r\n          <option value=\"admin\">Admin</option>\r\n        </select>\r\n\r\n        <button type=\"submit\">{editId ? \"Update User\" : \"Add User\"}</button>\r\n\r\n        {editId && (\r\n          <button\r\n            type=\"button\"\r\n            className=\"cancel-btn\"\r\n            onClick={() => {\r\n              setEditId(null);\r\n              setForm({ name: \"\", email: \"\", password: \"\", role: \"user\" });\r\n            }}\r\n          >\r\n            Cancel\r\n          </button>\r\n        )}\r\n      </form> */}\r\n\r\n      {/* TABLE WITH SCROLL */}\r\n      {!loading && (\r\n        <div className=\"table-wrapper\">\r\n          <table className=\"users-table\">\r\n            <thead>\r\n              <tr>\r\n                <th>#</th>\r\n                <th>Name</th>\r\n                <th>Email</th>\r\n                {/* <th>Password</th> */}\r\n                <th>Role</th>\r\n                {/* <th>Actions</th> */}\r\n              </tr>\r\n            </thead>\r\n\r\n            <tbody>\r\n              {users.map((u, i) => (\r\n                <tr key={u._id}>\r\n                  <td>{i + 1}</td>\r\n                  <td>{u.name}</td>\r\n                  <td>{u.email}</td>\r\n\r\n                  {/* <td className=\"password-col\">{u.password}</td> */}\r\n\r\n                  <td>\r\n                    <span className={`role-badge ${u.role}`}>{u.role}</span>\r\n                  </td>\r\n\r\n                  {/* 3 DOTS MENU */}\r\n                  {/* <td className=\"action-cell\">\r\n                    <div className=\"action-menu\">\r\n                      <button\r\n                        className=\"dots-btn\"\r\n                        onClick={() =>\r\n                          setOpenMenu(openMenu === u._id ? null : u._id)\r\n                        }\r\n                      >\r\n                        â‹®\r\n                      </button>\r\n\r\n                      {openMenu === u._id && (\r\n                        <div className=\"dropdown-menu\">\r\n                          <button onClick={() => handleEdit(u)}>Edit</button>\r\n                          <button onClick={() => handleDelete(u._id)}>\r\n                            Delete\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </td> */}\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      {loading && <div className=\"loader\">Loading users...</div>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}