function toPath(deepKey) {
    const ESCAPE_REGEXP = /\\(\\)?/g;
    const PROPERTY_REGEXP = RegExp('[^.[\\]]+' +
        '|' +
        '\\[(?:' +
        '([^"\'][^[]*)' +
        '|' +
        '(["\'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2' +
        ')\\]' +
        '|' +
        '(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))', 'g');
    const result = [];
    if (deepKey[0] === '.') {
        result.push('');
    }
    let match;
    let lastIndex = 0;
    while ((match = PROPERTY_REGEXP.exec(deepKey)) !== null) {
        let key = match[0];
        const expr = match[1];
        const quote = match[2];
        const substr = match[3];
        if (quote) {
            key = substr.replace(ESCAPE_REGEXP, '$1');
        }
        else if (expr) {
            key = expr;
        }
        result.push(key);
        if (PROPERTY_REGEXP.lastIndex === lastIndex) {
            PROPERTY_REGEXP.lastIndex++;
        }
        else {
            lastIndex = PROPERTY_REGEXP.lastIndex;
        }
    }
    return result;
}

export { toPath };
