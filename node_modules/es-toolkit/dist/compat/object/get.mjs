import { isDeepKey } from '../_internal/isDeepKey.mjs';
import { toKey } from '../_internal/toKey.mjs';
import { toPath } from '../_internal/toPath.mjs';

function get(object, path, defaultValue) {
    let resolvedPath;
    if (Array.isArray(path)) {
        resolvedPath = path;
    }
    else if (typeof path === 'string' && isDeepKey(path) && object?.[path] == null) {
        resolvedPath = toPath(path);
    }
    else {
        resolvedPath = [path];
    }
    if (resolvedPath.length === 0) {
        return defaultValue;
    }
    let current = object;
    let index;
    for (index = 0; index < resolvedPath.length && current != null; index++) {
        const key = toKey(resolvedPath[index]);
        current = current[key];
    }
    if (current === null && index === resolvedPath.length) {
        return current;
    }
    return current ?? defaultValue;
}

export { get };
